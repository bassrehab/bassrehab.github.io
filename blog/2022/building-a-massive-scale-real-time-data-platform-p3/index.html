<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="R3nPzqP9nO2aTgysGUiU3t-pw3wi1xuUuKVaMrimuck"> <meta name="msvalidate.01" content="04fec5e0d64b1c9bc788e98f81ee2a78"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Part 3 - Building a Massive-Scale Real-Time Data Platform - Memory Management with Apache Ignite | Subhadip Mitra </title> <meta name="author" content="Subhadip Mitra"> <meta name="description" content="Deep dive into memory management with Apache Ignite for high-performance data platforms. Learn how to handle 2.5M events/second with sub-millisecond latency through practical memory architecture, optimization techniques, and real-world implementation patterns."> <meta name="keywords" content="subhadip-mitra,subhadip,google,google-cloud,data-&amp;-analytics,ai-innovations,enterprise-technology-leadership,digital-transformation,machine-learning-models,cloud-technologies,quantum-computing,technology-consulting,singapore,researcher,llm,genai"> <meta property="og:site_name" content="Subhadip Mitra"> <meta property="og:type" content="article"> <meta property="og:title" content="Subhadip Mitra | Part 3 - Building a Massive-Scale Real-Time Data Platform - Memory Management with Apache Ignite"> <meta property="og:url" content="https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/"> <meta property="og:description" content="Deep dive into memory management with Apache Ignite for high-performance data platforms. Learn how to handle 2.5M events/second with sub-millisecond latency through practical memory architecture, optimization techniques, and real-world implementation patterns."> <meta property="og:image" content="https://subhadipmitra.com/assets/img/og/building-a-massive-scale-real-time-data-platform-p3.png"> <meta property="og:image:width" content="1200"> <meta property="og:image:height" content="630"> <meta property="og:locale" content="en"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:title" content="Part 3 - Building a Massive-Scale Real-Time Data Platform - Memory Management with Apache Ignite"> <meta name="twitter:description" content="Deep dive into memory management with Apache Ignite for high-performance data platforms. Learn how to handle 2.5M events/second with sub-millisecond latency through practical memory architecture, optimization techniques, and real-world implementation patterns."> <meta name="twitter:image" content="https://subhadipmitra.com/assets/img/og/building-a-massive-scale-real-time-data-platform-p3.png"> <meta property="article:published_time" content="2022-11-27T11:31:58+00:00"> <meta property="article:author" content="Subhadip Mitra"> <meta property="article:tag" content="system-design"> <meta property="article:tag" content="architecture"> <meta property="article:tag" content="casestudy"> <meta property="article:tag" content="ignite"> <meta property="article:tag" content="kafka"> <meta property="article:section" content="architecture"> <meta property="article:section" content="system-design"> <meta property="article:section" content="casetudy"> <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/"
        },
        "headline": "Part 3 - Building a Massive-Scale Real-Time Data Platform - Memory Management with Apache Ignite",
        "description": "Deep dive into memory management with Apache Ignite for high-performance data platforms. Learn how to handle 2.5M events/second with sub-millisecond latency through practical memory architecture, optimization techniques, and real-world implementation patterns.",
        "url": "https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/",
        "datePublished": "2022-11-27T11:31:58+00:00",
        
        "dateModified": "2022-11-27T11:31:58+00:00",
        
        "wordCount": 4391,
        "timeRequired": "PT22M",
        
        "image": "https://subhadipmitra.com/assets/img/social_preview.png",
        
        
        "keywords": "system-design, architecture, casestudy, ignite, kafka",
        
        
        "articleSection": "architecture",
        
        "author": {
            "@type": "Person",
            "name": "Subhadip Mitra",
            "url": "https://subhadipmitra.com",
            "jobTitle": "Data & Analytics Manager, Site Lead Southeast Asia",
            "worksFor": {
                "@type": "Organization",
                "name": "Google Cloud"
            },
            "sameAs": [
                "https://linkedin.com/in/subhadip-mitra",
                "https://github.com/bassrehab",
                "https://twitter.com/bassrehab"
            ]
        },
        "publisher": {
            "@type": "Organization",
            "name": "Subhadip Mitra",
            "url": "https://subhadipmitra.com",
            "logo": {
                "@type": "ImageObject",
                "url": "https://subhadipmitra.com/assets/img/prof_pic.jpg"
            }
        },
        "isPartOf": {
            "@type": "Blog",
            "name": "binary breakthroughs",
            "url": "https://subhadipmitra.com/blog/"
        }
        
    }
  </script> <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://subhadipmitra.com"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "Blog",
                "item": "https://subhadipmitra.com/blog/"
            },
            
            {
                "@type": "ListItem",
                "position": 3,
                "name": "Architecture",
                "item": "https://subhadipmitra.com/blog/category/architecture"
            },
            {
                "@type": "ListItem",
                "position": 4,
                "name": "Part 3 - Building a Massive-Scale Real-Time Data Platform - Memory Management with Apache Ignite",
                "item": "https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/"
            }
            
        ]
    }
  </script> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&amp;family=Inter+Tight:ital,wght@0,100..900;1,100..900&amp;family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="/assets/img/favicon.png?058310854f7b3c920f894a1d42c3c47b"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/"> <script src="/assets/js/theme.js?33a804e644f2507dbddc853404eccc7a"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Subhadip</span> Mitra </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/now/">now </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">more </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/archive/">archive</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/contact/">contact</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/license/">licenses</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/privacy/">privacy</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="https://upir.subhadipmitra.com" rel="external nofollow noopener" target="_blank">docs: UPIR</a> <a class="dropdown-item " href="https://ai-metacognition-toolkit.subhadipmitra.com/" rel="external nofollow noopener" target="_blank">docs: AI Metacognition</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Part 3 - Building a Massive-Scale Real-Time Data Platform - Memory Management with Apache Ignite</h1> <p class="post-meta"> Created on November 27, 2022 </p> <p class="post-tags"> <a href="/blog/2022"> <i class="fa-solid fa-calendar fa-sm"></i> 2022 </a>   ·   <a href="/blog/tag/system-design"> <i class="fa-solid fa-hashtag fa-sm"></i> system-design</a>   <a href="/blog/tag/architecture"> <i class="fa-solid fa-hashtag fa-sm"></i> architecture</a>   <a href="/blog/tag/casestudy"> <i class="fa-solid fa-hashtag fa-sm"></i> casestudy</a>   <a href="/blog/tag/ignite"> <i class="fa-solid fa-hashtag fa-sm"></i> ignite</a>   <a href="/blog/tag/kafka"> <i class="fa-solid fa-hashtag fa-sm"></i> kafka</a>   ·   <a href="/blog/category/architecture"> <i class="fa-solid fa-tag fa-sm"></i> architecture</a>   <a href="/blog/category/system-design"> <i class="fa-solid fa-tag fa-sm"></i> system-design</a>   <a href="/blog/category/casetudy"> <i class="fa-solid fa-tag fa-sm"></i> casetudy</a> </p> </header> <div class="audio-reader-container"> <div class="audio-reader-compact"> <button class="audio-trigger" id="audio-trigger" aria-label="Open audio player"> <i class="fas fa-headphones"></i> <span>Listen to article</span> <i class="fas fa-chevron-down audio-trigger-icon"></i> </button> <div class="audio-player-expanded" id="audio-player-expanded"> <div class="audio-player-body"> <div class="audio-info-bar"> <i class="fas fa-info-circle"></i> <span>Browser text-to-speech • Quality varies by device</span> </div> <div class="audio-controls-row"> <button class="audio-btn audio-btn-play" id="tts-play" aria-label="Play"> <i class="fas fa-play"></i> <span id="play-text">Play</span> </button> <button class="audio-btn audio-btn-pause" id="tts-pause" style="display: none;" aria-label="Pause"> <i class="fas fa-pause"></i> <span>Pause</span> </button> <button class="audio-btn audio-btn-stop" id="tts-stop" aria-label="Stop"> <i class="fas fa-stop"></i> </button> <div class="audio-speed-control"> <label for="tts-rate" class="audio-speed-label"> <i class="fas fa-gauge-high"></i> <span id="tts-rate-value">1.0x</span> </label> <input id="tts-rate" type="range" min="0.5" max="2" step="0.1" value="1" class="audio-speed-slider"> </div> </div> <div class="audio-voice-row"> <label for="tts-voice" class="audio-voice-label"> <i class="fas fa-microphone"></i> <span>Voice:</span> </label> <select id="tts-voice" class="audio-voice-select"> <option value="">Loading voices...</option> </select> </div> <div class="audio-progress-section"> <div class="audio-progress-info"> <span><i class="fas fa-circle-notch"></i> Progress</span> <span id="tts-progress">0%</span> </div> <div class="progress" style="height: 4px;"> <div class="progress-bar" id="tts-progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div> </div> </div> </div> </div> </div> </div> <style>.audio-reader-container{margin:1.5rem 0;font-family:var(--global-font-family,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif)}.audio-reader-compact{position:relative}.audio-trigger{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:var(--global-code-bg-color,#f8f9fa);border:1px solid var(--global-divider-color,#dee2e6);border-radius:.375rem;color:var(--global-text-color,#212529);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;font-family:inherit}.audio-trigger:hover{background:var(--global-bg-color,#fff);border-color:var(--global-theme-color,#0d6efd);color:var(--global-theme-color,#0d6efd);box-shadow:0 .125rem .25rem rgba(0,0,0,0.075)}.audio-trigger i:first-child{font-size:1rem;color:var(--global-theme-color,#0d6efd)}.audio-trigger-icon{font-size:.75rem;margin-left:.25rem;transition:transform .3s ease;color:var(--global-text-color-light,#6c757d)}.audio-trigger.active .audio-trigger-icon{transform:rotate(180deg)}.audio-trigger:focus{outline:2px solid var(--global-theme-color,#0d6efd);outline-offset:2px}.audio-player-expanded{display:none;margin-top:.75rem;background:var(--global-bg-color,#fff);border:1px solid var(--global-divider-color,#dee2e6);border-radius:.5rem;box-shadow:0 .25rem .75rem rgba(0,0,0,0.05);animation:slideDown .3s ease}.audio-player-expanded.show{display:block}@keyframes slideDown{from{opacity:0;transform:translateY(-0.5rem)}to{opacity:1;transform:translateY(0)}}.audio-player-body{padding:1rem}.audio-info-bar{display:flex;align-items:center;gap:.5rem;padding:.625rem .75rem;background:var(--global-code-bg-color,#f8f9fa);border-left:2px solid var(--global-theme-color,#0d6efd);border-radius:.25rem;font-size:.8125rem;color:var(--global-text-color-light,#6c757d);margin-bottom:1rem}.audio-info-bar i{color:var(--global-theme-color,#0d6efd);font-size:.875rem}.audio-controls-row{display:flex;align-items:center;gap:.5rem;margin-bottom:.875rem;flex-wrap:wrap}.audio-btn{display:inline-flex;align-items:center;gap:.375rem;padding:.375rem .875rem;border:1px solid transparent;border-radius:.375rem;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .15s ease;font-family:inherit;color:#fff}.audio-btn i{font-size:.8125rem}.audio-btn span{color:#fff}.audio-btn:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 .125rem .375rem rgba(0,0,0,0.15)}.audio-btn:active:not(:disabled){transform:translateY(0)}.audio-btn:disabled{opacity:.6;cursor:not-allowed}.audio-btn-play{background:var(--global-theme-color,#0d6efd);border-color:var(--global-theme-color,#0d6efd)}.audio-btn-play:hover:not(:disabled){background:color-mix(in srgb,var(--global-theme-color,#0d6efd) 85%,black);border-color:color-mix(in srgb,var(--global-theme-color,#0d6efd) 80%,black)}.audio-btn-play.playing{background:#198754;border-color:#198754}.audio-btn-pause{background:#6c757d;border-color:#6c757d}.audio-btn-pause:hover:not(:disabled){background:#5c636a;border-color:#565e64}.audio-btn-stop{background:transparent;color:#dc3545;border-color:#dc3545;padding:.375rem .625rem}.audio-btn-stop:hover:not(:disabled){background:#dc3545;color:#fff;border-color:#dc3545}.audio-speed-control{display:flex;align-items:center;gap:.5rem;margin-left:auto}.audio-speed-label{display:flex;align-items:center;gap:.375rem;font-size:.8125rem;font-weight:500;color:var(--global-text-color,#212529);margin:0;white-space:nowrap}.audio-speed-label i{color:var(--global-theme-color,#0d6efd);font-size:.875rem}.audio-speed-slider{width:80px;height:4px;-webkit-appearance:none;appearance:none;background:var(--global-divider-color,#dee2e6);border-radius:2px;outline:0}.audio-speed-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:14px;height:14px;border-radius:50%;background:var(--global-theme-color,#0d6efd);cursor:pointer;transition:transform .15s ease}.audio-speed-slider::-webkit-slider-thumb:hover{transform:scale(1.2)}.audio-speed-slider::-moz-range-thumb{width:14px;height:14px;border-radius:50%;background:var(--global-theme-color,#0d6efd);border:0;cursor:pointer;transition:transform .15s ease}.audio-speed-slider::-moz-range-thumb:hover{transform:scale(1.2)}.audio-voice-row{display:flex;align-items:center;gap:.75rem;margin-bottom:.875rem}.audio-voice-label{display:flex;align-items:center;gap:.375rem;font-size:.8125rem;font-weight:500;color:var(--global-text-color,#212529);margin:0;white-space:nowrap}.audio-voice-label i{color:var(--global-theme-color,#0d6efd);font-size:.875rem}.audio-voice-select{flex:1;padding:.375rem .75rem;border:1px solid var(--global-divider-color,#dee2e6);border-radius:.375rem;font-size:.8125rem;background:var(--global-bg-color,#fff);color:var(--global-text-color,#212529);cursor:pointer;transition:border-color .15s ease}.audio-voice-select:hover{border-color:var(--global-theme-color,#0d6efd)}.audio-voice-select:focus{outline:0;border-color:var(--global-theme-color,#0d6efd);box-shadow:0 0 0 .2rem rgba(13,110,253,0.25)}.audio-progress-section{margin-top:.75rem;padding-top:.75rem;border-top:1px solid var(--global-divider-color,#e9ecef)}
.audio-progress-info{display:flex;justify-content:space-between;align-items:center;font-size:.8125rem;color:var(--global-text-color-light,#6c757d);margin-bottom:.5rem}.audio-progress-info i{margin-right:.25rem;color:var(--global-theme-color,#0d6efd);font-size:.75rem}.progress{border-radius:2px;overflow:hidden;background:var(--global-divider-color,#e9ecef)}.progress-bar{background:var(--global-theme-color,#0d6efd);transition:width .6s ease}[data-theme="dark"] .audio-trigger,body.dark-mode .audio-trigger{background:rgba(255,255,255,0.05);border-color:var(--global-divider-color,#454545);color:var(--global-text-color,#e9ecef)}[data-theme="dark"] .audio-trigger:hover,body.dark-mode .audio-trigger:hover{background:rgba(255,255,255,0.08)}[data-theme="dark"] .audio-player-expanded,body.dark-mode .audio-player-expanded{background:var(--global-bg-color,#1e1e1e);border-color:var(--global-divider-color,#454545)}[data-theme="dark"] .audio-info-bar,body.dark-mode .audio-info-bar{background:rgba(255,255,255,0.03)}[data-theme="dark"] .audio-voice-select,body.dark-mode .audio-voice-select{background:var(--global-bg-color,#1e1e1e);border-color:var(--global-divider-color,#454545);color:var(--global-text-color,#e9ecef)}[data-theme="dark"] .progress,body.dark-mode .progress{background:rgba(255,255,255,0.1)}@media(max-width:576px){.audio-trigger span{display:none}.audio-controls-row{flex-wrap:wrap}.audio-btn span{display:none}.audio-btn{padding:.5rem .75rem}.audio-btn i{font-size:1rem}.audio-speed-control{width:100%;margin-left:0;margin-top:.5rem}.audio-speed-slider{flex:1}.audio-voice-row{flex-direction:column;align-items:stretch}}@media print{.audio-reader-container{display:none!important}}@media(prefers-reduced-motion:reduce){.audio-trigger,.audio-btn,.progress-bar,.audio-player-expanded{transition:none;animation:none}}</style> <script>
(function() {
  'use strict';
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
  
  function init() {
    if (!('speechSynthesis' in window)) {
      document.querySelector('.audio-reader-container').innerHTML = `
        <div class="audio-reader-compact">
          <div class="alert alert-warning d-flex align-items-center" role="alert" style="font-size: 0.875rem;">
            <i class="fas fa-exclamation-triangle me-2"></i>
            <div>Text-to-speech not supported in this browser.</div>
          </div>
        </div>
      `;
      return;
    }

    const synth = window.speechSynthesis;
    let utterance = null;
    let isPaused = false;
    
    const triggerBtn = document.getElementById('audio-trigger');
    const expandedPlayer = document.getElementById('audio-player-expanded');
    const playBtn = document.getElementById('tts-play');
    const pauseBtn = document.getElementById('tts-pause');
    const stopBtn = document.getElementById('tts-stop');
    const voiceSelect = document.getElementById('tts-voice');
    const rateSlider = document.getElementById('tts-rate');
    const rateValue = document.getElementById('tts-rate-value');
    const progressText = document.getElementById('tts-progress');
    const progressBar = document.getElementById('tts-progress-bar');
    const playText = document.getElementById('play-text');

    const possibleSelectors = [
      '.post-content',
      'article .post-content',
      '.post .post-content',
      'article.post',
      '.post',
      'article',
      'main article',
      'main .container',
      'main',
      '.l-main',
      '.content'
    ];
    
    let articleElement = null;
    for (const selector of possibleSelectors) {
      articleElement = document.querySelector(selector);
      if (articleElement) break;
    }
    
    if (!articleElement) {
      console.warn('Audio Reader: Could not find article content');
      return;
    }
    
    const clonedContent = articleElement.cloneNode(true);
    const elementsToRemove = [
      'pre', 'code', 'script', 'style', 'nav', '.audio-reader-container',
      '.citation', '.giscus', '.utterances', '.navigation', '.pagination',
      '.social', '.share', 'header', 'footer', '.header', '.footer', '.sidebar'
    ];
    
    elementsToRemove.forEach(selector => {
      clonedContent.querySelectorAll(selector).forEach(el => el.remove());
    });
    
    const articleText = clonedContent.innerText
      .replace(/\s+/g, ' ')
      .replace(/\n{3,}/g, '\n\n')
      .trim();
    
    if (!articleText || articleText.length < 100) {
      console.warn('Audio Reader: Article too short');
      return;
    }

    // Toggle player
    triggerBtn.addEventListener('click', function() {
      expandedPlayer.classList.toggle('show');
      this.classList.toggle('active');
      localStorage.setItem('audioPlayerExpanded', expandedPlayer.classList.contains('show'));
    });

    // Load voices
    function loadVoices() {
      const voices = synth.getVoices();
      if (voices.length === 0) {
        setTimeout(loadVoices, 100);
        return;
      }
      
      voiceSelect.innerHTML = '<option value="">Default Voice</option>';
      
      const englishVoices = voices.filter(v => v.lang.startsWith('en'));
      const preferredVoices = englishVoices.filter(v => 
        v.name.includes('Google') || v.name.includes('Microsoft') ||
        v.name.includes('Premium') || v.name.includes('Enhanced') || v.name.includes('Natural')
      );
      const standardEnglishVoices = englishVoices.filter(v => !preferredVoices.includes(v));
      const otherVoices = voices.filter(v => !v.lang.startsWith('en'));
      
      preferredVoices.forEach((voice) => {
        const option = document.createElement('option');
        option.value = voices.indexOf(voice);
        option.textContent = `${voice.name} (${voice.lang})`;
        voiceSelect.appendChild(option);
      });
      
      if (standardEnglishVoices.length > 0) {
        const optgroup = document.createElement('optgroup');
        optgroup.label = 'Other English';
        standardEnglishVoices.forEach((voice) => {
          const option = document.createElement('option');
          option.value = voices.indexOf(voice);
          option.textContent = `${voice.name} (${voice.lang})`;
          optgroup.appendChild(option);
        });
        voiceSelect.appendChild(optgroup);
      }
      
      if (otherVoices.length > 0) {
        const optgroup = document.createElement('optgroup');
        optgroup.label = 'Other Languages';
        otherVoices.forEach((voice) => {
          const option = document.createElement('option');
          option.value = voices.indexOf(voice);
          option.textContent = `${voice.name} (${voice.lang})`;
          optgroup.appendChild(option);
        });
        voiceSelect.appendChild(optgroup);
      }
    }

    loadVoices();
    if (synth.addEventListener) {
      synth.addEventListener('voiceschanged', loadVoices);
    }

    function updateProgress(current, total) {
      const percent = Math.min(100, Math.round((current / total) * 100));
      progressText.textContent = `${percent}%`;
      progressBar.style.width = `${percent}%`;
      progressBar.setAttribute('aria-valuenow', percent);
    }

    function updatePlayButton(isPlaying) {
      const icon = playBtn.querySelector('i');
      if (isPlaying) {
        icon.className = 'fas fa-circle-dot';
        playText.textContent = 'Playing';
        playBtn.classList.add('playing');
      } else {
        icon.className = 'fas fa-play';
        playText.textContent = 'Play';
        playBtn.classList.remove('playing');
      }
    }

    function speak() {
      if (isPaused) {
        synth.resume();
        isPaused = false;
        updatePlayButton(true);
        pauseBtn.style.display = 'inline-flex';
        return;
      }

      synth.cancel();
      utterance = new SpeechSynthesisUtterance(articleText);
      
      if (voiceSelect.value) {
        const voices = synth.getVoices();
        utterance.voice = voices[parseInt(voiceSelect.value)];
      }
      
      utterance.rate = parseFloat(rateSlider.value);
      utterance.pitch = 1;
      utterance.volume = 1;
      
      utterance.onstart = function() {
        updatePlayButton(true);
        pauseBtn.style.display = 'inline-flex';
        playBtn.disabled = false;
      };
      
      utterance.onend = function() {
        updatePlayButton(false);
        pauseBtn.style.display = 'none';
        updateProgress(100, 100);
        setTimeout(() => updateProgress(0, 100), 1000);
      };
      
      utterance.onboundary = function(event) {
        updateProgress(event.charIndex, articleText.length);
      };

      utterance.onerror = function(event) {
        if (event.error !== 'interrupted' && event.error !== 'canceled') {
          alert('Playback error. Try a different voice.');
        }
        updatePlayButton(false);
        pauseBtn.style.display = 'none';
      };

      playBtn.disabled = true;
      synth.speak(utterance);
    }

    function pause() {
      if (synth.speaking && !isPaused) {
        synth.pause();
        isPaused = true;
        const icon = playBtn.querySelector('i');
        icon.className = 'fas fa-play';
        playText.textContent = 'Resume';
        playBtn.classList.remove('playing');
        pauseBtn.style.display = 'none';
      }
    }

    function stop() {
      synth.cancel();
      isPaused = false;
      updatePlayButton(false);
      pauseBtn.style.display = 'none';
      updateProgress(0, 100);
    }

    playBtn.addEventListener('click', speak);
    pauseBtn.addEventListener('click', pause);
    stopBtn.addEventListener('click', stop);
    
    rateSlider.addEventListener('input', function(e) {
      rateValue.textContent = `${parseFloat(e.target.value).toFixed(1)}x`;
    });

    window.addEventListener('beforeunload', function() {
      synth.cancel();
    });

    if (localStorage.getItem('audioPlayerExpanded') === 'true') {
      setTimeout(() => {
        expandedPlayer.classList.add('show');
        triggerBtn.classList.add('active');
      }, 100);
    }
  }
})();
</script> <article class="post-content"> <div id="markdown-content"> <p>In <a href="https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p1/">Parts 1</a> and <a href="https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p2/">2</a>, we explored our system architecture and data partitioning strategies. Today, we’ll dive deep into how we managed memory using Apache Ignite to handle 2.5 million events per second while maintaining sub-millisecond response times.</p> <h2 id="memory-management-challenges">Memory Management Challenges</h2> <h3 id="scale-requirements">Scale Requirements</h3> <ol> <li> <p><strong>Event Processing</strong></p> <ul> <li>2.5M events/second ingestion</li> <li>Sub-millisecond query latency</li> <li>Real-time aggregations</li> <li>State maintenance</li> </ul> </li> <li> <p><strong>DPI Data</strong></p> <ul> <li>350GB/15min processing</li> <li>Complex analysis</li> <li>Pattern detection</li> <li>Historical queries</li> </ul> </li> <li> <p><strong>Active Dataset</strong></p> <ul> <li>Multiple event types</li> <li>Rich subscriber data</li> <li>Location information</li> <li>Real-time metrics</li> </ul> </li> </ol> <h2 id="memory-architecture">Memory Architecture</h2> <p><br></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/blog/ignite-memory-architecture-480.webp 480w,/assets/img/blog/ignite-memory-architecture-800.webp 800w,/assets/img/blog/ignite-memory-architecture-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/blog/ignite-memory-architecture.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p><br></p> <h3 id="memory-regions">Memory Regions</h3> <ol> <li> <p><strong>On-Heap Memory (20%)</strong></p> <ul> <li>Size: ~100GB per node</li> <li>Usage: Critical metadata</li> <li>Contents: Indexes and query execution</li> <li>GC tuning: ZGC optimized</li> </ul> </li> <li> <p><strong>Off-Heap Memory (80%)</strong></p> <ul> <li>Size: ~400GB per node</li> <li>Usage: Event data storage</li> <li>Direct memory allocation</li> <li>Zero-copy operations</li> </ul> </li> </ol> <h3 id="memory-organization">Memory Organization</h3> <ol> <li> <p><strong>Page Memory</strong></p> <ul> <li>Page size: 2KB to 2MB</li> <li>Pre-allocated pools</li> <li>NUMA-aware allocation</li> <li>Defragmentation support</li> </ul> </li> <li> <p><strong>Data Regions</strong></p> <ul> <li>Hot data region (4 hours)</li> <li>Warm data region (24 hours)</li> <li>Index region (permanent)</li> <li>System region (permanent)</li> </ul> </li> </ol> <h2 id="implementation-strategy">Implementation Strategy</h2> <p><br></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/blog/memory-management-flow-480.webp 480w,/assets/img/blog/memory-management-flow-800.webp 800w,/assets/img/blog/memory-management-flow-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/blog/memory-management-flow.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p><br></p> <h3 id="memory-configuration">Memory Configuration</h3> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.configuration.IgniteConfiguration"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"dataStorageConfiguration"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.configuration.DataStorageConfiguration"</span><span class="nt">&gt;</span>
            <span class="c">&lt;!-- System region configuration --&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"systemRegionInitialSize"</span>
                      <span class="na">value=</span><span class="s">"#{10L * 1024 * 1024 * 1024}"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- 10GB --&gt;</span>

            <span class="c">&lt;!-- Default region configuration --&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"defaultDataRegionConfiguration"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.configuration.DataRegionConfiguration"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">value=</span><span class="s">"Default_Region"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"initialSize"</span>
                              <span class="na">value=</span><span class="s">"#{20L * 1024 * 1024 * 1024}"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- 20GB --&gt;</span>
                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"maxSize"</span>
                              <span class="na">value=</span><span class="s">"#{50L * 1024 * 1024 * 1024}"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- 50GB --&gt;</span>
                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"pageEvictionMode"</span>
                              <span class="na">value=</span><span class="s">"RANDOM_2_LRU"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"metricsEnabled"</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/bean&gt;</span>
            <span class="nt">&lt;/property&gt;</span>

            <span class="c">&lt;!-- Custom regions configuration --&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"dataRegionConfigurations"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;list&gt;</span>
                    <span class="c">&lt;!-- Hot data region --&gt;</span>
                    <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.configuration.DataRegionConfiguration"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">value=</span><span class="s">"Hot_Region"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"initialSize"</span>
                                  <span class="na">value=</span><span class="s">"#{200L * 1024 * 1024 * 1024}"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- 200GB --&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"maxSize"</span>
                                  <span class="na">value=</span><span class="s">"#{400L * 1024 * 1024 * 1024}"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- 400GB --&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"pageEvictionMode"</span>
                                  <span class="na">value=</span><span class="s">"RANDOM_2_LRU"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"evictionThreshold"</span> <span class="na">value=</span><span class="s">"0.95"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"metricsEnabled"</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/bean&gt;</span>

                    <span class="c">&lt;!-- Index region --&gt;</span>
                    <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.configuration.DataRegionConfiguration"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">value=</span><span class="s">"Index_Region"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"initialSize"</span>
                                  <span class="na">value=</span><span class="s">"#{50L * 1024 * 1024 * 1024}"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- 50GB --&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"maxSize"</span>
                                  <span class="na">value=</span><span class="s">"#{100L * 1024 * 1024 * 1024}"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- 100GB --&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"persistenceEnabled"</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/bean&gt;</span>
                <span class="nt">&lt;/list&gt;</span>
            <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;/bean&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</code></pre></div></div> <h3 id="memory-manager-implementation">Memory Manager Implementation</h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomMemoryManager</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">IgniteCache</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">BinaryObject</span><span class="o">&gt;</span> <span class="n">cache</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">EvictionPolicy</span> <span class="n">evictionPolicy</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">MetricsRegistry</span> <span class="n">metricsRegistry</span><span class="o">;</span>

    <span class="c1">// Memory pressure handling</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleMemoryPressure</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">DataRegionMetrics</span> <span class="n">metrics</span> <span class="o">=</span> <span class="n">getRegionMetrics</span><span class="o">(</span><span class="s">"Hot_Region"</span><span class="o">);</span>
        <span class="kt">double</span> <span class="n">usagePercentage</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="na">getPagesFillFactor</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">usagePercentage</span> <span class="o">&gt;</span> <span class="mf">0.9</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// 90% threshold</span>
            <span class="n">triggerEviction</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// Custom eviction logic</span>
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">triggerEviction</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Get events older than 4 hours</span>
        <span class="kt">long</span> <span class="n">cutoffTime</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span>
            <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">HOURS</span><span class="o">.</span><span class="na">toMillis</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>

        <span class="nc">SqlQuery</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">BinaryObject</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SqlQuery</span><span class="o">&lt;&gt;(</span>
            <span class="nc">Event</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">"timestamp &lt; ? ORDER BY timestamp ASC LIMIT 10000"</span><span class="o">);</span>

        <span class="k">try</span> <span class="o">(</span><span class="nc">QueryCursor</span><span class="o">&lt;</span><span class="nc">Cache</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">BinaryObject</span><span class="o">&gt;&gt;</span> <span class="n">cursor</span> <span class="o">=</span>
                <span class="n">cache</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="n">query</span><span class="o">.</span><span class="na">setArgs</span><span class="o">(</span><span class="n">cutoffTime</span><span class="o">)))</span> <span class="o">{</span>

            <span class="k">for</span> <span class="o">(</span><span class="nc">Cache</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">BinaryObject</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">cursor</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// Move to warm storage</span>
                <span class="n">moveToWarmStorage</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
                <span class="c1">// Remove from hot storage</span>
                <span class="n">cache</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// Warm storage management</span>
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">moveToWarmStorage</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">,</span> <span class="nc">BinaryObject</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Compress if needed</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">compressed</span> <span class="o">=</span> <span class="n">compress</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
        <span class="c1">// Store in Cassandra</span>
        <span class="n">cassandraTemplate</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span>
            <span class="s">"INSERT INTO warm_storage (key, data) VALUES (?, ?)"</span><span class="o">,</span>
            <span class="n">key</span><span class="o">,</span> <span class="n">compressed</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h2 id="memory-optimization-techniques">Memory Optimization Techniques</h2> <h3 id="1-data-layout-optimization">1. Data Layout Optimization</h3> <h4 id="object-structure-design">Object Structure Design</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Before Optimization</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EventData</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">id</span><span class="o">;</span>                     <span class="c1">// 8 bytes reference</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">timestamp</span><span class="o">;</span>                <span class="c1">// 8 bytes</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">eventType</span><span class="o">;</span>              <span class="c1">// 8 bytes reference</span>
    <span class="kd">private</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">metadata</span><span class="o">;</span>  <span class="c1">// 8 bytes reference + overhead</span>
    <span class="kd">private</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">payload</span><span class="o">;</span>                <span class="c1">// 8 bytes reference + data</span>
<span class="o">}</span>

<span class="c1">// After Optimization</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OptimizedEventData</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">id</span><span class="o">;</span>          <span class="c1">// 8 bytes (converted from String)</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">timestamp</span><span class="o">;</span>   <span class="c1">// 8 bytes</span>
    <span class="kd">private</span> <span class="kt">byte</span> <span class="n">eventType</span><span class="o">;</span>   <span class="c1">// 1 byte (enum converted to byte)</span>
    <span class="kd">private</span> <span class="kt">short</span> <span class="n">metaCount</span><span class="o">;</span>  <span class="c1">// 2 bytes</span>
    <span class="kd">private</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">combined</span><span class="o">;</span>  <span class="c1">// metadata + payload combined</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="memory-alignment">Memory Alignment</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AlignedEventData</span> <span class="o">{</span>
    <span class="c1">// Fields arranged by size (descending) for optimal packing</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">timestamp</span><span class="o">;</span>      <span class="c1">// 8 bytes</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">id</span><span class="o">;</span>            <span class="c1">// 8 bytes</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">dataLength</span><span class="o">;</span>     <span class="c1">// 4 bytes</span>
    <span class="kd">private</span> <span class="kt">short</span> <span class="n">flags</span><span class="o">;</span>        <span class="c1">// 2 bytes</span>
    <span class="kd">private</span> <span class="kt">byte</span> <span class="n">eventType</span><span class="o">;</span>     <span class="c1">// 1 byte</span>
    <span class="kd">private</span> <span class="kt">byte</span> <span class="n">reserved</span><span class="o">;</span>      <span class="c1">// 1 byte (padding for 8-byte alignment)</span>
    <span class="kd">private</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span><span class="o">;</span>        <span class="c1">// aligned access</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="object-pooling-implementation">Object Pooling Implementation</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EventObjectPool</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Queue</span><span class="o">&lt;</span><span class="nc">EventData</span><span class="o">&gt;</span> <span class="n">pool</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">maxPoolSize</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">EventObjectPool</span><span class="o">(</span><span class="kt">int</span> <span class="n">maxSize</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">pool</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ConcurrentLinkedQueue</span><span class="o">&lt;&gt;();</span>
        <span class="k">this</span><span class="o">.</span><span class="na">maxPoolSize</span> <span class="o">=</span> <span class="n">maxSize</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="nc">EventData</span> <span class="nf">acquire</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">EventData</span> <span class="n">event</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">event</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EventData</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">event</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">release</span><span class="o">(</span><span class="nc">EventData</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">event</span><span class="o">.</span><span class="na">reset</span><span class="o">();</span> <span class="c1">// Clear sensitive data</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">pool</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">maxPoolSize</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">pool</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="2-access-pattern-optimization">2. Access Pattern Optimization</h3> <h4 id="numa-aware-allocation">NUMA-Aware Allocation</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NumaAwareAllocation</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">numaNodes</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ThreadLocal</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">nodeAffinity</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">allocateMemory</span><span class="o">(</span><span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">node</span> <span class="o">=</span> <span class="n">nodeAffinity</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
        <span class="c1">// Allocate memory on specific NUMA node</span>
        <span class="kt">long</span> <span class="n">address</span> <span class="o">=</span> <span class="n">unsafe</span><span class="o">.</span><span class="na">allocateMemory</span><span class="o">(</span><span class="n">size</span><span class="o">);</span>
        <span class="c1">// Bind memory to NUMA node</span>
        <span class="n">numaBindMemory</span><span class="o">(</span><span class="n">address</span><span class="o">,</span> <span class="n">size</span><span class="o">,</span> <span class="n">node</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">native</span> <span class="kt">void</span> <span class="nf">numaBindMemory</span><span class="o">(</span><span class="kt">long</span> <span class="n">address</span><span class="o">,</span> <span class="kt">int</span> <span class="n">size</span><span class="o">,</span> <span class="kt">int</span> <span class="n">node</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="thread-affinity">Thread Affinity</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadAffinityManager</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ConcurrentMap</span><span class="o">&lt;</span><span class="nc">Thread</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">threadToCore</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">availableCores</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setThreadAffinity</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Thread</span> <span class="n">currentThread</span> <span class="o">=</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">core</span> <span class="o">=</span> <span class="n">threadToCore</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currentThread</span><span class="o">);</span>

        <span class="c1">// Set processor affinity</span>
        <span class="n">setThreadAffinityMask</span><span class="o">(</span><span class="mi">1L</span> <span class="o">&lt;&lt;</span> <span class="n">core</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">native</span> <span class="kt">void</span> <span class="nf">setThreadAffinityMask</span><span class="o">(</span><span class="kt">long</span> <span class="n">mask</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="cache-line-optimization">Cache Line Optimization</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CacheLineAligned</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">CACHE_LINE</span> <span class="o">=</span> <span class="mi">64</span><span class="o">;</span> <span class="c1">// bytes</span>

    <span class="c1">// Prevent false sharing with padding</span>
    <span class="nd">@sun</span><span class="o">.</span><span class="na">misc</span><span class="o">.</span><span class="na">Contended</span>
    <span class="kd">private</span> <span class="kd">volatile</span> <span class="kt">long</span> <span class="n">counter</span><span class="o">;</span>

    <span class="c1">// Ensure cache line alignment</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">padding1</span><span class="o">,</span> <span class="n">padding2</span><span class="o">,</span> <span class="n">padding3</span><span class="o">,</span> <span class="n">padding4</span><span class="o">,</span>
                <span class="n">padding5</span><span class="o">,</span> <span class="n">padding6</span><span class="o">,</span> <span class="n">padding7</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="3-memory-access-patterns">3. Memory Access Patterns</h3> <h4 id="sequential-access">Sequential Access</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SequentialAccessBuffer</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ByteBuffer</span> <span class="n">buffer</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">blockSize</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">processData</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Sequential read is faster than random access</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">buffer</span><span class="o">.</span><span class="na">capacity</span><span class="o">();</span> <span class="n">i</span> <span class="o">+=</span> <span class="n">blockSize</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">buffer</span><span class="o">.</span><span class="na">position</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
            <span class="n">processBlock</span><span class="o">(</span><span class="n">buffer</span><span class="o">,</span> <span class="n">blockSize</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="batch-processing">Batch Processing</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BatchProcessor</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">BATCH_SIZE</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">processBatch</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Event</span><span class="o">&gt;</span> <span class="n">events</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Process events in batches to improve memory access patterns</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">events</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span> <span class="o">+=</span> <span class="no">BATCH_SIZE</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">end</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="no">BATCH_SIZE</span><span class="o">,</span> <span class="n">events</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
            <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Event</span><span class="o">&gt;</span> <span class="n">batch</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="na">subList</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">end</span><span class="o">);</span>
            <span class="n">processEventBatch</span><span class="o">(</span><span class="n">batch</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><br></p> <h2 id="eviction-strategies">Eviction Strategies</h2> <p><br></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/blog/memory-eviction-flow-480.webp 480w,/assets/img/blog/memory-eviction-flow-800.webp 800w,/assets/img/blog/memory-eviction-flow-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/blog/memory-eviction-flow.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p><br></p> <h3 id="1-time-based-eviction">1. Time-Based Eviction</h3> <h4 id="rolling-window-implementation">Rolling Window Implementation</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TimeBasedEviction</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Duration</span> <span class="n">windowSize</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">EvictionQueue</span><span class="o">&lt;</span><span class="nc">TimedEntry</span><span class="o">&gt;</span> <span class="n">queue</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">evictExpired</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">long</span> <span class="n">cutoff</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span> <span class="n">windowSize</span><span class="o">.</span><span class="na">toMillis</span><span class="o">();</span>

        <span class="k">while</span> <span class="o">(!</span><span class="n">queue</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">&amp;&amp;</span>
               <span class="n">queue</span><span class="o">.</span><span class="na">peek</span><span class="o">().</span><span class="na">getTimestamp</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">cutoff</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">TimedEntry</span> <span class="n">entry</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
            <span class="n">processEviction</span><span class="o">(</span><span class="n">entry</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">processEviction</span><span class="o">(</span><span class="nc">TimedEntry</span> <span class="n">entry</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Move to appropriate storage tier</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">isHot</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">moveToWarmStorage</span><span class="o">(</span><span class="n">entry</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">moveToColdStorage</span><span class="o">(</span><span class="n">entry</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="priority-based-time-eviction">Priority-Based Time Eviction</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PriorityTimeEviction</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">PriorityQueue</span><span class="o">&lt;</span><span class="nc">EventData</span><span class="o">&gt;</span> <span class="n">priorityQueue</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">customerTiers</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">evictWithPriority</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">long</span> <span class="n">currentTime</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">needsEviction</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">EventData</span> <span class="n">event</span> <span class="o">=</span> <span class="n">priorityQueue</span><span class="o">.</span><span class="na">peek</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">shouldEvict</span><span class="o">(</span><span class="n">event</span><span class="o">,</span> <span class="n">currentTime</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">event</span> <span class="o">=</span> <span class="n">priorityQueue</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
                <span class="n">evictEvent</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">shouldEvict</span><span class="o">(</span><span class="nc">EventData</span> <span class="n">event</span><span class="o">,</span> <span class="kt">long</span> <span class="n">currentTime</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">tier</span> <span class="o">=</span> <span class="n">customerTiers</span><span class="o">.</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">event</span><span class="o">.</span><span class="na">getCustomerId</span><span class="o">(),</span> <span class="mi">0</span><span class="o">);</span>
        <span class="kt">long</span> <span class="n">age</span> <span class="o">=</span> <span class="n">currentTime</span> <span class="o">-</span> <span class="n">event</span><span class="o">.</span><span class="na">getTimestamp</span><span class="o">();</span>

        <span class="c1">// Higher tier customers get longer retention</span>
        <span class="k">return</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="n">getRetentionPeriod</span><span class="o">(</span><span class="n">tier</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="2-size-based-eviction">2. Size-Based Eviction</h3> <h4 id="memory-threshold-management">Memory Threshold Management</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemoryThresholdEviction</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="no">WARNING_THRESHOLD</span> <span class="o">=</span> <span class="mf">0.80</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="no">CRITICAL_THRESHOLD</span> <span class="o">=</span> <span class="mf">0.90</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">MemoryUsageMonitor</span> <span class="n">monitor</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">EvictionPolicy</span> <span class="n">policy</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">checkAndEvict</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">double</span> <span class="n">usage</span> <span class="o">=</span> <span class="n">monitor</span><span class="o">.</span><span class="na">getCurrentUsage</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">usage</span> <span class="o">&gt;=</span> <span class="no">CRITICAL_THRESHOLD</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// Aggressive eviction</span>
            <span class="n">policy</span><span class="o">.</span><span class="na">criticalEviction</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">usage</span> <span class="o">&gt;=</span> <span class="no">WARNING_THRESHOLD</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// Normal eviction</span>
            <span class="n">policy</span><span class="o">.</span><span class="na">normalEviction</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="back-pressure-implementation">Back-pressure Implementation</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BackPressureManager</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">AtomicDouble</span> <span class="n">memoryUsage</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">BlockingQueue</span><span class="o">&lt;</span><span class="nc">Event</span><span class="o">&gt;</span> <span class="n">inputQueue</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyBackPressure</span><span class="o">(</span><span class="nc">Event</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">double</span> <span class="n">usage</span> <span class="o">=</span> <span class="n">memoryUsage</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>

        <span class="k">if</span> <span class="o">(</span><span class="n">usage</span> <span class="o">&gt;</span> <span class="mf">0.95</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// Reject new events</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">MemoryPressureException</span><span class="o">(</span><span class="s">"Memory full"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">usage</span> <span class="o">&gt;</span> <span class="mf">0.85</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// Add with timeout</span>
            <span class="kt">boolean</span> <span class="n">added</span> <span class="o">=</span> <span class="n">inputQueue</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="n">event</span><span class="o">,</span>
                <span class="mi">100</span><span class="o">,</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(!</span><span class="n">added</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">handleRejection</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="c1">// Normal processing</span>
            <span class="n">inputQueue</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="batch-eviction-control">Batch Eviction Control</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BatchEvictionController</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">MAX_BATCH_SIZE</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">EvictionQueue</span> <span class="n">queue</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">evictBatch</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">QueueEntry</span><span class="o">&gt;</span> <span class="n">batch</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="kt">int</span> <span class="n">currentSize</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

        <span class="k">while</span> <span class="o">(</span><span class="n">currentSize</span> <span class="o">&lt;</span> <span class="no">MAX_BATCH_SIZE</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">queue</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">QueueEntry</span> <span class="n">entry</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
            <span class="n">batch</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">entry</span><span class="o">);</span>
            <span class="n">currentSize</span> <span class="o">+=</span> <span class="n">entry</span><span class="o">.</span><span class="na">getSize</span><span class="o">();</span>
        <span class="o">}</span>

        <span class="k">if</span> <span class="o">(!</span><span class="n">batch</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">processBatchEviction</span><span class="o">(</span><span class="n">batch</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h2 id="monitoring-and-alerting">Monitoring and Alerting</h2> <h3 id="memory-metrics">Memory Metrics</h3> <ol> <li> <p><strong>Usage Metrics</strong></p> <ul> <li>Region utilization</li> <li>Page allocation rates</li> <li>Eviction statistics</li> <li>GC performance</li> </ul> </li> <li> <p><strong>Performance Metrics</strong></p> <ul> <li>Access latencies</li> <li>Hit/miss ratios</li> <li>Throughput rates</li> <li>Queue depths</li> </ul> </li> </ol> <h3 id="alert-thresholds">Alert Thresholds</h3> <ol> <li> <p><strong>Critical Alerts</strong></p> <ul> <li>Memory usage &gt; 90%</li> <li>GC pause &gt; 500ms</li> <li>Eviction rate spike</li> <li>Error rate increase</li> </ul> </li> <li> <p><strong>Warning Alerts</strong></p> <ul> <li>Memory usage &gt; 80%</li> <li>GC pause &gt; 200ms</li> <li>Queue depth increase</li> <li>Throughput drop</li> </ul> </li> </ol> <h2 id="performance-results">Performance Results</h2> <h3 id="latency-profile">Latency Profile</h3> <ul> <li>Read operations: &lt; 1ms (p99)</li> <li>Write operations: &lt; 2ms (p99)</li> <li>Query operations: &lt; 10ms (p99)</li> <li>Scan operations: &lt; 100ms (p99)</li> </ul> <h3 id="throughput-achievements">Throughput Achievements</h3> <ul> <li>Event processing: 2.5M/second</li> <li>Query processing: 100K/second</li> <li>Scan processing: 10K/second</li> <li>Background operations: 1K/second</li> </ul> <h2 id="lessons-learned">Lessons Learned</h2> <h3 id="1-memory-architecture-design">1. Memory Architecture Design</h3> <h4 id="initial-planning">Initial Planning</h4> <ul> <li> <strong>Start Conservative</strong>: Begin with smaller memory regions and scale up based on actual usage patterns</li> <li> <strong>Measure Everything</strong>: Implement comprehensive memory monitoring before going live</li> <li> <strong>Plan for Growth</strong>: Design memory regions with at least 50% headroom for unexpected spikes</li> <li> <strong>Document Assumptions</strong>: Keep track of all memory sizing assumptions and validate them regularly</li> </ul> <h4 id="real-world-insights">Real-world Insights</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Example of what not to do</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PoorMemoryPlanning</span> <span class="o">{</span>
    <span class="c1">// Don't hardcode memory sizes</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="no">MEMORY_SIZE</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="o">;</span> <span class="c1">// 100MB fixed</span>

    <span class="c1">// Don't assume fixed event sizes</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">EVENT_SIZE</span> <span class="o">=</span> <span class="mi">1024</span><span class="o">;</span> <span class="c1">// 1KB per event</span>
<span class="o">}</span>

<span class="c1">// Better approach</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AdaptiveMemoryPlanning</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ConfigurationManager</span> <span class="n">config</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">calculateMemorySize</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Base size from configuration</span>
        <span class="kt">long</span> <span class="n">baseSize</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="na">getBaseMemorySize</span><span class="o">();</span>

        <span class="c1">// Growth factor based on historical data</span>
        <span class="kt">double</span> <span class="n">growthFactor</span> <span class="o">=</span> <span class="n">getHistoricalGrowthFactor</span><span class="o">();</span>

        <span class="c1">// Add safety margin</span>
        <span class="k">return</span> <span class="o">(</span><span class="kt">long</span><span class="o">)(</span><span class="n">baseSize</span> <span class="o">*</span> <span class="n">growthFactor</span> <span class="o">*</span> <span class="mf">1.5</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="2-performance-optimization">2. Performance Optimization</h3> <h4 id="memory-access-patterns">Memory Access Patterns</h4> <ul> <li> <strong>Profile First</strong>: Always profile before optimizing</li> <li> <strong>Batch Operations</strong>: Batch similar operations for better cache utilization</li> <li> <strong>Avoid Premature Optimization</strong>: Start with simple, maintainable code and optimize based on data</li> <li> <strong>Test at Scale</strong>: Performance characteristics change dramatically at scale</li> </ul> <h4 id="implementation-experience">Implementation Experience</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Common performance pitfall</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">IneffientProcessing</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">processEvents</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Event</span><span class="o">&gt;</span> <span class="n">events</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Don't process one at a time</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Event</span> <span class="n">event</span> <span class="o">:</span> <span class="n">events</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">processEvent</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
            <span class="n">saveToDatabase</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
            <span class="n">updateMetrics</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Optimized approach</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BatchProcessing</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">BATCH_SIZE</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">processEvents</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Event</span><span class="o">&gt;</span> <span class="n">events</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Process in batches</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Event</span><span class="o">&gt;</span> <span class="n">batch</span> <span class="o">:</span> <span class="nc">Lists</span><span class="o">.</span><span class="na">partition</span><span class="o">(</span><span class="n">events</span><span class="o">,</span> <span class="no">BATCH_SIZE</span><span class="o">))</span> <span class="o">{</span>
            <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Event</span><span class="o">&gt;</span> <span class="n">processed</span> <span class="o">=</span> <span class="n">processEventBatch</span><span class="o">(</span><span class="n">batch</span><span class="o">);</span>
            <span class="n">saveBatchToDatabase</span><span class="o">(</span><span class="n">processed</span><span class="o">);</span>
            <span class="n">updateMetricsBatch</span><span class="o">(</span><span class="n">processed</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="3-operational-management">3. Operational Management</h3> <h4 id="monitoring-and-alerting-1">Monitoring and Alerting</h4> <ul> <li> <strong>Define Clear Thresholds</strong>: Establish clear memory thresholds for different alert levels</li> <li> <strong>Implement Trending</strong>: Track memory usage patterns over time</li> <li> <strong>Set Up Early Warnings</strong>: Alert before reaching critical levels</li> <li> <strong>Keep Historical Data</strong>: Maintain historical memory usage data for capacity planning</li> </ul> <h4 id="monitoring-implementation">Monitoring Implementation</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemoryMonitoring</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="no">WARNING_THRESHOLD</span> <span class="o">=</span> <span class="mf">0.75</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="no">CRITICAL_THRESHOLD</span> <span class="o">=</span> <span class="mf">0.90</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">monitorMemory</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Track multiple metrics</span>
        <span class="n">recordMemoryMetrics</span><span class="o">(</span>
            <span class="n">getHeapUsage</span><span class="o">(),</span>
            <span class="n">getOffHeapUsage</span><span class="o">(),</span>
            <span class="n">getGCMetrics</span><span class="o">(),</span>
            <span class="n">getEvictionRates</span><span class="o">()</span>
        <span class="o">);</span>

        <span class="c1">// Monitor trends</span>
        <span class="n">analyzeTrends</span><span class="o">();</span>

        <span class="c1">// Predict capacity needs</span>
        <span class="n">predictCapacityNeeds</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">analyzeTrends</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Look at last 24 hours</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">MemoryMetric</span><span class="o">&gt;</span> <span class="n">recent</span> <span class="o">=</span> <span class="n">getRecentMetrics</span><span class="o">(</span><span class="nc">Duration</span><span class="o">.</span><span class="na">ofHours</span><span class="o">(</span><span class="mi">24</span><span class="o">));</span>

        <span class="c1">// Calculate growth rate</span>
        <span class="kt">double</span> <span class="n">growthRate</span> <span class="o">=</span> <span class="n">calculateGrowthRate</span><span class="o">(</span><span class="n">recent</span><span class="o">);</span>

        <span class="c1">// Predict when we'll hit thresholds</span>
        <span class="n">predictThresholdBreach</span><span class="o">(</span><span class="n">growthRate</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="4-team-and-process">4. Team and Process</h3> <h4 id="knowledge-sharing">Knowledge Sharing</h4> <ul> <li> <strong>Document Everything</strong>: Maintain detailed documentation of memory-related decisions</li> <li> <strong>Regular Reviews</strong>: Conduct regular reviews of memory usage patterns</li> <li> <strong>Share Insights</strong>: Create knowledge sharing sessions for the team</li> <li> <strong>Update Runbooks</strong>: Keep operational runbooks updated with learned lessons</li> </ul> <h4 id="process-implementation">Process Implementation</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OperationalRunbook</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleMemoryPressure</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Clear documentation of steps</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Action</span><span class="o">&gt;</span> <span class="n">actions</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span>
            <span class="k">new</span> <span class="nf">Action</span><span class="o">(</span><span class="s">"Check memory metrics"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">Action</span><span class="o">(</span><span class="s">"Analyze GC logs"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">Action</span><span class="o">(</span><span class="s">"Review recent changes"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">Action</span><span class="o">(</span><span class="s">"Check eviction rates"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">Action</span><span class="o">(</span><span class="s">"Verify backup systems"</span><span class="o">)</span>
        <span class="o">);</span>

        <span class="c1">// Execute and document each step</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Action</span> <span class="n">action</span> <span class="o">:</span> <span class="n">actions</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">executeAndDocument</span><span class="o">(</span><span class="n">action</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="5-capacity-planning">5. Capacity Planning</h3> <h4 id="resource-management">Resource Management</h4> <ul> <li> <strong>Regular Review</strong>: Review memory usage patterns monthly</li> <li> <strong>Predictive Planning</strong>: Use trending data for capacity planning</li> <li> <strong>Cost Analysis</strong>: Balance memory usage with cost implications</li> <li> <strong>Growth Planning</strong>: Plan for both expected and unexpected growth</li> </ul> <h4 id="planning-implementation">Planning Implementation</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CapacityPlanner</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">CapacityPlan</span> <span class="nf">createPlan</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">CapacityPlan</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
            <span class="o">.</span><span class="na">currentUsage</span><span class="o">(</span><span class="n">getCurrentUsage</span><span class="o">())</span>
            <span class="o">.</span><span class="na">growthRate</span><span class="o">(</span><span class="n">calculateGrowthRate</span><span class="o">())</span>
            <span class="o">.</span><span class="na">seasonalFactors</span><span class="o">(</span><span class="n">getSeasonalPatterns</span><span class="o">())</span>
            <span class="o">.</span><span class="na">costImplications</span><span class="o">(</span><span class="n">analyzeCosts</span><span class="o">())</span>
            <span class="o">.</span><span class="na">recommendedActions</span><span class="o">(</span><span class="n">generateRecommendations</span><span class="o">())</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Recommendation</span><span class="o">&gt;</span> <span class="nf">generateRecommendations</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Recommendation</span><span class="o">&gt;</span> <span class="n">recommendations</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>

        <span class="c1">// Memory sizing recommendations</span>
        <span class="n">recommendations</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">analyzeMemorySizing</span><span class="o">());</span>

        <span class="c1">// Cost optimization recommendations</span>
        <span class="n">recommendations</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">analyzeCostOptimizations</span><span class="o">());</span>

        <span class="c1">// Performance improvement recommendations</span>
        <span class="n">recommendations</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">analyzePerformance</span><span class="o">());</span>

        <span class="k">return</span> <span class="n">recommendations</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="6-technical-debt-management">6. Technical Debt Management</h3> <h4 id="code-evolution">Code Evolution</h4> <ul> <li> <strong>Maintain Clean Code</strong>: Technical debt compounds quickly in memory management</li> <li> <strong>Regular Refactoring</strong>: Schedule regular refactoring sessions</li> <li> <strong>Performance Tests</strong>: Maintain comprehensive performance test suites</li> <li> <strong>Configuration Management</strong>: Keep configurations well-documented and versioned</li> </ul> <h4 id="technical-debt-tracking">Technical Debt Tracking</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TechnicalDebtTracker</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">trackMemoryIssues</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Track known issues</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">TechnicalDebt</span><span class="o">&gt;</span> <span class="n">issues</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span>
            <span class="k">new</span> <span class="nf">TechnicalDebt</span><span class="o">(</span><span class="s">"Manual memory management in legacy code"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">TechnicalDebt</span><span class="o">(</span><span class="s">"Outdated eviction policies"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">TechnicalDebt</span><span class="o">(</span><span class="s">"Unoptimized object creation"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">TechnicalDebt</span><span class="o">(</span><span class="s">"Missing memory metrics"</span><span class="o">)</span>
        <span class="o">);</span>

        <span class="c1">// Prioritize and plan resolution</span>
        <span class="n">prioritizeIssues</span><span class="o">(</span><span class="n">issues</span><span class="o">);</span>
        <span class="n">createResolutionPlan</span><span class="o">(</span><span class="n">issues</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="7-future-considerations">7. Future Considerations</h3> <h4 id="scalability-planning">Scalability Planning</h4> <ul> <li> <strong>Architecture Reviews</strong>: Regular reviews of memory architecture</li> <li> <strong>Technology Updates</strong>: Keep track of new memory management features</li> <li> <strong>Performance Improvements</strong>: Continuous performance optimization</li> <li> <strong>Cost Optimization</strong>: Regular review of memory costs and benefits</li> </ul> <h4 id="innovation-planning">Innovation Planning</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FuturePlanning</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">planImprovements</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Track potential improvements</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Improvement</span><span class="o">&gt;</span> <span class="n">improvements</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span>
            <span class="k">new</span> <span class="nf">Improvement</span><span class="o">(</span><span class="s">"Implement new GC algorithms"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">Improvement</span><span class="o">(</span><span class="s">"Adopt newer memory management APIs"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">Improvement</span><span class="o">(</span><span class="s">"Implement machine learning for prediction"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">Improvement</span><span class="o">(</span><span class="s">"Automate capacity planning"</span><span class="o">)</span>
        <span class="o">);</span>

        <span class="c1">// Evaluate and prioritize</span>
        <span class="n">evaluateImprovements</span><span class="o">(</span><span class="n">improvements</span><span class="o">);</span>
        <span class="n">createImplementationPlan</span><span class="o">(</span><span class="n">improvements</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>These lessons learned have been critical in maintaining and improving our memory management system. They continue to guide our decisions and help us avoid common pitfalls in high-scale data processing systems.</p> <h2 id="looking-ahead">Looking Ahead</h2> <p>In <a href="https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p4/">Part 4</a>, we’ll explore how we optimized our Kafka infrastructure to handle the massive throughput requirements while ensuring reliable message delivery and processing.</p> <p>Stay tuned to learn about our Kafka cluster design, configuration tuning, and operational practices.</p> </div> </article> <div class="citation-section"> <div class="citation-header"> <h3>Citation</h3> <p class="citation-intro">If you found this article useful, please cite it using one of the formats below:</p> </div> <div class="citation-content"> <div class="citation-format"> <h4>APA Format</h4> <div class="citation-text"> <p>Mitra, Subhadip. (2022, November). <em>Part 3 - Building a Massive-Scale Real-Time Data Platform - Memory Management with Apache Ignite</em>. Retrieved from https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/</p> </div> </div> <div class="citation-format"> <h4>BibTeX Entry</h4> <div class="language-bibtex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@article</span><span class="p">{</span><span class="nl">mitra2022part-3-building-a-massive-scale-real-time-data-platform-memory-management-with-apache-ignite</span><span class="p">,</span>
  <span class="na">title</span>   <span class="p">=</span> <span class="s">{Part 3 - Building a Massive-Scale Real-Time Data Platform - Memory Management with Apache Ignite}</span><span class="p">,</span>
  <span class="na">author</span>  <span class="p">=</span> <span class="s">{Mitra, Subhadip}</span><span class="p">,</span>
  <span class="na">year</span>    <span class="p">=</span> <span class="s">{2022}</span><span class="p">,</span>
  <span class="na">month</span>   <span class="p">=</span> <span class="s">{Nov}</span><span class="p">,</span>
  <span class="na">url</span>     <span class="p">=</span> <span class="s">{https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/}</span>
<span class="p">}</span>
</code></pre></div></div> </div> </div> </div> <style>.post-footer-featured{margin-top:6rem;padding-top:0}.newsletter-featured{background:var(--global-card-bg-color,#fff);border:2px solid var(--global-theme-color,#b509ac);border-radius:24px;padding:3rem;margin-bottom:3rem}.showcase-label-newsletter{display:inline-flex;align-items:center;gap:.5rem;font-size:.875rem;letter-spacing:.15em;text-transform:uppercase;color:var(--global-theme-color,#b509ac);font-weight:700;margin-bottom:1rem}.newsletter-featured h2{font-size:2rem;font-weight:900;margin:0 0 1rem 0;letter-spacing:-0.02em;line-height:1.1;color:var(--global-text-color,#000)}.newsletter-featured p{font-size:1.125rem;color:var(--global-text-color-light,#666);margin-bottom:1.5rem;line-height:1.6}.newsletter-form-featured{display:flex;gap:.75rem;margin-bottom:1rem}.newsletter-form-featured input{flex:1;padding:.875rem 1.25rem;background:var(--global-bg-color,#fff);color:var(--global-text-color,#000);border:1px solid var(--global-divider-color,#e5e5e5);border-radius:12px;font-size:1rem;transition:all .3s}.newsletter-form-featured input:focus{outline:0;border-color:var(--global-theme-color,#b509ac);box-shadow:0 0 0 3px rgba(181,9,172,0.1)}.newsletter-form-featured button{padding:.875rem 2rem;background:var(--global-theme-color,#b509ac);color:white;border:0;border-radius:12px;font-weight:700;font-size:1rem;cursor:pointer;transition:all .3s;white-space:nowrap}.newsletter-form-featured button:hover{transform:translateY(-4px);box-shadow:0 12px 40px rgba(181,9,172,0.3)}.newsletter-links{display:flex;gap:1rem;flex-wrap:wrap;align-items:center;font-size:.875rem;color:var(--global-text-color-light,#666)}.newsletter-links a{color:var(--global-theme-color,#b509ac);text-decoration:none;font-weight:600;transition:opacity .3s}.newsletter-links a:hover{opacity:.7}.share-section-featured{text-align:center;padding:2rem 0 3rem 0;border-bottom:1px solid var(--global-divider-color,#e5e5e5)}.share-section-featured .share-label{font-size:.875rem;text-transform:uppercase;letter-spacing:.1em;color:var(--global-text-color-light,#666);font-weight:600;margin-bottom:1.25rem}.share-buttons-featured{display:flex;gap:1rem;justify-content:center;align-items:center}.share-link-featured{display:inline-flex;align-items:center;gap:.5rem;font-weight:600;color:var(--global-text-color,#000);text-decoration:none;font-size:.875rem;padding:.5rem 1rem;background:var(--global-code-bg-color,#f8f9fa);border:1px solid var(--global-divider-color,#e5e5e5);border-radius:8px;transition:all .2s ease;white-space:nowrap;cursor:pointer}.share-link-featured:hover{background:var(--global-theme-color,#b509ac);border-color:var(--global-theme-color,#b509ac);color:white;transform:translateY(-2px)}.share-link-featured:hover svg{fill:white}.share-link-featured svg{width:16px;height:16px;flex-shrink:0;transition:fill .2s ease}.related-posts-section{margin-top:3rem;padding-top:0}.related-posts-section h3{font-size:1.75rem;font-weight:800;margin-bottom:2rem;color:var(--global-text-color,#000);text-align:center}@media(max-width:768px){.newsletter-featured{padding:2rem}.newsletter-featured h2{font-size:1.5rem}.newsletter-form-featured{flex-direction:column}.share-buttons-featured{flex-wrap:wrap;gap:.5rem}}</style> <div class="post-footer-featured"> <div class="newsletter-featured"> <div class="showcase-label-newsletter"> <svg width="16" height="16" viewbox="0 0 24 24" fill="currentColor"> <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path> </svg> Strategic Insights </div> <h2>Get More Like This</h2> <p> Join technical leaders from Google, Amazon, and Fortune 500s. Get strategic insights on Data, AI, and Cloud transformation delivered to your inbox. </p> <form class="newsletter-form-featured" action="https://app.loops.so/api/newsletter-form/cm614n2d604nlfy1lfo7vgmo5" method="POST"> <input type="email" name="email" placeholder="your@email.com" required> <button type="submit">Subscribe</button> </form> <div class="newsletter-links"> <span>Free insights • No spam • Unsubscribe anytime</span> <span>•</span> <a href="/archive/">Browse the archive →</a> </div> </div> <div class="share-section-featured"> <div class="share-label">Share This Article</div> <div class="share-buttons-featured"> <a href="https://twitter.com/intent/tweet?text=Part%203%20-%20Building%20a%20Massive-Scale%20Real-Time%20Data%20Platform%20-%20Memory%20Management%20with%20Apache%20Ignite&amp;url=https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/&amp;via=bassrehab" class="share-link-featured" target="_blank" rel="noopener noreferrer" title="Share on X"> <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M13.6823 10.6218L20.2391 3H18.6854L12.9921 9.61788L8.44486 3H3.2002L10.0765 13.0074L3.2002 21H4.75404L10.7663 14.0113L15.5685 21H20.8131L13.6819 10.6218H13.6823ZM11.5541 13.0956L10.8574 12.0991L5.31391 4.16971H7.70053L12.1742 10.5689L12.8709 11.5655L18.6861 19.8835H16.2995L11.5541 13.096V13.0956Z"></path> </svg> <span>X</span> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/" class="share-link-featured" target="_blank" rel="noopener noreferrer" title="Share on LinkedIn"> <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path> </svg> <span>LinkedIn</span> </a> <a href="https://www.reddit.com/submit?url=https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/&amp;title=Part%203%20-%20Building%20a%20Massive-Scale%20Real-Time%20Data%20Platform%20-%20Memory%20Management%20with%20Apache%20Ignite" class="share-link-featured" target="_blank" rel="noopener noreferrer" title="Share on Reddit"> <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"></path> </svg> <span>Reddit</span> </a> <a href="https://news.ycombinator.com/submitlink?u=https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/&amp;t=Part%203%20-%20Building%20a%20Massive-Scale%20Real-Time%20Data%20Platform%20-%20Memory%20Management%20with%20Apache%20Ignite" class="share-link-featured" target="_blank" rel="noopener noreferrer" title="Share on Hacker News"> <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M0 0v24h24V0H0zm12.3 12.6l-3.6-7.2H10l2.4 5.1 2.4-5.1h1.3l-3.6 7.2v4.8h-1.2v-4.8z"></path> </svg> <span>HN</span> </a> <a href="mailto:?subject=Part%203%20-%20Building%20a%20Massive-Scale%20Real-Time%20Data%20Platform%20-%20Memory%20Management%20with%20Apache%20Ignite&amp;body=Check%20out%20this%20article:%20https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/" class="share-link-featured" title="Share via Email"> <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path> </svg> <span>Email</span> </a> <button onclick="copyLinkFeatured('https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/')" class="share-link-featured" title="Copy link to clipboard"> <svg class="copy-icon" viewbox="0 0 24 24" fill="currentColor"> <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path> </svg> <svg class="check-icon" style="display: none;" viewbox="0 0 24 24" fill="currentColor"> <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path> </svg> <span class="copy-text">Copy</span> <span class="copied-text" style="display: none;">Copied!</span> </button> </div> </div> <div class="related-posts-section"> <h3>Continue Reading</h3> </div> </div> <script>
function copyLinkFeatured(url) {
  navigator.clipboard.writeText(url).then(() => {
    const btn = event.target.closest('button');
    const copyText = btn.querySelector('.copy-text');
    const copiedText = btn.querySelector('.copied-text');
    const copyIcon = btn.querySelector('.copy-icon');
    const checkIcon = btn.querySelector('.check-icon');

    copyText.style.display = 'none';
    copiedText.style.display = 'inline';
    copyIcon.style.display = 'none';
    checkIcon.style.display = 'inline';

    setTimeout(() => {
      copyText.style.display = 'inline';
      copiedText.style.display = 'none';
      copyIcon.style.display = 'inline';
      checkIcon.style.display = 'none';
    }, 2000);
  }).catch(err => {
    console.error('Failed to copy:', err);
    alert('Could not copy link. Please copy manually: ' + url);
  });
}

// Newsletter form handler
(function() {
  const form = document.querySelector('.newsletter-form-featured');
  if (!form) return;

  form.addEventListener('submit', function(event) {
    event.preventDefault();

    const emailInput = form.querySelector('input[name="email"]');
    const submitBtn = form.querySelector('button[type="submit"]');
    const email = emailInput.value;

    // Disable submit button and show loading state
    submitBtn.disabled = true;
    const originalText = submitBtn.textContent;
    submitBtn.textContent = 'Subscribing...';

    // Submit to Loops.so
    const formBody = 'userGroup=&email=' + encodeURIComponent(email);
    fetch(form.action, {
      method: 'POST',
      body: formBody,
      headers: {
        'Content-Type': 'application/x-www-form-urlencoded',
      },
    })
    .then(res => res.json().then(data => ({ ok: res.ok, data })))
    .then(({ ok, data }) => {
      if (ok) {
        // Success - show confirmation message
        submitBtn.textContent = '✓ Subscribed!';
        submitBtn.style.background = '#22c55e';
        emailInput.value = '';

        // Reset after 3 seconds
        setTimeout(() => {
          submitBtn.textContent = originalText;
          submitBtn.style.background = '';
          submitBtn.disabled = false;
        }, 3000);
      } else {
        // Error from API
        throw new Error(data.message || 'Subscription failed');
      }
    })
    .catch(error => {
      // Show error
      submitBtn.textContent = '✗ Failed';
      submitBtn.style.background = '#ef4444';
      console.error('Newsletter subscription error:', error);

      // Reset after 3 seconds
      setTimeout(() => {
        submitBtn.textContent = originalText;
        submitBtn.style.background = '';
        submitBtn.disabled = false;
      }, 3000);
    });
  });
})();
</script> <style>.related-posts-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}.related-post-card{background:var(--global-card-bg-color,#fff);border:1px solid var(--global-divider-color,#e5e5e5);border-radius:16px;padding:2rem;transition:all .3s cubic-bezier(0.4,0,0.2,1);position:relative;display:flex;flex-direction:column}.related-post-card:hover{transform:translateY(-4px);box-shadow:0 12px 32px rgba(0,0,0,0.1);border-color:var(--global-theme-color,#b509ac)}.related-post-title{font-size:1.25rem;font-weight:700;line-height:1.3;margin:0 0 .75rem 0;color:var(--global-text-color,#000)}.related-post-title a{color:inherit;text-decoration:none;transition:color .3s}.related-post-title a:hover{color:var(--global-theme-color,#b509ac)}.related-post-meta{font-size:.875rem;color:var(--global-text-color-light,#666);margin-bottom:.75rem}.related-post-excerpt{font-size:.95rem;line-height:1.6;color:var(--global-text-color-light,#666);margin-bottom:1rem;flex-grow:1}.related-post-link{display:inline-flex;align-items:center;gap:.5rem;font-weight:700;color:var(--global-theme-color,#b509ac);text-decoration:none;font-size:.95rem;transition:gap .3s;margin-top:auto}.related-post-link:hover{gap:1rem}.related-post-link svg{width:16px;height:16px;transition:transform .3s}.related-post-link:hover svg{transform:translateX(4px)}.external-link-icon{width:14px;height:14px;opacity:.6;margin-left:.25rem}.no-related-posts{text-align:center;padding:3rem;color:var(--global-text-color-light,#666);font-style:italic}@media(max-width:768px){.related-posts-grid{grid-template-columns:1fr;gap:1rem}.related-post-card{padding:1.5rem}.related-post-title{font-size:1.125rem}}</style> <div class="related-posts-container"> <div class="related-posts-grid"> <article class="related-post-card"> <h4 class="related-post-title"> <a href="/blog/2025/steering-vectors-agents/">Why Steering Vectors Beat Prompting (And When They Don't)</a> </h4> <div class="related-post-meta"> December 18, 2025 • machine-learning </div> <p class="related-post-excerpt">I tested activation steering on 4 agent behaviors across 3 models. The results surprised me.</p> <a href="/blog/2025/steering-vectors-agents/" class="related-post-link"> Read More <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M13.025 1l-2.847 2.828 6.176 6.176h-16.354v3.992h16.354l-6.176 6.176 2.847 2.828 10.975-11z"></path> </svg> </a> </article> <article class="related-post-card"> <h4 class="related-post-title"> <a href="/blog/2025/building-spark-llm-eval/">Why I Built a Spark-Native LLM Evaluation Framework (And What I Learned)</a> </h4> <div class="related-post-meta"> December 15, 2025 • llm-evaluation </div> <p class="related-post-excerpt">A deep dive into building distributed LLM evaluation infrastructure that actually scales - architectural decisions, trade-offs, and lessons learned.</p> <a href="/blog/2025/building-spark-llm-eval/" class="related-post-link"> Read More <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M13.025 1l-2.847 2.828 6.176 6.176h-16.354v3.992h16.354l-6.176 6.176 2.847 2.828 10.975-11z"></path> </svg> </a> </article> <article class="related-post-card"> <h4 class="related-post-title"> <a href="/blog/2025/mcp-maturity-model/">The MCP Maturity Model: Evaluating Your Multi-Agent Context Strategy</a> </h4> <div class="related-post-meta"> November 19, 2025 • MCP </div> <p class="related-post-excerpt">A practical framework for evaluating your multi-agent context management strategy. From ad-hoc string concatenation to self-evolving context systems - where does your architecture stand?</p> <a href="/blog/2025/mcp-maturity-model/" class="related-post-link"> Read More <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M13.025 1l-2.847 2.828 6.176 6.176h-16.354v3.992h16.354l-6.176 6.176 2.847 2.828 10.975-11z"></path> </svg> </a> </article> <article class="related-post-card"> <h4 class="related-post-title"> <a href="/blog/2025/upir-distributed-systems/">UPIR: What If Distributed Systems Could Write (and Verify) Themselves?</a> </h4> <div class="related-post-meta"> November 15, 2025 • distributed-systems </div> <p class="related-post-excerpt">Lessons from building a framework that automatically generates verified distributed systems - and why I think formal methods, synthesis, and ML need to work together...</p> <a href="/blog/2025/upir-distributed-systems/" class="related-post-link"> Read More <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M13.025 1l-2.847 2.828 6.176 6.176h-16.354v3.992h16.354l-6.176 6.176 2.847 2.828 10.975-11z"></path> </svg> </a> </article> </div> </div> <br> <br> <div class="hyvor-talk-container"> <style>.hyvor-talk-container{margin-top:4rem;padding-top:3rem;border-top:2px solid var(--global-divider-color,#e5e5e5)}.hyvor-talk-header{margin-bottom:2rem;text-align:center}.hyvor-talk-header h3{font-size:1.75rem;font-weight:800;margin-bottom:.5rem;color:var(--global-text-color,#000)}.hyvor-talk-header p{font-size:1rem;color:var(--global-text-color-light,#666);margin:0}</style> <div class="hyvor-talk-header"> <h3>Join the Discussion</h3> <p>Share your thoughts, ask questions, or provide feedback on this article</p> </div> <div id="hyvor-talk-view"></div> <script type="application/javascript">
    var HYVOR_TALK_WEBSITE = 14339;
    var HYVOR_TALK_CONFIG = {
      url: 'https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/',
      id: '/blog/2022/building-a-massive-scale-real-time-data-platform-p3/',
      
      title: 'Part 3 - Building a Massive-Scale Real-Time Data Platform - Memory Management with Apache Ignite',
      
      
      palette: {
        accent: '#b509ac',
        accentText: '#ffffff',
        footerHeader: 'var(--global-text-color)',
        footerHeaderText: 'var(--global-text-color-light)',
        box: 'var(--global-card-bg-color)',
        boxText: 'var(--global-text-color)',
        boxLightText: 'var(--global-text-color-light)',
        backgroundText: 'var(--global-text-color)'
      }
      
    };
  </script> <script async type="application/javascript" src="//talk.hyvor.com/web-api/embed.js"></script> </div> </div> </div> </div> </div> <footer class="modern-footer" role="contentinfo"> <div class="footer-container"> <div class="footer-grid"> <div class="footer-brand"> <h3>Subhadip Mitra</h3> <p> Technical Leader, Inventor, and Researcher building the future of Data &amp; Applied AI. <br>Leading Google Cloud's D&amp;A practice across Southeast Asia. </p> <br> <p><a href="mailto:contact@subhadipmitra.com">contact@subhadipmitra.com</a></p> </div> <div class="footer-section"> <h4>Explore</h4> <ul class="footer-links"> <li><a href="/">About</a></li> <li><a href="/now/">What I'm Doing Now</a></li> <li><a href="/blog/">Blog</a></li> <li><a href="/publications/">Publications</a></li> <li><a href="/repositories/">Repositories</a></li> </ul> </div> <div class="footer-section"> <h4>Connect</h4> <ul class="footer-links"> <li><a href="mailto:contact@subhadipmitra.com">Email</a></li> <li><a href="https://calendly.com/contact-x9nm/30min" target="_blank" rel="external nofollow noopener">Schedule a Call</a></li> <li><a href="https://linkedin.com/in/subhadip-mitra" target="_blank" rel="external nofollow noopener">LinkedIn</a></li> <li><a href="https://github.com/bassrehab" target="_blank" rel="external nofollow noopener">GitHub</a></li> </ul> </div> </div> <div class="footer-bottom"> <div class="footer-copyright"> © 2025 Subhadip Mitra. Some Rights Reserved. Last updated: December 19, 2025. <span class="footer-utility-links"> <a href="/sitemap.xml" title="Sitemap">Sitemap</a> · <a href="/feed.xml" title="RSS Feed">RSS</a> · <a href="/llms.txt" title="AI Agent Information">LLMs</a> </span> </div> <div class="footer-social"> <a href="https://linkedin.com/in/subhadip-mitra" target="_blank" aria-label="LinkedIn" rel="external nofollow noopener"> <i class="fab fa-linkedin-in"></i> </a> <a href="https://github.com/bassrehab" target="_blank" aria-label="GitHub" rel="external nofollow noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/bassrehab" target="_blank" aria-label="Twitter" rel="external nofollow noopener"> <i class="fab fa-twitter"></i> </a> <a href="mailto:contact@subhadipmitra.com" aria-label="Email"> <i class="fas fa-envelope"></i> </a> </div> </div> </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-TW7YQ5XPC6"></script> <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-TW7YQ5XPC6');
  </script> <script defer src="/assets/js/google-analytics-setup.js?12374742c4b1801ba82226e617af7e2d"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> <script defer src="/assets/js/newsletter.js?c3d0931971ee96e9df74ba70526c3130"></script> </body> </html>