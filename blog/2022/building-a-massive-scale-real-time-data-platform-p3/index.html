<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="R3nPzqP9nO2aTgysGUiU3t-pw3wi1xuUuKVaMrimuck"> <meta name="msvalidate.01" content="04fec5e0d64b1c9bc788e98f81ee2a78"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Part 3 - Building a Massive-Scale Real-Time Data Platform - Memory Management with Apache Ignite | Subhadip Mitra </title> <meta name="author" content="Subhadip Mitra"> <meta name="description" content="Deep dive into memory management with Apache Ignite for high-performance data platforms. Learn how to handle 2.5M events/second with sub-millisecond latency through practical memory architecture, optimization techniques, and real-world implementation patterns."> <meta name="keywords" content="subhadip-mitra,subhadip,google,google-cloud,data-&amp;-analytics,ai-innovations,enterprise-technology-leadership,digital-transformation,machine-learning-models,cloud-technologies,quantum-computing,technology-consulting,singapore,researcher,llm,genai"> <meta property="og:site_name" content="Subhadip Mitra"> <meta property="og:type" content="article"> <meta property="og:title" content="Subhadip Mitra | Part 3 - Building a Massive-Scale Real-Time Data Platform - Memory Management with Apache Ignite"> <meta property="og:url" content="https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/"> <meta property="og:description" content="Deep dive into memory management with Apache Ignite for high-performance data platforms. Learn how to handle 2.5M events/second with sub-millisecond latency through practical memory architecture, optimization techniques, and real-world implementation patterns."> <meta property="og:image" content="/assets/img/social_preview.png"> <meta property="og:locale" content="en"> <meta name="twitter:card" content="summary"> <meta name="twitter:title" content="Part 3 - Building a Massive-Scale Real-Time Data Platform - Memory Management with Apache Ignite"> <meta name="twitter:description" content="Deep dive into memory management with Apache Ignite for high-performance data platforms. Learn how to handle 2.5M events/second with sub-millisecond latency through practical memory architecture, optimization techniques, and real-world implementation patterns."> <meta name="twitter:image" content="/assets/img/social_preview.png"> <script type="application/ld+json">
    {
        "author":
        {
            "@type": "Person",
            "name": "Subhadip Mitra"
        },
        "url": "https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/",
        "@type": "BlogPosting",
        "description": "Deep dive into memory management with Apache Ignite for high-performance data platforms. Learn how to handle 2.5M events/second with sub-millisecond latency through practical memory architecture, optimization techniques, and real-world implementation patterns.",
        "headline": "Part 3 - Building a Massive-Scale Real-Time Data Platform - Memory Management with Apache Ignite",
        
        "name": "Subhadip Mitra",
        "@context": "https://schema.org"
    }
  </script> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&amp;family=Inter+Tight:ital,wght@0,100..900;1,100..900&amp;family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="/assets/img/favicon.png?058310854f7b3c920f894a1d42c3c47b"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p3/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Subhadip</span> Mitra </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/now/">now </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">more </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/archive/">archive</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/contact/">contact</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/license/">licenses</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/privacy/">privacy</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Part 3 - Building a Massive-Scale Real-Time Data Platform - Memory Management with Apache Ignite</h1> <p class="post-meta"> Created on November 27, 2022 </p> <p class="post-tags"> <a href="/blog/2022"> <i class="fa-solid fa-calendar fa-sm"></i> 2022 </a>   ·   <a href="/blog/tag/system-design"> <i class="fa-solid fa-hashtag fa-sm"></i> system-design</a>   <a href="/blog/tag/architecture"> <i class="fa-solid fa-hashtag fa-sm"></i> architecture</a>   <a href="/blog/tag/casestudy"> <i class="fa-solid fa-hashtag fa-sm"></i> casestudy</a>   <a href="/blog/tag/ignite"> <i class="fa-solid fa-hashtag fa-sm"></i> ignite</a>   <a href="/blog/tag/kafka"> <i class="fa-solid fa-hashtag fa-sm"></i> kafka</a>   ·   <a href="/blog/category/architecture"> <i class="fa-solid fa-tag fa-sm"></i> architecture</a>   <a href="/blog/category/system-design"> <i class="fa-solid fa-tag fa-sm"></i> system-design</a>   <a href="/blog/category/casetudy"> <i class="fa-solid fa-tag fa-sm"></i> casetudy</a> </p> </header> <div class="audio-reader-container"> <div class="audio-reader-compact"> <button class="audio-trigger" id="audio-trigger" aria-label="Open audio player"> <i class="fas fa-headphones"></i> <span>Listen to article</span> <i class="fas fa-chevron-down audio-trigger-icon"></i> </button> <div class="audio-player-expanded" id="audio-player-expanded"> <div class="audio-player-body"> <div class="audio-info-bar"> <i class="fas fa-info-circle"></i> <span>Browser text-to-speech • Quality varies by device</span> </div> <div class="audio-controls-row"> <button class="audio-btn audio-btn-play" id="tts-play" aria-label="Play"> <i class="fas fa-play"></i> <span id="play-text">Play</span> </button> <button class="audio-btn audio-btn-pause" id="tts-pause" style="display: none;" aria-label="Pause"> <i class="fas fa-pause"></i> <span>Pause</span> </button> <button class="audio-btn audio-btn-stop" id="tts-stop" aria-label="Stop"> <i class="fas fa-stop"></i> </button> <div class="audio-speed-control"> <label for="tts-rate" class="audio-speed-label"> <i class="fas fa-gauge-high"></i> <span id="tts-rate-value">1.0x</span> </label> <input id="tts-rate" type="range" min="0.5" max="2" step="0.1" value="1" class="audio-speed-slider"> </div> </div> <div class="audio-voice-row"> <label for="tts-voice" class="audio-voice-label"> <i class="fas fa-microphone"></i> <span>Voice:</span> </label> <select id="tts-voice" class="audio-voice-select"> <option value="">Loading voices...</option> </select> </div> <div class="audio-progress-section"> <div class="audio-progress-info"> <span><i class="fas fa-circle-notch"></i> Progress</span> <span id="tts-progress">0%</span> </div> <div class="progress" style="height: 4px;"> <div class="progress-bar" id="tts-progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div> </div> </div> </div> </div> </div> </div> <style>.audio-reader-container{margin:1.5rem 0;font-family:var(--global-font-family,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif)}.audio-reader-compact{position:relative}.audio-trigger{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:var(--global-code-bg-color,#f8f9fa);border:1px solid var(--global-divider-color,#dee2e6);border-radius:.375rem;color:var(--global-text-color,#212529);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;font-family:inherit}.audio-trigger:hover{background:var(--global-bg-color,#fff);border-color:var(--global-theme-color,#0d6efd);color:var(--global-theme-color,#0d6efd);box-shadow:0 .125rem .25rem rgba(0,0,0,0.075)}.audio-trigger i:first-child{font-size:1rem;color:var(--global-theme-color,#0d6efd)}.audio-trigger-icon{font-size:.75rem;margin-left:.25rem;transition:transform .3s ease;color:var(--global-text-color-light,#6c757d)}.audio-trigger.active .audio-trigger-icon{transform:rotate(180deg)}.audio-trigger:focus{outline:2px solid var(--global-theme-color,#0d6efd);outline-offset:2px}.audio-player-expanded{display:none;margin-top:.75rem;background:var(--global-bg-color,#fff);border:1px solid var(--global-divider-color,#dee2e6);border-radius:.5rem;box-shadow:0 .25rem .75rem rgba(0,0,0,0.05);animation:slideDown .3s ease}.audio-player-expanded.show{display:block}@keyframes slideDown{from{opacity:0;transform:translateY(-0.5rem)}to{opacity:1;transform:translateY(0)}}.audio-player-body{padding:1rem}.audio-info-bar{display:flex;align-items:center;gap:.5rem;padding:.625rem .75rem;background:var(--global-code-bg-color,#f8f9fa);border-left:2px solid var(--global-theme-color,#0d6efd);border-radius:.25rem;font-size:.8125rem;color:var(--global-text-color-light,#6c757d);margin-bottom:1rem}.audio-info-bar i{color:var(--global-theme-color,#0d6efd);font-size:.875rem}.audio-controls-row{display:flex;align-items:center;gap:.5rem;margin-bottom:.875rem;flex-wrap:wrap}.audio-btn{display:inline-flex;align-items:center;gap:.375rem;padding:.375rem .875rem;border:1px solid transparent;border-radius:.375rem;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .15s ease;font-family:inherit;color:#fff}.audio-btn i{font-size:.8125rem}.audio-btn span{color:#fff}.audio-btn:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 .125rem .375rem rgba(0,0,0,0.15)}.audio-btn:active:not(:disabled){transform:translateY(0)}.audio-btn:disabled{opacity:.6;cursor:not-allowed}.audio-btn-play{background:var(--global-theme-color,#0d6efd);border-color:var(--global-theme-color,#0d6efd)}.audio-btn-play:hover:not(:disabled){background:color-mix(in srgb,var(--global-theme-color,#0d6efd) 85%,black);border-color:color-mix(in srgb,var(--global-theme-color,#0d6efd) 80%,black)}.audio-btn-play.playing{background:#198754;border-color:#198754}.audio-btn-pause{background:#6c757d;border-color:#6c757d}.audio-btn-pause:hover:not(:disabled){background:#5c636a;border-color:#565e64}.audio-btn-stop{background:transparent;color:#dc3545;border-color:#dc3545;padding:.375rem .625rem}.audio-btn-stop:hover:not(:disabled){background:#dc3545;color:#fff;border-color:#dc3545}.audio-speed-control{display:flex;align-items:center;gap:.5rem;margin-left:auto}.audio-speed-label{display:flex;align-items:center;gap:.375rem;font-size:.8125rem;font-weight:500;color:var(--global-text-color,#212529);margin:0;white-space:nowrap}.audio-speed-label i{color:var(--global-theme-color,#0d6efd);font-size:.875rem}.audio-speed-slider{width:80px;height:4px;-webkit-appearance:none;appearance:none;background:var(--global-divider-color,#dee2e6);border-radius:2px;outline:0}.audio-speed-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:14px;height:14px;border-radius:50%;background:var(--global-theme-color,#0d6efd);cursor:pointer;transition:transform .15s ease}.audio-speed-slider::-webkit-slider-thumb:hover{transform:scale(1.2)}.audio-speed-slider::-moz-range-thumb{width:14px;height:14px;border-radius:50%;background:var(--global-theme-color,#0d6efd);border:0;cursor:pointer;transition:transform .15s ease}.audio-speed-slider::-moz-range-thumb:hover{transform:scale(1.2)}.audio-voice-row{display:flex;align-items:center;gap:.75rem;margin-bottom:.875rem}.audio-voice-label{display:flex;align-items:center;gap:.375rem;font-size:.8125rem;font-weight:500;color:var(--global-text-color,#212529);margin:0;white-space:nowrap}.audio-voice-label i{color:var(--global-theme-color,#0d6efd);font-size:.875rem}.audio-voice-select{flex:1;padding:.375rem .75rem;border:1px solid var(--global-divider-color,#dee2e6);border-radius:.375rem;font-size:.8125rem;background:var(--global-bg-color,#fff);color:var(--global-text-color,#212529);cursor:pointer;transition:border-color .15s ease}.audio-voice-select:hover{border-color:var(--global-theme-color,#0d6efd)}.audio-voice-select:focus{outline:0;border-color:var(--global-theme-color,#0d6efd);box-shadow:0 0 0 .2rem rgba(13,110,253,0.25)}.audio-progress-section{margin-top:.75rem;padding-top:.75rem;border-top:1px solid var(--global-divider-color,#e9ecef)}
.audio-progress-info{display:flex;justify-content:space-between;align-items:center;font-size:.8125rem;color:var(--global-text-color-light,#6c757d);margin-bottom:.5rem}.audio-progress-info i{margin-right:.25rem;color:var(--global-theme-color,#0d6efd);font-size:.75rem}.progress{border-radius:2px;overflow:hidden;background:var(--global-divider-color,#e9ecef)}.progress-bar{background:var(--global-theme-color,#0d6efd);transition:width .6s ease}[data-theme="dark"] .audio-trigger,body.dark-mode .audio-trigger{background:rgba(255,255,255,0.05);border-color:var(--global-divider-color,#454545);color:var(--global-text-color,#e9ecef)}[data-theme="dark"] .audio-trigger:hover,body.dark-mode .audio-trigger:hover{background:rgba(255,255,255,0.08)}[data-theme="dark"] .audio-player-expanded,body.dark-mode .audio-player-expanded{background:var(--global-bg-color,#1e1e1e);border-color:var(--global-divider-color,#454545)}[data-theme="dark"] .audio-info-bar,body.dark-mode .audio-info-bar{background:rgba(255,255,255,0.03)}[data-theme="dark"] .audio-voice-select,body.dark-mode .audio-voice-select{background:var(--global-bg-color,#1e1e1e);border-color:var(--global-divider-color,#454545);color:var(--global-text-color,#e9ecef)}[data-theme="dark"] .progress,body.dark-mode .progress{background:rgba(255,255,255,0.1)}@media(max-width:576px){.audio-trigger span{display:none}.audio-controls-row{flex-wrap:wrap}.audio-btn span{display:none}.audio-btn{padding:.5rem .75rem}.audio-btn i{font-size:1rem}.audio-speed-control{width:100%;margin-left:0;margin-top:.5rem}.audio-speed-slider{flex:1}.audio-voice-row{flex-direction:column;align-items:stretch}}@media print{.audio-reader-container{display:none!important}}@media(prefers-reduced-motion:reduce){.audio-trigger,.audio-btn,.progress-bar,.audio-player-expanded{transition:none;animation:none}}</style> <script>
(function() {
  'use strict';
  
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', init);
  } else {
    init();
  }
  
  function init() {
    if (!('speechSynthesis' in window)) {
      document.querySelector('.audio-reader-container').innerHTML = `
        <div class="audio-reader-compact">
          <div class="alert alert-warning d-flex align-items-center" role="alert" style="font-size: 0.875rem;">
            <i class="fas fa-exclamation-triangle me-2"></i>
            <div>Text-to-speech not supported in this browser.</div>
          </div>
        </div>
      `;
      return;
    }

    const synth = window.speechSynthesis;
    let utterance = null;
    let isPaused = false;
    
    const triggerBtn = document.getElementById('audio-trigger');
    const expandedPlayer = document.getElementById('audio-player-expanded');
    const playBtn = document.getElementById('tts-play');
    const pauseBtn = document.getElementById('tts-pause');
    const stopBtn = document.getElementById('tts-stop');
    const voiceSelect = document.getElementById('tts-voice');
    const rateSlider = document.getElementById('tts-rate');
    const rateValue = document.getElementById('tts-rate-value');
    const progressText = document.getElementById('tts-progress');
    const progressBar = document.getElementById('tts-progress-bar');
    const playText = document.getElementById('play-text');

    const possibleSelectors = [
      '.post-content',
      'article .post-content',
      '.post .post-content',
      'article.post',
      '.post',
      'article',
      'main article',
      'main .container',
      'main',
      '.l-main',
      '.content'
    ];
    
    let articleElement = null;
    for (const selector of possibleSelectors) {
      articleElement = document.querySelector(selector);
      if (articleElement) break;
    }
    
    if (!articleElement) {
      console.warn('Audio Reader: Could not find article content');
      return;
    }
    
    const clonedContent = articleElement.cloneNode(true);
    const elementsToRemove = [
      'pre', 'code', 'script', 'style', 'nav', '.audio-reader-container',
      '.citation', '.giscus', '.utterances', '.navigation', '.pagination',
      '.social', '.share', 'header', 'footer', '.header', '.footer', '.sidebar'
    ];
    
    elementsToRemove.forEach(selector => {
      clonedContent.querySelectorAll(selector).forEach(el => el.remove());
    });
    
    const articleText = clonedContent.innerText
      .replace(/\s+/g, ' ')
      .replace(/\n{3,}/g, '\n\n')
      .trim();
    
    if (!articleText || articleText.length < 100) {
      console.warn('Audio Reader: Article too short');
      return;
    }

    // Toggle player
    triggerBtn.addEventListener('click', function() {
      expandedPlayer.classList.toggle('show');
      this.classList.toggle('active');
      localStorage.setItem('audioPlayerExpanded', expandedPlayer.classList.contains('show'));
    });

    // Load voices
    function loadVoices() {
      const voices = synth.getVoices();
      if (voices.length === 0) {
        setTimeout(loadVoices, 100);
        return;
      }
      
      voiceSelect.innerHTML = '<option value="">Default Voice</option>';
      
      const englishVoices = voices.filter(v => v.lang.startsWith('en'));
      const preferredVoices = englishVoices.filter(v => 
        v.name.includes('Google') || v.name.includes('Microsoft') ||
        v.name.includes('Premium') || v.name.includes('Enhanced') || v.name.includes('Natural')
      );
      const standardEnglishVoices = englishVoices.filter(v => !preferredVoices.includes(v));
      const otherVoices = voices.filter(v => !v.lang.startsWith('en'));
      
      preferredVoices.forEach((voice) => {
        const option = document.createElement('option');
        option.value = voices.indexOf(voice);
        option.textContent = `${voice.name} (${voice.lang})`;
        voiceSelect.appendChild(option);
      });
      
      if (standardEnglishVoices.length > 0) {
        const optgroup = document.createElement('optgroup');
        optgroup.label = 'Other English';
        standardEnglishVoices.forEach((voice) => {
          const option = document.createElement('option');
          option.value = voices.indexOf(voice);
          option.textContent = `${voice.name} (${voice.lang})`;
          optgroup.appendChild(option);
        });
        voiceSelect.appendChild(optgroup);
      }
      
      if (otherVoices.length > 0) {
        const optgroup = document.createElement('optgroup');
        optgroup.label = 'Other Languages';
        otherVoices.forEach((voice) => {
          const option = document.createElement('option');
          option.value = voices.indexOf(voice);
          option.textContent = `${voice.name} (${voice.lang})`;
          optgroup.appendChild(option);
        });
        voiceSelect.appendChild(optgroup);
      }
    }

    loadVoices();
    if (synth.addEventListener) {
      synth.addEventListener('voiceschanged', loadVoices);
    }

    function updateProgress(current, total) {
      const percent = Math.min(100, Math.round((current / total) * 100));
      progressText.textContent = `${percent}%`;
      progressBar.style.width = `${percent}%`;
      progressBar.setAttribute('aria-valuenow', percent);
    }

    function updatePlayButton(isPlaying) {
      const icon = playBtn.querySelector('i');
      if (isPlaying) {
        icon.className = 'fas fa-circle-dot';
        playText.textContent = 'Playing';
        playBtn.classList.add('playing');
      } else {
        icon.className = 'fas fa-play';
        playText.textContent = 'Play';
        playBtn.classList.remove('playing');
      }
    }

    function speak() {
      if (isPaused) {
        synth.resume();
        isPaused = false;
        updatePlayButton(true);
        pauseBtn.style.display = 'inline-flex';
        return;
      }

      synth.cancel();
      utterance = new SpeechSynthesisUtterance(articleText);
      
      if (voiceSelect.value) {
        const voices = synth.getVoices();
        utterance.voice = voices[parseInt(voiceSelect.value)];
      }
      
      utterance.rate = parseFloat(rateSlider.value);
      utterance.pitch = 1;
      utterance.volume = 1;
      
      utterance.onstart = function() {
        updatePlayButton(true);
        pauseBtn.style.display = 'inline-flex';
        playBtn.disabled = false;
      };
      
      utterance.onend = function() {
        updatePlayButton(false);
        pauseBtn.style.display = 'none';
        updateProgress(100, 100);
        setTimeout(() => updateProgress(0, 100), 1000);
      };
      
      utterance.onboundary = function(event) {
        updateProgress(event.charIndex, articleText.length);
      };

      utterance.onerror = function(event) {
        if (event.error !== 'interrupted' && event.error !== 'canceled') {
          alert('Playback error. Try a different voice.');
        }
        updatePlayButton(false);
        pauseBtn.style.display = 'none';
      };

      playBtn.disabled = true;
      synth.speak(utterance);
    }

    function pause() {
      if (synth.speaking && !isPaused) {
        synth.pause();
        isPaused = true;
        const icon = playBtn.querySelector('i');
        icon.className = 'fas fa-play';
        playText.textContent = 'Resume';
        playBtn.classList.remove('playing');
        pauseBtn.style.display = 'none';
      }
    }

    function stop() {
      synth.cancel();
      isPaused = false;
      updatePlayButton(false);
      pauseBtn.style.display = 'none';
      updateProgress(0, 100);
    }

    playBtn.addEventListener('click', speak);
    pauseBtn.addEventListener('click', pause);
    stopBtn.addEventListener('click', stop);
    
    rateSlider.addEventListener('input', function(e) {
      rateValue.textContent = `${parseFloat(e.target.value).toFixed(1)}x`;
    });

    window.addEventListener('beforeunload', function() {
      synth.cancel();
    });

    if (localStorage.getItem('audioPlayerExpanded') === 'true') {
      setTimeout(() => {
        expandedPlayer.classList.add('show');
        triggerBtn.classList.add('active');
      }, 100);
    }
  }
})();
</script> <article class="post-content"> <div id="markdown-content"> <p>In <a href="https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p1/">Parts 1</a> and <a href="https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p2/">2</a>, we explored our system architecture and data partitioning strategies. Today, we’ll dive deep into how we managed memory using Apache Ignite to handle 2.5 million events per second while maintaining sub-millisecond response times.</p> <h2 id="memory-management-challenges">Memory Management Challenges</h2> <h3 id="scale-requirements">Scale Requirements</h3> <ol> <li> <strong>Event Processing</strong> <ul> <li>2.5M events/second ingestion</li> <li>Sub-millisecond query latency</li> <li>Real-time aggregations</li> <li>State maintenance</li> </ul> </li> <li> <strong>DPI Data</strong> <ul> <li>350GB/15min processing</li> <li>Complex analysis</li> <li>Pattern detection</li> <li>Historical queries</li> </ul> </li> <li> <strong>Active Dataset</strong> <ul> <li>Multiple event types</li> <li>Rich subscriber data</li> <li>Location information</li> <li>Real-time metrics</li> </ul> </li> </ol> <h2 id="memory-architecture">Memory Architecture</h2> <p><br></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/blog/ignite-memory-architecture-480.webp 480w,/assets/img/blog/ignite-memory-architecture-800.webp 800w,/assets/img/blog/ignite-memory-architecture-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/blog/ignite-memory-architecture.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p><br></p> <h3 id="memory-regions">Memory Regions</h3> <ol> <li> <strong>On-Heap Memory (20%)</strong> <ul> <li>Size: ~100GB per node</li> <li>Usage: Critical metadata</li> <li>Contents: Indexes and query execution</li> <li>GC tuning: ZGC optimized</li> </ul> </li> <li> <strong>Off-Heap Memory (80%)</strong> <ul> <li>Size: ~400GB per node</li> <li>Usage: Event data storage</li> <li>Direct memory allocation</li> <li>Zero-copy operations</li> </ul> </li> </ol> <h3 id="memory-organization">Memory Organization</h3> <ol> <li> <strong>Page Memory</strong> <ul> <li>Page size: 2KB to 2MB</li> <li>Pre-allocated pools</li> <li>NUMA-aware allocation</li> <li>Defragmentation support</li> </ul> </li> <li> <strong>Data Regions</strong> <ul> <li>Hot data region (4 hours)</li> <li>Warm data region (24 hours)</li> <li>Index region (permanent)</li> <li>System region (permanent)</li> </ul> </li> </ol> <h2 id="implementation-strategy">Implementation Strategy</h2> <p><br></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/blog/memory-management-flow-480.webp 480w,/assets/img/blog/memory-management-flow-800.webp 800w,/assets/img/blog/memory-management-flow-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/blog/memory-management-flow.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p><br></p> <h3 id="memory-configuration">Memory Configuration</h3> <div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.configuration.IgniteConfiguration"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"dataStorageConfiguration"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.configuration.DataStorageConfiguration"</span><span class="nt">&gt;</span>
            <span class="c">&lt;!-- System region configuration --&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"systemRegionInitialSize"</span> 
                      <span class="na">value=</span><span class="s">"#{10L * 1024 * 1024 * 1024}"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- 10GB --&gt;</span>
            
            <span class="c">&lt;!-- Default region configuration --&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"defaultDataRegionConfiguration"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.configuration.DataRegionConfiguration"</span><span class="nt">&gt;</span>
                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">value=</span><span class="s">"Default_Region"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"initialSize"</span> 
                              <span class="na">value=</span><span class="s">"#{20L * 1024 * 1024 * 1024}"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- 20GB --&gt;</span>
                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"maxSize"</span> 
                              <span class="na">value=</span><span class="s">"#{50L * 1024 * 1024 * 1024}"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- 50GB --&gt;</span>
                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"pageEvictionMode"</span> 
                              <span class="na">value=</span><span class="s">"RANDOM_2_LRU"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"metricsEnabled"</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
                <span class="nt">&lt;/bean&gt;</span>
            <span class="nt">&lt;/property&gt;</span>

            <span class="c">&lt;!-- Custom regions configuration --&gt;</span>
            <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"dataRegionConfigurations"</span><span class="nt">&gt;</span>
                <span class="nt">&lt;list&gt;</span>
                    <span class="c">&lt;!-- Hot data region --&gt;</span>
                    <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.configuration.DataRegionConfiguration"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">value=</span><span class="s">"Hot_Region"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"initialSize"</span> 
                                  <span class="na">value=</span><span class="s">"#{200L * 1024 * 1024 * 1024}"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- 200GB --&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"maxSize"</span> 
                                  <span class="na">value=</span><span class="s">"#{400L * 1024 * 1024 * 1024}"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- 400GB --&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"pageEvictionMode"</span> 
                                  <span class="na">value=</span><span class="s">"RANDOM_2_LRU"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"evictionThreshold"</span> <span class="na">value=</span><span class="s">"0.95"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"metricsEnabled"</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/bean&gt;</span>
                    
                    <span class="c">&lt;!-- Index region --&gt;</span>
                    <span class="nt">&lt;bean</span> <span class="na">class=</span><span class="s">"org.apache.ignite.configuration.DataRegionConfiguration"</span><span class="nt">&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"name"</span> <span class="na">value=</span><span class="s">"Index_Region"</span><span class="nt">/&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"initialSize"</span> 
                                  <span class="na">value=</span><span class="s">"#{50L * 1024 * 1024 * 1024}"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- 50GB --&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"maxSize"</span> 
                                  <span class="na">value=</span><span class="s">"#{100L * 1024 * 1024 * 1024}"</span> <span class="nt">/&gt;</span> <span class="c">&lt;!-- 100GB --&gt;</span>
                        <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">"persistenceEnabled"</span> <span class="na">value=</span><span class="s">"true"</span><span class="nt">/&gt;</span>
                    <span class="nt">&lt;/bean&gt;</span>
                <span class="nt">&lt;/list&gt;</span>
            <span class="nt">&lt;/property&gt;</span>
        <span class="nt">&lt;/bean&gt;</span>
    <span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;/bean&gt;</span>
</code></pre></div></div> <h3 id="memory-manager-implementation">Memory Manager Implementation</h3> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CustomMemoryManager</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">IgniteCache</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">BinaryObject</span><span class="o">&gt;</span> <span class="n">cache</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">EvictionPolicy</span> <span class="n">evictionPolicy</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">MetricsRegistry</span> <span class="n">metricsRegistry</span><span class="o">;</span>
    
    <span class="c1">// Memory pressure handling</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleMemoryPressure</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">DataRegionMetrics</span> <span class="n">metrics</span> <span class="o">=</span> <span class="n">getRegionMetrics</span><span class="o">(</span><span class="s">"Hot_Region"</span><span class="o">);</span>
        <span class="kt">double</span> <span class="n">usagePercentage</span> <span class="o">=</span> <span class="n">metrics</span><span class="o">.</span><span class="na">getPagesFillFactor</span><span class="o">();</span>
        
        <span class="k">if</span> <span class="o">(</span><span class="n">usagePercentage</span> <span class="o">&gt;</span> <span class="mf">0.9</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// 90% threshold</span>
            <span class="n">triggerEviction</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="c1">// Custom eviction logic</span>
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">triggerEviction</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Get events older than 4 hours</span>
        <span class="kt">long</span> <span class="n">cutoffTime</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span> 
            <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">HOURS</span><span class="o">.</span><span class="na">toMillis</span><span class="o">(</span><span class="mi">4</span><span class="o">);</span>
            
        <span class="nc">SqlQuery</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">BinaryObject</span><span class="o">&gt;</span> <span class="n">query</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SqlQuery</span><span class="o">&lt;&gt;(</span>
            <span class="nc">Event</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="s">"timestamp &lt; ? ORDER BY timestamp ASC LIMIT 10000"</span><span class="o">);</span>
            
        <span class="k">try</span> <span class="o">(</span><span class="nc">QueryCursor</span><span class="o">&lt;</span><span class="nc">Cache</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">BinaryObject</span><span class="o">&gt;&gt;</span> <span class="n">cursor</span> <span class="o">=</span> 
                <span class="n">cache</span><span class="o">.</span><span class="na">query</span><span class="o">(</span><span class="n">query</span><span class="o">.</span><span class="na">setArgs</span><span class="o">(</span><span class="n">cutoffTime</span><span class="o">)))</span> <span class="o">{</span>
            
            <span class="k">for</span> <span class="o">(</span><span class="nc">Cache</span><span class="o">.</span><span class="na">Entry</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">BinaryObject</span><span class="o">&gt;</span> <span class="n">entry</span> <span class="o">:</span> <span class="n">cursor</span><span class="o">)</span> <span class="o">{</span>
                <span class="c1">// Move to warm storage</span>
                <span class="n">moveToWarmStorage</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">(),</span> <span class="n">entry</span><span class="o">.</span><span class="na">getValue</span><span class="o">());</span>
                <span class="c1">// Remove from hot storage</span>
                <span class="n">cache</span><span class="o">.</span><span class="na">remove</span><span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">getKey</span><span class="o">());</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="c1">// Warm storage management</span>
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">moveToWarmStorage</span><span class="o">(</span><span class="nc">String</span> <span class="n">key</span><span class="o">,</span> <span class="nc">BinaryObject</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Compress if needed</span>
        <span class="kt">byte</span><span class="o">[]</span> <span class="n">compressed</span> <span class="o">=</span> <span class="n">compress</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
        <span class="c1">// Store in Cassandra</span>
        <span class="n">cassandraTemplate</span><span class="o">.</span><span class="na">execute</span><span class="o">(</span>
            <span class="s">"INSERT INTO warm_storage (key, data) VALUES (?, ?)"</span><span class="o">,</span>
            <span class="n">key</span><span class="o">,</span> <span class="n">compressed</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h2 id="memory-optimization-techniques">Memory Optimization Techniques</h2> <h3 id="1-data-layout-optimization">1. Data Layout Optimization</h3> <h4 id="object-structure-design">Object Structure Design</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Before Optimization</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">EventData</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">id</span><span class="o">;</span>                     <span class="c1">// 8 bytes reference</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">timestamp</span><span class="o">;</span>                <span class="c1">// 8 bytes</span>
    <span class="kd">private</span> <span class="nc">String</span> <span class="n">eventType</span><span class="o">;</span>              <span class="c1">// 8 bytes reference</span>
    <span class="kd">private</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">String</span><span class="o">&gt;</span> <span class="n">metadata</span><span class="o">;</span>  <span class="c1">// 8 bytes reference + overhead</span>
    <span class="kd">private</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">payload</span><span class="o">;</span>                <span class="c1">// 8 bytes reference + data</span>
<span class="o">}</span>

<span class="c1">// After Optimization</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">OptimizedEventData</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">id</span><span class="o">;</span>          <span class="c1">// 8 bytes (converted from String)</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">timestamp</span><span class="o">;</span>   <span class="c1">// 8 bytes</span>
    <span class="kd">private</span> <span class="kt">byte</span> <span class="n">eventType</span><span class="o">;</span>   <span class="c1">// 1 byte (enum converted to byte)</span>
    <span class="kd">private</span> <span class="kt">short</span> <span class="n">metaCount</span><span class="o">;</span>  <span class="c1">// 2 bytes</span>
    <span class="kd">private</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">combined</span><span class="o">;</span>  <span class="c1">// metadata + payload combined</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="memory-alignment">Memory Alignment</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">AlignedEventData</span> <span class="o">{</span>
    <span class="c1">// Fields arranged by size (descending) for optimal packing</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">timestamp</span><span class="o">;</span>      <span class="c1">// 8 bytes</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">id</span><span class="o">;</span>            <span class="c1">// 8 bytes</span>
    <span class="kd">private</span> <span class="kt">int</span> <span class="n">dataLength</span><span class="o">;</span>     <span class="c1">// 4 bytes</span>
    <span class="kd">private</span> <span class="kt">short</span> <span class="n">flags</span><span class="o">;</span>        <span class="c1">// 2 bytes</span>
    <span class="kd">private</span> <span class="kt">byte</span> <span class="n">eventType</span><span class="o">;</span>     <span class="c1">// 1 byte</span>
    <span class="kd">private</span> <span class="kt">byte</span> <span class="n">reserved</span><span class="o">;</span>      <span class="c1">// 1 byte (padding for 8-byte alignment)</span>
    <span class="kd">private</span> <span class="kt">byte</span><span class="o">[]</span> <span class="n">data</span><span class="o">;</span>        <span class="c1">// aligned access</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="object-pooling-implementation">Object Pooling Implementation</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">EventObjectPool</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Queue</span><span class="o">&lt;</span><span class="nc">EventData</span><span class="o">&gt;</span> <span class="n">pool</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">maxPoolSize</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="nf">EventObjectPool</span><span class="o">(</span><span class="kt">int</span> <span class="n">maxSize</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">this</span><span class="o">.</span><span class="na">pool</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ConcurrentLinkedQueue</span><span class="o">&lt;&gt;();</span>
        <span class="k">this</span><span class="o">.</span><span class="na">maxPoolSize</span> <span class="o">=</span> <span class="n">maxSize</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="nc">EventData</span> <span class="nf">acquire</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">EventData</span> <span class="n">event</span> <span class="o">=</span> <span class="n">pool</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">event</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">event</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">EventData</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">event</span><span class="o">;</span>
    <span class="o">}</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">release</span><span class="o">(</span><span class="nc">EventData</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">event</span><span class="o">.</span><span class="na">reset</span><span class="o">();</span> <span class="c1">// Clear sensitive data</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">pool</span><span class="o">.</span><span class="na">size</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">maxPoolSize</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">pool</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="2-access-pattern-optimization">2. Access Pattern Optimization</h3> <h4 id="numa-aware-allocation">NUMA-Aware Allocation</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">NumaAwareAllocation</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">numaNodes</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ThreadLocal</span><span class="o">&lt;</span><span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">nodeAffinity</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">allocateMemory</span><span class="o">(</span><span class="kt">int</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">node</span> <span class="o">=</span> <span class="n">nodeAffinity</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
        <span class="c1">// Allocate memory on specific NUMA node</span>
        <span class="kt">long</span> <span class="n">address</span> <span class="o">=</span> <span class="n">unsafe</span><span class="o">.</span><span class="na">allocateMemory</span><span class="o">(</span><span class="n">size</span><span class="o">);</span>
        <span class="c1">// Bind memory to NUMA node</span>
        <span class="n">numaBindMemory</span><span class="o">(</span><span class="n">address</span><span class="o">,</span> <span class="n">size</span><span class="o">,</span> <span class="n">node</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="kd">private</span> <span class="kd">native</span> <span class="kt">void</span> <span class="nf">numaBindMemory</span><span class="o">(</span><span class="kt">long</span> <span class="n">address</span><span class="o">,</span> <span class="kt">int</span> <span class="n">size</span><span class="o">,</span> <span class="kt">int</span> <span class="n">node</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="thread-affinity">Thread Affinity</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ThreadAffinityManager</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ConcurrentMap</span><span class="o">&lt;</span><span class="nc">Thread</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">threadToCore</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">availableCores</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setThreadAffinity</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">Thread</span> <span class="n">currentThread</span> <span class="o">=</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">currentThread</span><span class="o">();</span>
        <span class="kt">int</span> <span class="n">core</span> <span class="o">=</span> <span class="n">threadToCore</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="n">currentThread</span><span class="o">);</span>
        
        <span class="c1">// Set processor affinity</span>
        <span class="n">setThreadAffinityMask</span><span class="o">(</span><span class="mi">1L</span> <span class="o">&lt;&lt;</span> <span class="n">core</span><span class="o">);</span>
    <span class="o">}</span>
    
    <span class="kd">private</span> <span class="kd">native</span> <span class="kt">void</span> <span class="nf">setThreadAffinityMask</span><span class="o">(</span><span class="kt">long</span> <span class="n">mask</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="cache-line-optimization">Cache Line Optimization</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CacheLineAligned</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">CACHE_LINE</span> <span class="o">=</span> <span class="mi">64</span><span class="o">;</span> <span class="c1">// bytes</span>
    
    <span class="c1">// Prevent false sharing with padding</span>
    <span class="nd">@sun</span><span class="o">.</span><span class="na">misc</span><span class="o">.</span><span class="na">Contended</span>
    <span class="kd">private</span> <span class="kd">volatile</span> <span class="kt">long</span> <span class="n">counter</span><span class="o">;</span>
    
    <span class="c1">// Ensure cache line alignment</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">padding1</span><span class="o">,</span> <span class="n">padding2</span><span class="o">,</span> <span class="n">padding3</span><span class="o">,</span> <span class="n">padding4</span><span class="o">,</span> 
                <span class="n">padding5</span><span class="o">,</span> <span class="n">padding6</span><span class="o">,</span> <span class="n">padding7</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="3-memory-access-patterns">3. Memory Access Patterns</h3> <h4 id="sequential-access">Sequential Access</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">SequentialAccessBuffer</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ByteBuffer</span> <span class="n">buffer</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">blockSize</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">processData</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Sequential read is faster than random access</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">buffer</span><span class="o">.</span><span class="na">capacity</span><span class="o">();</span> <span class="n">i</span> <span class="o">+=</span> <span class="n">blockSize</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">buffer</span><span class="o">.</span><span class="na">position</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
            <span class="n">processBlock</span><span class="o">(</span><span class="n">buffer</span><span class="o">,</span> <span class="n">blockSize</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="batch-processing">Batch Processing</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BatchProcessor</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">BATCH_SIZE</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">processBatch</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Event</span><span class="o">&gt;</span> <span class="n">events</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Process events in batches to improve memory access patterns</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">events</span><span class="o">.</span><span class="na">size</span><span class="o">();</span> <span class="n">i</span> <span class="o">+=</span> <span class="no">BATCH_SIZE</span><span class="o">)</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">end</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">min</span><span class="o">(</span><span class="n">i</span> <span class="o">+</span> <span class="no">BATCH_SIZE</span><span class="o">,</span> <span class="n">events</span><span class="o">.</span><span class="na">size</span><span class="o">());</span>
            <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Event</span><span class="o">&gt;</span> <span class="n">batch</span> <span class="o">=</span> <span class="n">events</span><span class="o">.</span><span class="na">subList</span><span class="o">(</span><span class="n">i</span><span class="o">,</span> <span class="n">end</span><span class="o">);</span>
            <span class="n">processEventBatch</span><span class="o">(</span><span class="n">batch</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p><br></p> <h2 id="eviction-strategies">Eviction Strategies</h2> <p><br></p> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/blog/memory-eviction-flow-480.webp 480w,/assets/img/blog/memory-eviction-flow-800.webp 800w,/assets/img/blog/memory-eviction-flow-1400.webp 1400w," type="image/webp" sizes="95vw"></source> <img src="/assets/img/blog/memory-eviction-flow.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p><br></p> <h3 id="1-time-based-eviction">1. Time-Based Eviction</h3> <h4 id="rolling-window-implementation">Rolling Window Implementation</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TimeBasedEviction</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Duration</span> <span class="n">windowSize</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">EvictionQueue</span><span class="o">&lt;</span><span class="nc">TimedEntry</span><span class="o">&gt;</span> <span class="n">queue</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">evictExpired</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">long</span> <span class="n">cutoff</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span> <span class="n">windowSize</span><span class="o">.</span><span class="na">toMillis</span><span class="o">();</span>
        
        <span class="k">while</span> <span class="o">(!</span><span class="n">queue</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">()</span> <span class="o">&amp;&amp;</span> 
               <span class="n">queue</span><span class="o">.</span><span class="na">peek</span><span class="o">().</span><span class="na">getTimestamp</span><span class="o">()</span> <span class="o">&lt;</span> <span class="n">cutoff</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">TimedEntry</span> <span class="n">entry</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
            <span class="n">processEviction</span><span class="o">(</span><span class="n">entry</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">processEviction</span><span class="o">(</span><span class="nc">TimedEntry</span> <span class="n">entry</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Move to appropriate storage tier</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">entry</span><span class="o">.</span><span class="na">isHot</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">moveToWarmStorage</span><span class="o">(</span><span class="n">entry</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="n">moveToColdStorage</span><span class="o">(</span><span class="n">entry</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="priority-based-time-eviction">Priority-Based Time Eviction</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">PriorityTimeEviction</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">PriorityQueue</span><span class="o">&lt;</span><span class="nc">EventData</span><span class="o">&gt;</span> <span class="n">priorityQueue</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">Map</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;</span> <span class="n">customerTiers</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">evictWithPriority</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">long</span> <span class="n">currentTime</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
        
        <span class="k">while</span> <span class="o">(</span><span class="n">needsEviction</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">EventData</span> <span class="n">event</span> <span class="o">=</span> <span class="n">priorityQueue</span><span class="o">.</span><span class="na">peek</span><span class="o">();</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">shouldEvict</span><span class="o">(</span><span class="n">event</span><span class="o">,</span> <span class="n">currentTime</span><span class="o">))</span> <span class="o">{</span>
                <span class="n">event</span> <span class="o">=</span> <span class="n">priorityQueue</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
                <span class="n">evictEvent</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">break</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>
    
    <span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">shouldEvict</span><span class="o">(</span><span class="nc">EventData</span> <span class="n">event</span><span class="o">,</span> <span class="kt">long</span> <span class="n">currentTime</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">tier</span> <span class="o">=</span> <span class="n">customerTiers</span><span class="o">.</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">event</span><span class="o">.</span><span class="na">getCustomerId</span><span class="o">(),</span> <span class="mi">0</span><span class="o">);</span>
        <span class="kt">long</span> <span class="n">age</span> <span class="o">=</span> <span class="n">currentTime</span> <span class="o">-</span> <span class="n">event</span><span class="o">.</span><span class="na">getTimestamp</span><span class="o">();</span>
        
        <span class="c1">// Higher tier customers get longer retention</span>
        <span class="k">return</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="n">getRetentionPeriod</span><span class="o">(</span><span class="n">tier</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="2-size-based-eviction">2. Size-Based Eviction</h3> <h4 id="memory-threshold-management">Memory Threshold Management</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemoryThresholdEviction</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="no">WARNING_THRESHOLD</span> <span class="o">=</span> <span class="mf">0.80</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="no">CRITICAL_THRESHOLD</span> <span class="o">=</span> <span class="mf">0.90</span><span class="o">;</span>
    
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">MemoryUsageMonitor</span> <span class="n">monitor</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">EvictionPolicy</span> <span class="n">policy</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">checkAndEvict</span><span class="o">()</span> <span class="o">{</span>
        <span class="kt">double</span> <span class="n">usage</span> <span class="o">=</span> <span class="n">monitor</span><span class="o">.</span><span class="na">getCurrentUsage</span><span class="o">();</span>
        
        <span class="k">if</span> <span class="o">(</span><span class="n">usage</span> <span class="o">&gt;=</span> <span class="no">CRITICAL_THRESHOLD</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// Aggressive eviction</span>
            <span class="n">policy</span><span class="o">.</span><span class="na">criticalEviction</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">usage</span> <span class="o">&gt;=</span> <span class="no">WARNING_THRESHOLD</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// Normal eviction</span>
            <span class="n">policy</span><span class="o">.</span><span class="na">normalEviction</span><span class="o">();</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="back-pressure-implementation">Back-pressure Implementation</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BackPressureManager</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">AtomicDouble</span> <span class="n">memoryUsage</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">BlockingQueue</span><span class="o">&lt;</span><span class="nc">Event</span><span class="o">&gt;</span> <span class="n">inputQueue</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">applyBackPressure</span><span class="o">(</span><span class="nc">Event</span> <span class="n">event</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">double</span> <span class="n">usage</span> <span class="o">=</span> <span class="n">memoryUsage</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
        
        <span class="k">if</span> <span class="o">(</span><span class="n">usage</span> <span class="o">&gt;</span> <span class="mf">0.95</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// Reject new events</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">MemoryPressureException</span><span class="o">(</span><span class="s">"Memory full"</span><span class="o">);</span>
        <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">usage</span> <span class="o">&gt;</span> <span class="mf">0.85</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// Add with timeout</span>
            <span class="kt">boolean</span> <span class="n">added</span> <span class="o">=</span> <span class="n">inputQueue</span><span class="o">.</span><span class="na">offer</span><span class="o">(</span><span class="n">event</span><span class="o">,</span> 
                <span class="mi">100</span><span class="o">,</span> <span class="nc">TimeUnit</span><span class="o">.</span><span class="na">MILLISECONDS</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(!</span><span class="n">added</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">handleRejection</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
            <span class="c1">// Normal processing</span>
            <span class="n">inputQueue</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h4 id="batch-eviction-control">Batch Eviction Control</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BatchEvictionController</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">MAX_BATCH_SIZE</span> <span class="o">=</span> <span class="mi">10000</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">EvictionQueue</span> <span class="n">queue</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">evictBatch</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">QueueEntry</span><span class="o">&gt;</span> <span class="n">batch</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        <span class="kt">int</span> <span class="n">currentSize</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        
        <span class="k">while</span> <span class="o">(</span><span class="n">currentSize</span> <span class="o">&lt;</span> <span class="no">MAX_BATCH_SIZE</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="n">queue</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="nc">QueueEntry</span> <span class="n">entry</span> <span class="o">=</span> <span class="n">queue</span><span class="o">.</span><span class="na">poll</span><span class="o">();</span>
            <span class="n">batch</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">entry</span><span class="o">);</span>
            <span class="n">currentSize</span> <span class="o">+=</span> <span class="n">entry</span><span class="o">.</span><span class="na">getSize</span><span class="o">();</span>
        <span class="o">}</span>
        
        <span class="k">if</span> <span class="o">(!</span><span class="n">batch</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span> <span class="o">{</span>
            <span class="n">processBatchEviction</span><span class="o">(</span><span class="n">batch</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h2 id="monitoring-and-alerting">Monitoring and Alerting</h2> <h3 id="memory-metrics">Memory Metrics</h3> <ol> <li> <strong>Usage Metrics</strong> <ul> <li>Region utilization</li> <li>Page allocation rates</li> <li>Eviction statistics</li> <li>GC performance</li> </ul> </li> <li> <strong>Performance Metrics</strong> <ul> <li>Access latencies</li> <li>Hit/miss ratios</li> <li>Throughput rates</li> <li>Queue depths</li> </ul> </li> </ol> <h3 id="alert-thresholds">Alert Thresholds</h3> <ol> <li> <strong>Critical Alerts</strong> <ul> <li>Memory usage &gt; 90%</li> <li>GC pause &gt; 500ms</li> <li>Eviction rate spike</li> <li>Error rate increase</li> </ul> </li> <li> <strong>Warning Alerts</strong> <ul> <li>Memory usage &gt; 80%</li> <li>GC pause &gt; 200ms</li> <li>Queue depth increase</li> <li>Throughput drop</li> </ul> </li> </ol> <h2 id="performance-results">Performance Results</h2> <h3 id="latency-profile">Latency Profile</h3> <ul> <li>Read operations: &lt; 1ms (p99)</li> <li>Write operations: &lt; 2ms (p99)</li> <li>Query operations: &lt; 10ms (p99)</li> <li>Scan operations: &lt; 100ms (p99)</li> </ul> <h3 id="throughput-achievements">Throughput Achievements</h3> <ul> <li>Event processing: 2.5M/second</li> <li>Query processing: 100K/second</li> <li>Scan processing: 10K/second</li> <li>Background operations: 1K/second</li> </ul> <h2 id="lessons-learned">Lessons Learned</h2> <h3 id="1-memory-architecture-design">1. Memory Architecture Design</h3> <h4 id="initial-planning">Initial Planning</h4> <ul> <li> <strong>Start Conservative</strong>: Begin with smaller memory regions and scale up based on actual usage patterns</li> <li> <strong>Measure Everything</strong>: Implement comprehensive memory monitoring before going live</li> <li> <strong>Plan for Growth</strong>: Design memory regions with at least 50% headroom for unexpected spikes</li> <li> <strong>Document Assumptions</strong>: Keep track of all memory sizing assumptions and validate them regularly</li> </ul> <h4 id="real-world-insights">Real-world Insights</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Example of what not to do</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PoorMemoryPlanning</span> <span class="o">{</span>
    <span class="c1">// Don't hardcode memory sizes</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="no">MEMORY_SIZE</span> <span class="o">=</span> <span class="mi">100</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span><span class="o">;</span> <span class="c1">// 100MB fixed</span>
    
    <span class="c1">// Don't assume fixed event sizes</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">EVENT_SIZE</span> <span class="o">=</span> <span class="mi">1024</span><span class="o">;</span> <span class="c1">// 1KB per event</span>
<span class="o">}</span>

<span class="c1">// Better approach</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">AdaptiveMemoryPlanning</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="nc">ConfigurationManager</span> <span class="n">config</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">long</span> <span class="nf">calculateMemorySize</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Base size from configuration</span>
        <span class="kt">long</span> <span class="n">baseSize</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="na">getBaseMemorySize</span><span class="o">();</span>
        
        <span class="c1">// Growth factor based on historical data</span>
        <span class="kt">double</span> <span class="n">growthFactor</span> <span class="o">=</span> <span class="n">getHistoricalGrowthFactor</span><span class="o">();</span>
        
        <span class="c1">// Add safety margin</span>
        <span class="k">return</span> <span class="o">(</span><span class="kt">long</span><span class="o">)(</span><span class="n">baseSize</span> <span class="o">*</span> <span class="n">growthFactor</span> <span class="o">*</span> <span class="mf">1.5</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="2-performance-optimization">2. Performance Optimization</h3> <h4 id="memory-access-patterns">Memory Access Patterns</h4> <ul> <li> <strong>Profile First</strong>: Always profile before optimizing</li> <li> <strong>Batch Operations</strong>: Batch similar operations for better cache utilization</li> <li> <strong>Avoid Premature Optimization</strong>: Start with simple, maintainable code and optimize based on data</li> <li> <strong>Test at Scale</strong>: Performance characteristics change dramatically at scale</li> </ul> <h4 id="implementation-experience">Implementation Experience</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Common performance pitfall</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">IneffientProcessing</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">processEvents</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Event</span><span class="o">&gt;</span> <span class="n">events</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Don't process one at a time</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Event</span> <span class="n">event</span> <span class="o">:</span> <span class="n">events</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">processEvent</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
            <span class="n">saveToDatabase</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
            <span class="n">updateMetrics</span><span class="o">(</span><span class="n">event</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// Optimized approach</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BatchProcessing</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="no">BATCH_SIZE</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">processEvents</span><span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Event</span><span class="o">&gt;</span> <span class="n">events</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Process in batches</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">List</span><span class="o">&lt;</span><span class="nc">Event</span><span class="o">&gt;</span> <span class="n">batch</span> <span class="o">:</span> <span class="nc">Lists</span><span class="o">.</span><span class="na">partition</span><span class="o">(</span><span class="n">events</span><span class="o">,</span> <span class="no">BATCH_SIZE</span><span class="o">))</span> <span class="o">{</span>
            <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Event</span><span class="o">&gt;</span> <span class="n">processed</span> <span class="o">=</span> <span class="n">processEventBatch</span><span class="o">(</span><span class="n">batch</span><span class="o">);</span>
            <span class="n">saveBatchToDatabase</span><span class="o">(</span><span class="n">processed</span><span class="o">);</span>
            <span class="n">updateMetricsBatch</span><span class="o">(</span><span class="n">processed</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="3-operational-management">3. Operational Management</h3> <h4 id="monitoring-and-alerting-1">Monitoring and Alerting</h4> <ul> <li> <strong>Define Clear Thresholds</strong>: Establish clear memory thresholds for different alert levels</li> <li> <strong>Implement Trending</strong>: Track memory usage patterns over time</li> <li> <strong>Set Up Early Warnings</strong>: Alert before reaching critical levels</li> <li> <strong>Keep Historical Data</strong>: Maintain historical memory usage data for capacity planning</li> </ul> <h4 id="monitoring-implementation">Monitoring Implementation</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">MemoryMonitoring</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="no">WARNING_THRESHOLD</span> <span class="o">=</span> <span class="mf">0.75</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">double</span> <span class="no">CRITICAL_THRESHOLD</span> <span class="o">=</span> <span class="mf">0.90</span><span class="o">;</span>
    
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">monitorMemory</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Track multiple metrics</span>
        <span class="n">recordMemoryMetrics</span><span class="o">(</span>
            <span class="n">getHeapUsage</span><span class="o">(),</span>
            <span class="n">getOffHeapUsage</span><span class="o">(),</span>
            <span class="n">getGCMetrics</span><span class="o">(),</span>
            <span class="n">getEvictionRates</span><span class="o">()</span>
        <span class="o">);</span>
        
        <span class="c1">// Monitor trends</span>
        <span class="n">analyzeTrends</span><span class="o">();</span>
        
        <span class="c1">// Predict capacity needs</span>
        <span class="n">predictCapacityNeeds</span><span class="o">();</span>
    <span class="o">}</span>
    
    <span class="kd">private</span> <span class="kt">void</span> <span class="nf">analyzeTrends</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Look at last 24 hours</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">MemoryMetric</span><span class="o">&gt;</span> <span class="n">recent</span> <span class="o">=</span> <span class="n">getRecentMetrics</span><span class="o">(</span><span class="nc">Duration</span><span class="o">.</span><span class="na">ofHours</span><span class="o">(</span><span class="mi">24</span><span class="o">));</span>
        
        <span class="c1">// Calculate growth rate</span>
        <span class="kt">double</span> <span class="n">growthRate</span> <span class="o">=</span> <span class="n">calculateGrowthRate</span><span class="o">(</span><span class="n">recent</span><span class="o">);</span>
        
        <span class="c1">// Predict when we'll hit thresholds</span>
        <span class="n">predictThresholdBreach</span><span class="o">(</span><span class="n">growthRate</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="4-team-and-process">4. Team and Process</h3> <h4 id="knowledge-sharing">Knowledge Sharing</h4> <ul> <li> <strong>Document Everything</strong>: Maintain detailed documentation of memory-related decisions</li> <li> <strong>Regular Reviews</strong>: Conduct regular reviews of memory usage patterns</li> <li> <strong>Share Insights</strong>: Create knowledge sharing sessions for the team</li> <li> <strong>Update Runbooks</strong>: Keep operational runbooks updated with learned lessons</li> </ul> <h4 id="process-implementation">Process Implementation</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">OperationalRunbook</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">handleMemoryPressure</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Clear documentation of steps</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Action</span><span class="o">&gt;</span> <span class="n">actions</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span>
            <span class="k">new</span> <span class="nf">Action</span><span class="o">(</span><span class="s">"Check memory metrics"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">Action</span><span class="o">(</span><span class="s">"Analyze GC logs"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">Action</span><span class="o">(</span><span class="s">"Review recent changes"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">Action</span><span class="o">(</span><span class="s">"Check eviction rates"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">Action</span><span class="o">(</span><span class="s">"Verify backup systems"</span><span class="o">)</span>
        <span class="o">);</span>
        
        <span class="c1">// Execute and document each step</span>
        <span class="k">for</span> <span class="o">(</span><span class="nc">Action</span> <span class="n">action</span> <span class="o">:</span> <span class="n">actions</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">executeAndDocument</span><span class="o">(</span><span class="n">action</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="5-capacity-planning">5. Capacity Planning</h3> <h4 id="resource-management">Resource Management</h4> <ul> <li> <strong>Regular Review</strong>: Review memory usage patterns monthly</li> <li> <strong>Predictive Planning</strong>: Use trending data for capacity planning</li> <li> <strong>Cost Analysis</strong>: Balance memory usage with cost implications</li> <li> <strong>Growth Planning</strong>: Plan for both expected and unexpected growth</li> </ul> <h4 id="planning-implementation">Planning Implementation</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CapacityPlanner</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="nc">CapacityPlan</span> <span class="nf">createPlan</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="nc">CapacityPlan</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
            <span class="o">.</span><span class="na">currentUsage</span><span class="o">(</span><span class="n">getCurrentUsage</span><span class="o">())</span>
            <span class="o">.</span><span class="na">growthRate</span><span class="o">(</span><span class="n">calculateGrowthRate</span><span class="o">())</span>
            <span class="o">.</span><span class="na">seasonalFactors</span><span class="o">(</span><span class="n">getSeasonalPatterns</span><span class="o">())</span>
            <span class="o">.</span><span class="na">costImplications</span><span class="o">(</span><span class="n">analyzeCosts</span><span class="o">())</span>
            <span class="o">.</span><span class="na">recommendedActions</span><span class="o">(</span><span class="n">generateRecommendations</span><span class="o">())</span>
            <span class="o">.</span><span class="na">build</span><span class="o">();</span>
    <span class="o">}</span>
    
    <span class="kd">private</span> <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Recommendation</span><span class="o">&gt;</span> <span class="nf">generateRecommendations</span><span class="o">()</span> <span class="o">{</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Recommendation</span><span class="o">&gt;</span> <span class="n">recommendations</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">&lt;&gt;();</span>
        
        <span class="c1">// Memory sizing recommendations</span>
        <span class="n">recommendations</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">analyzeMemorySizing</span><span class="o">());</span>
        
        <span class="c1">// Cost optimization recommendations</span>
        <span class="n">recommendations</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">analyzeCostOptimizations</span><span class="o">());</span>
        
        <span class="c1">// Performance improvement recommendations</span>
        <span class="n">recommendations</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">analyzePerformance</span><span class="o">());</span>
        
        <span class="k">return</span> <span class="n">recommendations</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="6-technical-debt-management">6. Technical Debt Management</h3> <h4 id="code-evolution">Code Evolution</h4> <ul> <li> <strong>Maintain Clean Code</strong>: Technical debt compounds quickly in memory management</li> <li> <strong>Regular Refactoring</strong>: Schedule regular refactoring sessions</li> <li> <strong>Performance Tests</strong>: Maintain comprehensive performance test suites</li> <li> <strong>Configuration Management</strong>: Keep configurations well-documented and versioned</li> </ul> <h4 id="technical-debt-tracking">Technical Debt Tracking</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">TechnicalDebtTracker</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">trackMemoryIssues</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Track known issues</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">TechnicalDebt</span><span class="o">&gt;</span> <span class="n">issues</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span>
            <span class="k">new</span> <span class="nf">TechnicalDebt</span><span class="o">(</span><span class="s">"Manual memory management in legacy code"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">TechnicalDebt</span><span class="o">(</span><span class="s">"Outdated eviction policies"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">TechnicalDebt</span><span class="o">(</span><span class="s">"Unoptimized object creation"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">TechnicalDebt</span><span class="o">(</span><span class="s">"Missing memory metrics"</span><span class="o">)</span>
        <span class="o">);</span>
        
        <span class="c1">// Prioritize and plan resolution</span>
        <span class="n">prioritizeIssues</span><span class="o">(</span><span class="n">issues</span><span class="o">);</span>
        <span class="n">createResolutionPlan</span><span class="o">(</span><span class="n">issues</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <h3 id="7-future-considerations">7. Future Considerations</h3> <h4 id="scalability-planning">Scalability Planning</h4> <ul> <li> <strong>Architecture Reviews</strong>: Regular reviews of memory architecture</li> <li> <strong>Technology Updates</strong>: Keep track of new memory management features</li> <li> <strong>Performance Improvements</strong>: Continuous performance optimization</li> <li> <strong>Cost Optimization</strong>: Regular review of memory costs and benefits</li> </ul> <h4 id="innovation-planning">Innovation Planning</h4> <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">FuturePlanning</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">planImprovements</span><span class="o">()</span> <span class="o">{</span>
        <span class="c1">// Track potential improvements</span>
        <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Improvement</span><span class="o">&gt;</span> <span class="n">improvements</span> <span class="o">=</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span>
            <span class="k">new</span> <span class="nf">Improvement</span><span class="o">(</span><span class="s">"Implement new GC algorithms"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">Improvement</span><span class="o">(</span><span class="s">"Adopt newer memory management APIs"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">Improvement</span><span class="o">(</span><span class="s">"Implement machine learning for prediction"</span><span class="o">),</span>
            <span class="k">new</span> <span class="nf">Improvement</span><span class="o">(</span><span class="s">"Automate capacity planning"</span><span class="o">)</span>
        <span class="o">);</span>
        
        <span class="c1">// Evaluate and prioritize</span>
        <span class="n">evaluateImprovements</span><span class="o">(</span><span class="n">improvements</span><span class="o">);</span>
        <span class="n">createImplementationPlan</span><span class="o">(</span><span class="n">improvements</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div> <p>These lessons learned have been critical in maintaining and improving our memory management system. They continue to guide our decisions and help us avoid common pitfalls in high-scale data processing systems.</p> <h2 id="looking-ahead">Looking Ahead</h2> <p>In <a href="https://subhadipmitra.com/blog/2022/building-a-massive-scale-real-time-data-platform-p4/">Part 4</a>, we’ll explore how we optimized our Kafka infrastructure to handle the massive throughput requirements while ensuring reliable message delivery and processing.</p> <p>Stay tuned to learn about our Kafka cluster design, configuration tuning, and operational practices.</p> </div> </article> <br> <hr> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <ul class="related-articles-list"> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/ai-deception/">AI Meta-Cognition - The Observer Effect Series</a> </li> </ul> <ul class="related-articles-list"> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/building-safer-ai-industry-response-practical-solutions/">Building Safer AI: Industry Response and the Path Forward</a> </li> </ul> <ul class="related-articles-list"> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/alignment-faking-ai-pretends-to-change-values/">Alignment Faking: When AI Pretends to Change</a> </li> </ul> <ul class="related-articles-list"> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/deliberative-alignment-training-ai-not-to-scheme/">Deliberative Alignment: Can We Train AI Not to Scheme?</a> </li> </ul> <ul class="related-articles-list"> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2025/ai-observer-effect-models-recognize-evaluation/">The Observer Effect in AI: When Models Know They're Being Tested</a> </li> </ul> <br> <div class="newsletter-form-container newsletter-signup"> <p class="newsletter-title">Strategic Insights for Technology Leaders</p> <p>Join my newsletter for exclusive content on leveraging Data, AI, and Cloud to drive digital transformation and achieve breakthrough business results. Stay informed on the latest trends, strategies, and best practices for leading in the age of intelligent systems.</p> <p><a href="/archive/" target="_blank">Read the Blog Archive in the meantime</a></p> <form class="newsletter-form" action="https://app.loops.so/api/newsletter-form/cm614n2d604nlfy1lfo7vgmo5" method="POST" style="justify-content: center"> <input class="newsletter-form-input" name="newsletter-form-input" type="email" placeholder="user@example.com" required=""> <button type="submit" class="newsletter-form-button" style="justify-content: center"> subscribe </button> <button type="button" class="newsletter-loading-button" style="justify-content: center"> Please wait... </button> </form> <div class="newsletter-success" style="justify-content: center"> <p class="newsletter-success-message">You're going to love this! Thanks for subscribing.</p> </div> <div class="newsletter-error" style="justify-content: center"> <p class="newsletter-error-message">Oops! Something went wrong, please try again</p> </div> <button class="newsletter-back-button" type="button" onmouseout='this.style.textDecoration="none"' onmouseover='this.style.textDecoration="underline"'> ← Back </button> </div> <noscript> <style>.newsletter-form-container{display:none}</style> </noscript> <div id="giscus_thread" style="max-width: 1140px; margin: 0 auto;"> <script>
      let giscusTheme = determineComputedTheme();
      let giscusAttributes = {
        src: 'https://giscus.app/client.js',
        'data-repo': 'bassrehab/bassrehab.github.io',
        'data-repo-id': 'R_kgDOLvY8Tg',
        'data-category': 'Comments',
        'data-category-id': 'DIC_kwDOLvY8Ts4CexzE',
        'data-mapping': 'title',
        'data-strict': '0',
        'data-reactions-enabled': '1',
        'data-emit-metadata': '0',
        'data-input-position': 'bottom',
        'data-theme': giscusTheme,
        'data-lang': 'en',
        crossorigin: 'anonymous',
        async: '',
      };

      let giscusScript = document.createElement('script');
      Object.entries(giscusAttributes).forEach(([key, value]) => giscusScript.setAttribute(key, value));
      document.getElementById('giscus_thread').appendChild(giscusScript);
    </script> <noscript>Please enable JavaScript to view the <a href="http://giscus.app/?ref_noscript" rel="external nofollow noopener" target="_blank">comments powered by giscus.</a> </noscript> </div> </div> </div> </div> </div> <footer class="modern-footer" role="contentinfo"> <div class="footer-container"> <div class="footer-grid"> <div class="footer-brand"> <h3>Subhadip Mitra</h3> <p> Technical Leader, Inventor, and Researcher building the future of Data &amp; Applied AI. Leading Google Cloud's practice across Southeast Asia. </p> </div> <div class="footer-section"> <h4>Explore</h4> <ul class="footer-links"> <li><a href="/">About</a></li> <li><a href="/now/">What I'm Doing Now</a></li> <li><a href="/blog/">Blog</a></li> <li><a href="/publications/">Publications</a></li> <li><a href="/repositories/">Repositories</a></li> </ul> </div> <div class="footer-section"> <h4>Connect</h4> <ul class="footer-links"> <li><a href="mailto:contact@subhadipmitra.com">Email</a></li> <li><a href="https://calendly.com/subhadipmitra" target="_blank" rel="external nofollow noopener">Schedule a Call</a></li> <li><a href="https://linkedin.com/in/subhadip-mitra" target="_blank" rel="external nofollow noopener">LinkedIn</a></li> <li><a href="https://github.com/subhadipmitra" target="_blank" rel="external nofollow noopener">GitHub</a></li> </ul> </div> </div> <div class="footer-bottom"> <div class="footer-copyright"> © 2025 Subhadip Mitra. Some Rights Reserved. Last updated: October 15, 2025. </div> <div class="footer-social"> <a href="https://linkedin.com/in/subhadip-mitra" target="_blank" aria-label="LinkedIn" rel="external nofollow noopener"> <i class="fab fa-linkedin-in"></i> </a> <a href="https://github.com/bassrehab" target="_blank" aria-label="GitHub" rel="external nofollow noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/bassrehab" target="_blank" aria-label="Twitter" rel="external nofollow noopener"> <i class="fab fa-twitter"></i> </a> <a href="mailto:contact@subhadipmitra.com" aria-label="Email"> <i class="fas fa-envelope"></i> </a> </div> </div> </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-TW7YQ5XPC6"></script> <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-TW7YQ5XPC6');
  </script> <script defer src="/assets/js/google-analytics-setup.js?12374742c4b1801ba82226e617af7e2d"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> <script defer src="/assets/js/newsletter.js?c3d0931971ee96e9df74ba70526c3130"></script> </body> </html>