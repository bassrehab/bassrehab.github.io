<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="R3nPzqP9nO2aTgysGUiU3t-pw3wi1xuUuKVaMrimuck"> <meta name="msvalidate.01" content="04fec5e0d64b1c9bc788e98f81ee2a78"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Introducing OConsent - Open Consent Protocol | Subhadip Mitra </title> <meta name="author" content="Subhadip Mitra"> <meta name="description" content="OConsent is a blockchain-based platform that enables transparent processing of personal data, empowering users and data controllers to manage consent and privacy."> <meta name="keywords" content="subhadip-mitra,subhadip,google,google-cloud,data-&amp;-analytics,ai-innovations,enterprise-technology-leadership,digital-transformation,machine-learning-models,cloud-technologies,quantum-computing,technology-consulting,singapore,researcher,llm,genai"> <meta property="og:site_name" content="Subhadip Mitra"> <meta property="og:type" content="article"> <meta property="og:title" content="Subhadip Mitra | Introducing OConsent - Open Consent Protocol"> <meta property="og:url" content="https://subhadipmitra.com/blog/2020/introducing-oconsent-open-consent-protocol/"> <meta property="og:description" content="OConsent is a blockchain-based platform that enables transparent processing of personal data, empowering users and data controllers to manage consent and privacy."> <meta property="og:image" content="https://subhadipmitra.com/assets/img/og/introducing-oconsent-open-consent-protocol.png"> <meta property="og:image:width" content="1200"> <meta property="og:image:height" content="630"> <meta property="og:locale" content="en"> <meta property="og:logo" content="https://subhadipmitra.com/assets/img/prof_pic.jpg"> <meta name="twitter:card" content="summary_large_image"> <meta name="twitter:title" content="Introducing OConsent - Open Consent Protocol"> <meta name="twitter:description" content="OConsent is a blockchain-based platform that enables transparent processing of personal data, empowering users and data controllers to manage consent and privacy."> <meta name="twitter:image" content="https://subhadipmitra.com/assets/img/og/introducing-oconsent-open-consent-protocol.png"> <meta property="article:published_time" content="2020-12-10T00:20:21+00:00"> <meta property="article:author" content="Subhadip Mitra"> <meta property="article:tag" content="system-design"> <meta property="article:tag" content="privacy"> <meta property="article:tag" content="consent-management"> <meta property="article:tag" content="blockchain"> <meta property="article:tag" content="cryptography"> <meta property="article:section" content="system-design"> <meta property="article:section" content="platform"> <meta property="article:section" content="cryptography"> <meta property="article:section" content="blockchain"> <script type="application/ld+json">
      {
          "@context": "https://schema.org",
          "@type": "BlogPosting",
          "mainEntityOfPage": {
              "@type": "WebPage",
              "@id": "https://subhadipmitra.com/blog/2020/introducing-oconsent-open-consent-protocol/"
          },
          "headline": "Introducing OConsent - Open Consent Protocol",
          "description": "OConsent is a blockchain-based platform that enables transparent processing of personal data, empowering users and data controllers to manage consent and privacy.",
          "url": "https://subhadipmitra.com/blog/2020/introducing-oconsent-open-consent-protocol/",
          "datePublished": "2020-12-10T00:20:21+00:00",
          
          "dateModified": "2020-12-10T00:20:21+00:00",
          
          "wordCount": 3899,
          "timeRequired": "PT20M",
          
          "image": "https://subhadipmitra.com/assets/img/blog/oconsent-hashing.png",
          
          
          "keywords": "system-design, privacy, consent-management, blockchain, cryptography",
          
          
          "articleSection": "system-design",
          
          "author": {
              "@type": "Person",
              "name": "Subhadip Mitra",
              "url": "https://subhadipmitra.com",
              "jobTitle": "Data and Analytics Manager, Site Lead Southeast Asia",
              "worksFor": {
                  "@type": "Organization",
                  "name": "Google Cloud"
              },
              "sameAs": [
                  "https://linkedin.com/in/subhadip-mitra",
                  "https://github.com/bassrehab",
                  "https://twitter.com/bassrehab"
              ]
          },
          "publisher": {
              "@type": "Organization",
              "name": "Subhadip Mitra",
              "url": "https://subhadipmitra.com",
              "logo": {
                  "@type": "ImageObject",
                  "url": "https://subhadipmitra.com/assets/img/prof_pic.jpg"
              }
          },
          "isPartOf": {
              "@type": "Blog",
              "name": "binary breakthroughs",
              "url": "https://subhadipmitra.com/blog/"
          }
          
      }
    </script> <script type="application/ld+json">
      {
          "@context": "https://schema.org",
          "@type": "BreadcrumbList",
          "itemListElement": [
              {
                  "@type": "ListItem",
                  "position": 1,
                  "name": "Home",
                  "item": "https://subhadipmitra.com"
              },
              {
                  "@type": "ListItem",
                  "position": 2,
                  "name": "Blog",
                  "item": "https://subhadipmitra.com/blog/"
              },
              
              {
                  "@type": "ListItem",
                  "position": 3,
                  "name": "System-design",
                  "item": "https://subhadipmitra.com/blog/category/system-design"
              },
              {
                  "@type": "ListItem",
                  "position": 4,
                  "name": "Introducing OConsent - Open Consent Protocol",
                  "item": "https://subhadipmitra.com/blog/2020/introducing-oconsent-open-consent-protocol/"
              }
              
          ]
      }
    </script> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" href="/assets/css/scholar-icons.css?62b2ac103a88034e6882a5be5f3e2772"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300..700&amp;family=Inter+Tight:ital,wght@0,100..900;1,100..900&amp;family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link defer href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="/assets/img/favicon.png?058310854f7b3c920f894a1d42c3c47b"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://subhadipmitra.com/blog/2020/introducing-oconsent-open-consent-protocol/"> <script src="/assets/js/theme.js?33a804e644f2507dbddc853404eccc7a"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>
    initTheme();
  </script> </head> <body class="fixed-top-nav sticky-bottom-footer"> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-md fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Subhadip</span> Mitra </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/now/">now </a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item "> <a class="nav-link" href="/bets/">bets </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">more </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/repositories/">repositories</a> <a class="dropdown-item " href="/reading-list/">reading list</a> <a class="dropdown-item " href="/contact/">contact</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="https://artemis.subhadipmitra.com" rel="external nofollow noopener" target="_blank">ARTEMIS</a> <a class="dropdown-item " href="https://upir.subhadipmitra.com" rel="external nofollow noopener" target="_blank">UPIR</a> <a class="dropdown-item " href="https://ai-metacognition-toolkit.subhadipmitra.com/" rel="external nofollow noopener" target="_blank">AI Metacognition</a> <a class="dropdown-item " href="https://docs.smppgateway.io" rel="external nofollow noopener" target="_blank">SMPP Gateway</a> <a class="dropdown-item " href="https://iso8583.subhadipmitra.com" rel="external nofollow noopener" target="_blank">ISO8583</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="https://symmetry.subhadipmitra.com/" rel="external nofollow noopener" target="_blank">symmetry</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="row"> <div class="col-sm-3"> <div id="toc-wrapper" class="toc-wrapper sticky-top"> <div class="toc-header"> <span class="toc-title">Contents</span> <button class="toc-toggle" aria-label="Toggle table of contents" title="Hide contents"> <i class="fas fa-chevron-up"></i> </button> </div> <nav id="toc-sidebar" class="toc-nav"></nav> </div> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">Introducing OConsent - Open Consent Protocol</h1> <p class="post-meta"> Created on December 10, 2020 </p> <p class="post-tags"> <a href="/blog/2020"> <i class="fa-solid fa-calendar fa-sm"></i> 2020 </a>   ·   <a href="/blog/tag/system-design"> <i class="fa-solid fa-hashtag fa-sm"></i> system-design</a>   <a href="/blog/tag/privacy"> <i class="fa-solid fa-hashtag fa-sm"></i> privacy</a>   <a href="/blog/tag/consent-management"> <i class="fa-solid fa-hashtag fa-sm"></i> consent-management</a>   <a href="/blog/tag/blockchain"> <i class="fa-solid fa-hashtag fa-sm"></i> blockchain</a>   <a href="/blog/tag/cryptography"> <i class="fa-solid fa-hashtag fa-sm"></i> cryptography</a>   ·   <a href="/blog/category/system-design"> <i class="fa-solid fa-tag fa-sm"></i> system-design</a>   <a href="/blog/category/platform"> <i class="fa-solid fa-tag fa-sm"></i> platform</a>   <a href="/blog/category/cryptography"> <i class="fa-solid fa-tag fa-sm"></i> cryptography</a>   <a href="/blog/category/blockchain"> <i class="fa-solid fa-tag fa-sm"></i> blockchain</a> </p> </header> <div class="audio-reader-container"> <div class="audio-reader-compact"> <button class="audio-trigger" id="audio-trigger" aria-label="Open audio player"> <i class="fas fa-headphones"></i> <span>Listen to article</span> <i class="fas fa-chevron-down audio-trigger-icon"></i> </button> <div class="audio-player-expanded" id="audio-player-expanded"> <div class="audio-player-body"> <div class="audio-info-bar"> <i class="fas fa-info-circle"></i> <span>Browser text-to-speech • Quality varies by device</span> </div> <div class="audio-controls-row"> <button class="audio-btn audio-btn-play" id="tts-play" aria-label="Play"> <i class="fas fa-play"></i> <span id="play-text">Play</span> </button> <button class="audio-btn audio-btn-pause" id="tts-pause" style="display: none" aria-label="Pause"> <i class="fas fa-pause"></i> <span>Pause</span> </button> <button class="audio-btn audio-btn-stop" id="tts-stop" aria-label="Stop"> <i class="fas fa-stop"></i> </button> <div class="audio-speed-control"> <label for="tts-rate" class="audio-speed-label"> <i class="fas fa-gauge-high"></i> <span id="tts-rate-value">1.0x</span> </label> <input id="tts-rate" type="range" min="0.5" max="2" step="0.1" value="1" class="audio-speed-slider"> </div> </div> <div class="audio-voice-row"> <label for="tts-voice" class="audio-voice-label"> <i class="fas fa-microphone"></i> <span>Voice:</span> </label> <select id="tts-voice" class="audio-voice-select"> <option value="">Loading voices...</option> </select> </div> <div class="audio-progress-section"> <div class="audio-progress-info"> <span><i class="fas fa-circle-notch"></i> Progress</span> <span id="tts-progress">0%</span> </div> <div class="progress" style="height: 4px"> <div class="progress-bar" id="tts-progress-bar" role="progressbar" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div> </div> </div> </div> </div> </div> </div> <style>.audio-reader-container{margin:1.5rem 0;font-family:var(--global-font-family,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif)}.audio-reader-compact{position:relative}.audio-trigger{display:inline-flex;align-items:center;gap:.5rem;padding:.5rem 1rem;background:var(--global-code-bg-color,#f8f9fa);border:1px solid var(--global-divider-color,#dee2e6);border-radius:.375rem;color:var(--global-text-color,#212529);font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s ease;font-family:inherit}.audio-trigger:hover{background:var(--global-bg-color,#fff);border-color:var(--global-theme-color,#0d6efd);color:var(--global-theme-color,#0d6efd);box-shadow:0 .125rem .25rem rgba(0,0,0,0.075)}.audio-trigger i:first-child{font-size:1rem;color:var(--global-theme-color,#0d6efd)}.audio-trigger-icon{font-size:.75rem;margin-left:.25rem;transition:transform .3s ease;color:var(--global-text-color-light,#6c757d)}.audio-trigger.active .audio-trigger-icon{transform:rotate(180deg)}.audio-trigger:focus{outline:2px solid var(--global-theme-color,#0d6efd);outline-offset:2px}.audio-player-expanded{display:none;margin-top:.75rem;background:var(--global-bg-color,#fff);border:1px solid var(--global-divider-color,#dee2e6);border-radius:.5rem;box-shadow:0 .25rem .75rem rgba(0,0,0,0.05);animation:slideDown .3s ease}.audio-player-expanded.show{display:block}@keyframes slideDown{from{opacity:0;transform:translateY(-0.5rem)}to{opacity:1;transform:translateY(0)}}.audio-player-body{padding:1rem}.audio-info-bar{display:flex;align-items:center;gap:.5rem;padding:.625rem .75rem;background:var(--global-code-bg-color,#f8f9fa);border-left:2px solid var(--global-theme-color,#0d6efd);border-radius:.25rem;font-size:.8125rem;color:var(--global-text-color-light,#6c757d);margin-bottom:1rem}.audio-info-bar i{color:var(--global-theme-color,#0d6efd);font-size:.875rem}.audio-controls-row{display:flex;align-items:center;gap:.5rem;margin-bottom:.875rem;flex-wrap:wrap}.audio-btn{display:inline-flex;align-items:center;gap:.375rem;padding:.375rem .875rem;border:1px solid transparent;border-radius:.375rem;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .15s ease;font-family:inherit;color:#fff}.audio-btn i{font-size:.8125rem}.audio-btn span{color:#fff}.audio-btn:hover:not(:disabled){transform:translateY(-1px);box-shadow:0 .125rem .375rem rgba(0,0,0,0.15)}.audio-btn:active:not(:disabled){transform:translateY(0)}.audio-btn:disabled{opacity:.6;cursor:not-allowed}.audio-btn-play{background:var(--global-theme-color,#0d6efd);border-color:var(--global-theme-color,#0d6efd)}.audio-btn-play:hover:not(:disabled){background:color-mix(in srgb,var(--global-theme-color,#0d6efd) 85%,black);border-color:color-mix(in srgb,var(--global-theme-color,#0d6efd) 80%,black)}.audio-btn-play.playing{background:#198754;border-color:#198754}.audio-btn-pause{background:#6c757d;border-color:#6c757d}.audio-btn-pause:hover:not(:disabled){background:#5c636a;border-color:#565e64}.audio-btn-stop{background:transparent;color:#dc3545;border-color:#dc3545;padding:.375rem .625rem}.audio-btn-stop:hover:not(:disabled){background:#dc3545;color:#fff;border-color:#dc3545}.audio-speed-control{display:flex;align-items:center;gap:.5rem;margin-left:auto}.audio-speed-label{display:flex;align-items:center;gap:.375rem;font-size:.8125rem;font-weight:500;color:var(--global-text-color,#212529);margin:0;white-space:nowrap}.audio-speed-label i{color:var(--global-theme-color,#0d6efd);font-size:.875rem}.audio-speed-slider{width:80px;height:4px;-webkit-appearance:none;appearance:none;background:var(--global-divider-color,#dee2e6);border-radius:2px;outline:0}.audio-speed-slider::-webkit-slider-thumb{-webkit-appearance:none;appearance:none;width:14px;height:14px;border-radius:50%;background:var(--global-theme-color,#0d6efd);cursor:pointer;transition:transform .15s ease}.audio-speed-slider::-webkit-slider-thumb:hover{transform:scale(1.2)}.audio-speed-slider::-moz-range-thumb{width:14px;height:14px;border-radius:50%;background:var(--global-theme-color,#0d6efd);border:0;cursor:pointer;transition:transform .15s ease}.audio-speed-slider::-moz-range-thumb:hover{transform:scale(1.2)}.audio-voice-row{display:flex;align-items:center;gap:.75rem;margin-bottom:.875rem}.audio-voice-label{display:flex;align-items:center;gap:.375rem;font-size:.8125rem;font-weight:500;color:var(--global-text-color,#212529);margin:0;white-space:nowrap}.audio-voice-label i{color:var(--global-theme-color,#0d6efd);font-size:.875rem}.audio-voice-select{flex:1;padding:.375rem .75rem;border:1px solid var(--global-divider-color,#dee2e6);border-radius:.375rem;font-size:.8125rem;background:var(--global-bg-color,#fff);color:var(--global-text-color,#212529);cursor:pointer;transition:border-color .15s ease}.audio-voice-select:hover{border-color:var(--global-theme-color,#0d6efd)}.audio-voice-select:focus{outline:0;border-color:var(--global-theme-color,#0d6efd);box-shadow:0 0 0 .2rem rgba(13,110,253,0.25)}.audio-progress-section{margin-top:.75rem;padding-top:.75rem;border-top:1px solid var(--global-divider-color,#e9ecef)}
.audio-progress-info{display:flex;justify-content:space-between;align-items:center;font-size:.8125rem;color:var(--global-text-color-light,#6c757d);margin-bottom:.5rem}.audio-progress-info i{margin-right:.25rem;color:var(--global-theme-color,#0d6efd);font-size:.75rem}.progress{border-radius:2px;overflow:hidden;background:var(--global-divider-color,#e9ecef)}.progress-bar{background:var(--global-theme-color,#0d6efd);transition:width .6s ease}[data-theme="dark"] .audio-trigger,body.dark-mode .audio-trigger{background:rgba(255,255,255,0.05);border-color:var(--global-divider-color,#454545);color:var(--global-text-color,#e9ecef)}[data-theme="dark"] .audio-trigger:hover,body.dark-mode .audio-trigger:hover{background:rgba(255,255,255,0.08)}[data-theme="dark"] .audio-player-expanded,body.dark-mode .audio-player-expanded{background:var(--global-bg-color,#1e1e1e);border-color:var(--global-divider-color,#454545)}[data-theme="dark"] .audio-info-bar,body.dark-mode .audio-info-bar{background:rgba(255,255,255,0.03)}[data-theme="dark"] .audio-voice-select,body.dark-mode .audio-voice-select{background:var(--global-bg-color,#1e1e1e);border-color:var(--global-divider-color,#454545);color:var(--global-text-color,#e9ecef)}[data-theme="dark"] .progress,body.dark-mode .progress{background:rgba(255,255,255,0.1)}@media(max-width:576px){.audio-trigger span{display:none}.audio-controls-row{flex-wrap:wrap}.audio-btn span{display:none}.audio-btn{padding:.5rem .75rem}.audio-btn i{font-size:1rem}.audio-speed-control{width:100%;margin-left:0;margin-top:.5rem}.audio-speed-slider{flex:1}.audio-voice-row{flex-direction:column;align-items:stretch}}@media print{.audio-reader-container{display:none!important}}@media(prefers-reduced-motion:reduce){.audio-trigger,.audio-btn,.progress-bar,.audio-player-expanded{transition:none;animation:none}}</style> <script>
  (function () {
    "use strict";

    if (document.readyState === "loading") {
      document.addEventListener("DOMContentLoaded", init);
    } else {
      init();
    }

    function init() {
      if (!("speechSynthesis" in window)) {
        document.querySelector(".audio-reader-container").innerHTML = `
        <div class="audio-reader-compact">
          <div class="alert alert-warning d-flex align-items-center" role="alert" style="font-size: 0.875rem;">
            <i class="fas fa-exclamation-triangle me-2"></i>
            <div>Text-to-speech not supported in this browser.</div>
          </div>
        </div>
      `;
        return;
      }

      const synth = window.speechSynthesis;
      let utterance = null;
      let isPaused = false;

      const triggerBtn = document.getElementById("audio-trigger");
      const expandedPlayer = document.getElementById("audio-player-expanded");
      const playBtn = document.getElementById("tts-play");
      const pauseBtn = document.getElementById("tts-pause");
      const stopBtn = document.getElementById("tts-stop");
      const voiceSelect = document.getElementById("tts-voice");
      const rateSlider = document.getElementById("tts-rate");
      const rateValue = document.getElementById("tts-rate-value");
      const progressText = document.getElementById("tts-progress");
      const progressBar = document.getElementById("tts-progress-bar");
      const playText = document.getElementById("play-text");

      const possibleSelectors = [
        ".post-content",
        "article .post-content",
        ".post .post-content",
        "article.post",
        ".post",
        "article",
        "main article",
        "main .container",
        "main",
        ".l-main",
        ".content",
      ];

      let articleElement = null;
      for (const selector of possibleSelectors) {
        articleElement = document.querySelector(selector);
        if (articleElement) break;
      }

      if (!articleElement) {
        console.warn("Audio Reader: Could not find article content");
        return;
      }

      const clonedContent = articleElement.cloneNode(true);
      const elementsToRemove = [
        "pre",
        "code",
        "script",
        "style",
        "nav",
        ".audio-reader-container",
        ".citation",
        ".giscus",
        ".utterances",
        ".navigation",
        ".pagination",
        ".social",
        ".share",
        "header",
        "footer",
        ".header",
        ".footer",
        ".sidebar",
      ];

      elementsToRemove.forEach((selector) => {
        clonedContent.querySelectorAll(selector).forEach((el) => el.remove());
      });

      const articleText = clonedContent.innerText
        .replace(/\s+/g, " ")
        .replace(/\n{3,}/g, "\n\n")
        .trim();

      if (!articleText || articleText.length < 100) {
        console.warn("Audio Reader: Article too short");
        return;
      }

      // Toggle player
      triggerBtn.addEventListener("click", function () {
        expandedPlayer.classList.toggle("show");
        this.classList.toggle("active");
        localStorage.setItem("audioPlayerExpanded", expandedPlayer.classList.contains("show"));
      });

      // Load voices
      function loadVoices() {
        const voices = synth.getVoices();
        if (voices.length === 0) {
          setTimeout(loadVoices, 100);
          return;
        }

        voiceSelect.innerHTML = '<option value="">Default Voice</option>';

        const englishVoices = voices.filter((v) => v.lang.startsWith("en"));
        const preferredVoices = englishVoices.filter(
          (v) =>
            v.name.includes("Google") ||
            v.name.includes("Microsoft") ||
            v.name.includes("Premium") ||
            v.name.includes("Enhanced") ||
            v.name.includes("Natural")
        );
        const standardEnglishVoices = englishVoices.filter((v) => !preferredVoices.includes(v));
        const otherVoices = voices.filter((v) => !v.lang.startsWith("en"));

        preferredVoices.forEach((voice) => {
          const option = document.createElement("option");
          option.value = voices.indexOf(voice);
          option.textContent = `${voice.name} (${voice.lang})`;
          voiceSelect.appendChild(option);
        });

        if (standardEnglishVoices.length > 0) {
          const optgroup = document.createElement("optgroup");
          optgroup.label = "Other English";
          standardEnglishVoices.forEach((voice) => {
            const option = document.createElement("option");
            option.value = voices.indexOf(voice);
            option.textContent = `${voice.name} (${voice.lang})`;
            optgroup.appendChild(option);
          });
          voiceSelect.appendChild(optgroup);
        }

        if (otherVoices.length > 0) {
          const optgroup = document.createElement("optgroup");
          optgroup.label = "Other Languages";
          otherVoices.forEach((voice) => {
            const option = document.createElement("option");
            option.value = voices.indexOf(voice);
            option.textContent = `${voice.name} (${voice.lang})`;
            optgroup.appendChild(option);
          });
          voiceSelect.appendChild(optgroup);
        }
      }

      loadVoices();
      if (synth.addEventListener) {
        synth.addEventListener("voiceschanged", loadVoices);
      }

      function updateProgress(current, total) {
        const percent = Math.min(100, Math.round((current / total) * 100));
        progressText.textContent = `${percent}%`;
        progressBar.style.width = `${percent}%`;
        progressBar.setAttribute("aria-valuenow", percent);
      }

      function updatePlayButton(isPlaying) {
        const icon = playBtn.querySelector("i");
        if (isPlaying) {
          icon.className = "fas fa-circle-dot";
          playText.textContent = "Playing";
          playBtn.classList.add("playing");
        } else {
          icon.className = "fas fa-play";
          playText.textContent = "Play";
          playBtn.classList.remove("playing");
        }
      }

      function speak() {
        if (isPaused) {
          synth.resume();
          isPaused = false;
          updatePlayButton(true);
          pauseBtn.style.display = "inline-flex";
          return;
        }

        synth.cancel();
        utterance = new SpeechSynthesisUtterance(articleText);

        if (voiceSelect.value) {
          const voices = synth.getVoices();
          utterance.voice = voices[parseInt(voiceSelect.value)];
        }

        utterance.rate = parseFloat(rateSlider.value);
        utterance.pitch = 1;
        utterance.volume = 1;

        utterance.onstart = function () {
          updatePlayButton(true);
          pauseBtn.style.display = "inline-flex";
          playBtn.disabled = false;
        };

        utterance.onend = function () {
          updatePlayButton(false);
          pauseBtn.style.display = "none";
          updateProgress(100, 100);
          setTimeout(() => updateProgress(0, 100), 1000);
        };

        utterance.onboundary = function (event) {
          updateProgress(event.charIndex, articleText.length);
        };

        utterance.onerror = function (event) {
          if (event.error !== "interrupted" && event.error !== "canceled") {
            alert("Playback error. Try a different voice.");
          }
          updatePlayButton(false);
          pauseBtn.style.display = "none";
        };

        playBtn.disabled = true;
        synth.speak(utterance);
      }

      function pause() {
        if (synth.speaking && !isPaused) {
          synth.pause();
          isPaused = true;
          const icon = playBtn.querySelector("i");
          icon.className = "fas fa-play";
          playText.textContent = "Resume";
          playBtn.classList.remove("playing");
          pauseBtn.style.display = "none";
        }
      }

      function stop() {
        synth.cancel();
        isPaused = false;
        updatePlayButton(false);
        pauseBtn.style.display = "none";
        updateProgress(0, 100);
      }

      playBtn.addEventListener("click", speak);
      pauseBtn.addEventListener("click", pause);
      stopBtn.addEventListener("click", stop);

      rateSlider.addEventListener("input", function (e) {
        rateValue.textContent = `${parseFloat(e.target.value).toFixed(1)}x`;
      });

      window.addEventListener("beforeunload", function () {
        synth.cancel();
      });

      if (localStorage.getItem("audioPlayerExpanded") === "true") {
        setTimeout(() => {
          expandedPlayer.classList.add("show");
          triggerBtn.classList.add("active");
        }, 100);
      }
    }
  })();
</script> <article class="post-content"> <div id="markdown-content"> <p>Websites, mobile apps, and IoT devices collect massive amounts of personal data. Cookies, tracking pixels, device IDs - the list goes on. Most users have no idea what’s being collected or how it’s used. GDPR and similar regulations tried to fix this by requiring informed consent, but the implementation is often a joke: walls of legalese that nobody reads, buried opt-out buttons, dark patterns everywhere.</p> <p>I spent the last few months designing OConsent, a protocol that takes a different approach. Instead of trusting companies to honor consent preferences, OConsent uses blockchain to make consent agreements cryptographically verifiable and tamper-proof. The idea is simple: if you can’t trust the data controller to be honest about consent, remove the need for trust entirely.</p> <p>This post walks through how it works, with code examples you can actually run.</p> <p><br></p> <h1 id="oconsent-preview">OConsent Preview</h1> <p><br></p> <p>Following are the key steps of the Open Consent creation -</p> <ol> <li> <p><strong>Agreement Seed Creation</strong>:</p> <ul> <li>A unique identifier (UUID v4) is generated, referred to as the “Agreement Seed.”</li> <li>The Data Controller signs this seed with their private key to initiate the creation of a consent agreement.</li> </ul> </li> <li> <p><strong>JSON-LD Consent Agreement</strong>:</p> <ul> <li>This step involves the creation of a JSON-LD (JavaScript Object Notation for Linked Data) formatted consent agreement.</li> <li>Both the Data Subject (the user) and the Data Controller (the service provider) sign this agreement with their respective private keys.</li> <li>The agreement includes a hash (a cryptographic representation) of its content, ensuring integrity and non-repudiation.</li> </ul> </li> <li> <p><strong>Consent Agreement Hash</strong>:</p> <ul> <li>This is essentially a confirmation step where the hash of the signed agreement is combined with a timestamp hash provided by a Time Stamping Authority, which also signs it with its private key.</li> <li>This ensures the agreement is not only signed but also timestamped to establish exactly when the consent was recorded.</li> </ul> </li> <li> <p><strong>JSON-LD Consent Proof</strong>:</p> <ul> <li>The signed and timestamped hash of the consent agreement is then placed into a JSON-LD structured proof.</li> <li>This proof contains the agreement hash and the timestamp hash, ready for the next step.</li> </ul> </li> <li> <p><strong>Embedding in Blockchain</strong>:</p> <ul> <li>The JSON-LD Consent Proof is ready to be embedded into a local blockchain system.</li> <li>Additionally, it’s “fingerprinted” on a global blockchain, ensuring it can be verified independently anywhere in the world.</li> </ul> </li> <li> <p><strong>Public Key Verification</strong>:</p> <ul> <li>The final step involves storing the public keys of both the Data Subject and the Data Controller on the platform.</li> <li>These keys can be used to verify the signatures on the consent agreement, ensuring that the stakeholders who signed the documents are indeed who they claim to be.</li> </ul> </li> </ol> <p>This process enhances the security and transparency of data consent agreements, leveraging blockchain’s decentralized and immutable characteristics to protect user data and ensure compliance with data privacy laws.</p> <p><br></p> <h2 id="illustrative-programs">Illustrative Programs</h2> <h3 id="python-program-to-generate-json-ld-consent-proof">Python Program to Generate JSON-LD Consent Proof</h3> <p>The below program will generate a consent agreement, sign it with private keys from both the Data Controller and the Data Subject, and then timestamp it using a simulated Time Stamping Authority (NIST in this scenario).</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">cryptography.hazmat.primitives</span> <span class="kn">import</span> <span class="n">hashes</span>
<span class="kn">from</span> <span class="n">cryptography.hazmat.primitives.asymmetric</span> <span class="kn">import</span> <span class="n">padding</span><span class="p">,</span> <span class="n">rsa</span>
<span class="kn">from</span> <span class="n">cryptography.hazmat.primitives.serialization</span> <span class="kn">import</span> <span class="n">Encoding</span><span class="p">,</span> <span class="n">PublicFormat</span>
<span class="kn">import</span> <span class="n">json</span>
<span class="kn">import</span> <span class="n">uuid</span>
<span class="kn">from</span> <span class="n">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="k">class</span> <span class="nc">ConsentProofGenerator</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="c1"># Initialize keys for Data Controller, Data Subject, and Time Stamping Authority (Step 1)
</span>        <span class="n">self</span><span class="p">.</span><span class="n">dc_private_key</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">dc_public_key</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">generate_keys</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">ds_private_key</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">ds_public_key</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">generate_keys</span><span class="p">()</span>
        <span class="n">self</span><span class="p">.</span><span class="n">tsa_private_key</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">tsa_public_key</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">generate_keys</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">generate_keys</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s"> Generate RSA public and private keys (Step 1) </span><span class="sh">"""</span>
        <span class="n">private_key</span> <span class="o">=</span> <span class="n">rsa</span><span class="p">.</span><span class="nf">generate_private_key</span><span class="p">(</span>
            <span class="n">public_exponent</span><span class="o">=</span><span class="mi">65537</span><span class="p">,</span>
            <span class="n">key_size</span><span class="o">=</span><span class="mi">2048</span>
        <span class="p">)</span>
        <span class="n">public_key</span> <span class="o">=</span> <span class="n">private_key</span><span class="p">.</span><span class="nf">public_key</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">private_key</span><span class="p">,</span> <span class="n">public_key</span>

    <span class="k">def</span> <span class="nf">sign_data</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">private_key</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s"> Sign the data using the private key (Step 3) </span><span class="sh">"""</span>
        <span class="n">signature</span> <span class="o">=</span> <span class="n">private_key</span><span class="p">.</span><span class="nf">sign</span><span class="p">(</span>
            <span class="n">data</span><span class="p">.</span><span class="nf">encode</span><span class="p">(),</span>
            <span class="n">padding</span><span class="p">.</span><span class="nc">PSS</span><span class="p">(</span>
                <span class="n">mgf</span><span class="o">=</span><span class="n">padding</span><span class="p">.</span><span class="nc">MGF1</span><span class="p">(</span><span class="n">hashes</span><span class="p">.</span><span class="nc">SHA256</span><span class="p">()),</span>
                <span class="n">salt_length</span><span class="o">=</span><span class="n">padding</span><span class="p">.</span><span class="n">PSS</span><span class="p">.</span><span class="n">MAX_LENGTH</span>
            <span class="p">),</span>
            <span class="n">hashes</span><span class="p">.</span><span class="nc">SHA256</span><span class="p">()</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="n">signature</span><span class="p">.</span><span class="nf">hex</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">generate_hash</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s"> Generate SHA-256 hash of the data (Step 4) </span><span class="sh">"""</span>
        <span class="n">digest</span> <span class="o">=</span> <span class="n">hashes</span><span class="p">.</span><span class="nc">Hash</span><span class="p">(</span><span class="n">hashes</span><span class="p">.</span><span class="nc">SHA256</span><span class="p">())</span>
        <span class="n">digest</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="nf">encode</span><span class="p">())</span>
        <span class="k">return</span> <span class="n">digest</span><span class="p">.</span><span class="nf">finalize</span><span class="p">().</span><span class="nf">hex</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">generate_monetization_scope</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s"> Generate sample monetization scope based on assumed AWS S3 data storage (Monetization Scope) </span><span class="sh">"""</span>
        <span class="n">s3_uri</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">generate_s3_uri</span><span class="p">(</span><span class="sh">"</span><span class="s">data-analytics</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">datasets/ml-training-data.csv</span><span class="sh">"</span><span class="p">)</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="sh">"</span><span class="s">storage</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">AWS S3</span><span class="sh">"</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">data_usage</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="sh">"</span><span class="s">Data analysis</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">Machine learning model training</span><span class="sh">"</span><span class="p">],</span>
            <span class="sh">"</span><span class="s">s3_uri</span><span class="sh">"</span><span class="p">:</span> <span class="n">s3_uri</span>
        <span class="p">}</span>

    <span class="k">def</span> <span class="nf">generate_s3_uri</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">bucket_name</span><span class="p">,</span> <span class="n">file_path</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s"> Generate an S3 URI for the specified bucket and file path (Monetization Scope) </span><span class="sh">"""</span>
        <span class="k">return</span> <span class="sa">f</span><span class="sh">"</span><span class="s">s3://</span><span class="si">{</span><span class="n">bucket_name</span><span class="si">}</span><span class="s">/</span><span class="si">{</span><span class="n">file_path</span><span class="si">}</span><span class="sh">"</span>

    <span class="k">def</span> <span class="nf">create_consent_proof</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="sh">"""</span><span class="s"> Generate the JSON-LD Consent Proof including all cryptographic signatures and hashes (Step 5 and 6) </span><span class="sh">"""</span>
        <span class="n">consent_agreement</span> <span class="o">=</span> <span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">({</span>
            <span class="sh">"</span><span class="s">agreement_seed</span><span class="sh">"</span><span class="p">:</span> <span class="nf">str</span><span class="p">(</span><span class="n">uuid</span><span class="p">.</span><span class="nf">uuid4</span><span class="p">()),</span>  <span class="c1"># Agreement Seed creation (Step 2)
</span>            <span class="sh">"</span><span class="s">data</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">Example data content stored in AWS S3</span><span class="sh">"</span>
        <span class="p">},</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

        <span class="c1"># Signatures by Data Controller and Data Subject (Step 3)
</span>        <span class="n">dc_signature</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">sign_data</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">dc_private_key</span><span class="p">,</span> <span class="n">consent_agreement</span><span class="p">)</span>
        <span class="n">ds_signature</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">sign_data</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">ds_private_key</span><span class="p">,</span> <span class="n">consent_agreement</span><span class="p">)</span>

        <span class="c1"># Hash and timestamp (Step 4 and 5)
</span>        <span class="n">consent_agreement_hash</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">generate_hash</span><span class="p">(</span><span class="n">consent_agreement</span> <span class="o">+</span> <span class="n">dc_signature</span> <span class="o">+</span> <span class="n">ds_signature</span><span class="p">)</span>
        <span class="n">timestamp</span> <span class="o">=</span> <span class="n">datetime</span><span class="p">.</span><span class="nf">now</span><span class="p">().</span><span class="nf">isoformat</span><span class="p">()</span>
        <span class="n">timestamped_data</span> <span class="o">=</span> <span class="n">consent_agreement_hash</span> <span class="o">+</span> <span class="n">timestamp</span>
        <span class="n">timestamp_hash</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">generate_hash</span><span class="p">(</span><span class="n">timestamped_data</span><span class="p">)</span>
        <span class="n">signed_timestamp</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="nf">sign_data</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">tsa_private_key</span><span class="p">,</span> <span class="n">timestamped_data</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">json</span><span class="p">.</span><span class="nf">dumps</span><span class="p">({</span>
            <span class="sh">"</span><span class="s">@context</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">https://w3id.org/oconsent/v1</span><span class="sh">"</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">type</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">OConsent - Open Consent Agreement</span><span class="sh">"</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">agreement_hash_id</span><span class="sh">"</span><span class="p">:</span> <span class="n">consent_agreement_hash</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">agreement_version</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">1.01</span><span class="sh">"</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">linked_agreement_hash_id</span><span class="sh">"</span><span class="p">:</span> <span class="n">uuid</span><span class="p">.</span><span class="nf">uuid4</span><span class="p">().</span><span class="nb">hex</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">metadata</span><span class="sh">"</span><span class="p">:</span> <span class="p">{</span>
                <span class="sh">"</span><span class="s">data_subject</span><span class="sh">"</span><span class="p">:</span> <span class="p">{</span>
                    <span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">Mr. XYZ</span><span class="sh">"</span><span class="p">,</span>
                    <span class="sh">"</span><span class="s">id</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">7a2a83b1694940f38d6a2a8f50e4d979</span><span class="sh">"</span>
                <span class="p">},</span>
                <span class="sh">"</span><span class="s">data_controller</span><span class="sh">"</span><span class="p">:</span> <span class="p">{</span>
                    <span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">ABC LLC.</span><span class="sh">"</span><span class="p">,</span>
                    <span class="sh">"</span><span class="s">id</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">478ecb5f2b674ad18976007d64c069de</span><span class="sh">"</span>
                <span class="p">},</span>
                <span class="sh">"</span><span class="s">agreement_date</span><span class="sh">"</span><span class="p">:</span> <span class="n">timestamp</span><span class="p">,</span>
                <span class="sh">"</span><span class="s">is_transferable</span><span class="sh">"</span><span class="p">:</span> <span class="bp">False</span>
            <span class="p">},</span>
            <span class="sh">"</span><span class="s">consent_scope</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span>
                <span class="p">{</span>
                    <span class="sh">"</span><span class="s">marketing</span><span class="sh">"</span><span class="p">:</span> <span class="p">{</span>
                        <span class="sh">"</span><span class="s">data_attributes</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="sh">"</span><span class="s">datasetA:attr1</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">datasetB:attr2</span><span class="sh">"</span><span class="p">],</span>
                        <span class="sh">"</span><span class="s">expiry</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">01/12/2020</span><span class="sh">"</span>
                    <span class="p">},</span>
                    <span class="sh">"</span><span class="s">analytics</span><span class="sh">"</span><span class="p">:</span> <span class="p">{</span>
                        <span class="sh">"</span><span class="s">data_attributes</span><span class="sh">"</span><span class="p">:</span> <span class="p">[</span><span class="sh">"</span><span class="s">datasetB:attr2</span><span class="sh">"</span><span class="p">,</span> <span class="sh">"</span><span class="s">datasetZ:attr4</span><span class="sh">"</span><span class="p">],</span>
                        <span class="sh">"</span><span class="s">expiry</span><span class="sh">"</span><span class="p">:</span> <span class="sh">"</span><span class="s">01/11/2020</span><span class="sh">"</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">],</span>
            <span class="sh">"</span><span class="s">monetization_enabled</span><span class="sh">"</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
            <span class="sh">"</span><span class="s">monetization_scope</span><span class="sh">"</span><span class="p">:</span> <span class="n">self</span><span class="p">.</span><span class="nf">generate_monetization_scope</span><span class="p">(),</span>
            <span class="sh">"</span><span class="s">signatures</span><span class="sh">"</span><span class="p">:</span> <span class="p">{</span>
                <span class="sh">"</span><span class="s">data_controller</span><span class="sh">"</span><span class="p">:</span> <span class="n">dc_signature</span><span class="p">,</span>
                <span class="sh">"</span><span class="s">data_subject</span><span class="sh">"</span><span class="p">:</span> <span class="n">ds_signature</span><span class="p">,</span>
                <span class="sh">"</span><span class="s">time_stamping_authority</span><span class="sh">"</span><span class="p">:</span> <span class="n">signed_timestamp</span>
            <span class="p">},</span>
            <span class="sh">"</span><span class="s">timestamp_hash</span><span class="sh">"</span><span class="p">:</span> <span class="n">timestamp_hash</span>
        <span class="p">},</span> <span class="n">indent</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>

<span class="c1"># Example of using the class
</span><span class="n">generator</span> <span class="o">=</span> <span class="nc">ConsentProofGenerator</span><span class="p">()</span>
<span class="n">json_ld_consent_proof</span> <span class="o">=</span> <span class="n">generator</span><span class="p">.</span><span class="nf">create_consent_proof</span><span class="p">()</span>
<span class="nf">print</span><span class="p">(</span><span class="n">json_ld_consent_proof</span><span class="p">)</span>

</code></pre></div></div> <p><br></p> <h4 id="key-components-of-the-program">Key Components of the Program:</h4> <ol> <li> <strong>Key Generation</strong>: Simulates RSA key pairs for the Data Controller, Data Subject, and Time Stamping Authority.</li> <li> <strong>Signing Data</strong>: Each party signs the agreement, simulating the cryptographic assurance of the data’s integrity and origin.</li> <li> <strong>Hash Generation</strong>: For both the consent data and the timestamped data, ensuring the immutability of records.</li> <li> <strong>JSON-LD Consent Proof</strong>: This is the final output containing the hashes, signatures, and timestamp, ready to be embedded in a public blockchain.</li> </ol> <p><br></p> <h3 id="sample-json-ld-oconsent-agreement">Sample JSON-LD OConsent Agreement</h3> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"@context"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://w3id.org/oconsent/v1"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"OConsent - Open Consent Agreement"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"agreement_hash_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"b2c6209b6a8ed85b4ba4f838dde8a59d724d316c380dfbf62ed71a57ac78f6bc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"agreement_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.01"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"linked_agreement_hash_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7b3784a33886431787e075416d46c965"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"metadata"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data_subject"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mr. XYZ"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"7a2a83b1694940f38d6a2a8f50e4d979"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"data_controller"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ABC LLC."</span><span class="p">,</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"478ecb5f2b674ad18976007d64c069de"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"agreement_date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2024-05-11T15:04:58.136144"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"is_transferable"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"consent_scope"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"marketing"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"data_attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"datasetA:attr1"</span><span class="p">,</span><span class="w"> </span><span class="s2">"datasetB:attr2"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"expiry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01/12/2020"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="nl">"analytics"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"data_attributes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"datasetB:attr2"</span><span class="p">,</span><span class="w"> </span><span class="s2">"datasetZ:attr4"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"expiry"</span><span class="p">:</span><span class="w"> </span><span class="s2">"01/11/2020"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="nl">"monetization_enabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
  </span><span class="nl">"monetization_scope"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"storage"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AWS S3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data_usage"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Data analysis"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Machine learning model training"</span><span class="p">],</span><span class="w">
    </span><span class="nl">"s3_uri"</span><span class="p">:</span><span class="w"> </span><span class="s2">"s3://data-analytics/datasets/ml-training-data.csv"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"signatures"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"data_controller"</span><span class="p">:</span><span class="w"> </span><span class="s2">"753527ed1f50f0bc5af3b3fa50e9659d096dc101c336dda830f6a3c01e95ab15047a7427ece03c4dcb1edaa662eda03ca6303a4fe2d5f6bdcaf351f6bcc44943ad435773dd9e910a62c79ca2cd3ff888850a534423c5094f80c0f749cd30c3f4c04d8750d5873ab2430d2ca20557bf2ef07f8e5b5021728355bc79c20cfc462645ad14c8a149b2fd820e95979711d3798eddc083d302d5e4cb3ff88f242b12ee34864004ac23bb53b3c5792c74f3236f47c6c7c9d547aff68afa8257bafcc4d07dc2d4a081fba10cd9a9c6a4330ae56e298bcd452d148fb2f19b1fe0c678601bcccbdd174aec4a1133c777742cfdd19ee2ad6094b3036d9ccaf39974bca34a2b"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"data_subject"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5a40b16b2aa3348d23152b5145c0965ac121c8678c81afc32c6bbb2c0fa9a7f0a831ba8ca2cc2dad8cf9d83ebdfda483535eeb2ec6319d8be447e22dc486fdb124a337f9a86a6c787bbddc799cb84db4f685413e4c9046bce510c9caf57239d7ed1fc179e960f389dfdb43ce2df7261e61949244c9c4bf1c1d52a867cb56f8e06adb267922a020ce5e1e2b7ae112ed618cdbfe655e3f7f54ea673a695e8061fa9b4435eda0e60db75f6124f1b4ba3a309cc5690c5f377c7c98153b3deb1a3719390084eeebb26fbf3f321304e63f841c61bda938a3f4386ee59369f08135895660ae2079040fe909c53c3ba31e6b6e80ade7a1f2697db66f03a098272fc29d24"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"time_stamping_authority"</span><span class="p">:</span><span class="w"> </span><span class="s2">"41a2cf34861def4ea8444afaf6ff6adf1333ae4b2552a21d9d03f0a6e952a256a5ed14e86934e332683387dd19ef8cf225ce333c2a713cc6dae5ba26015b3fd9a4357e3ea9b7cb2238c5ef583ca0b787c01a094a4e9312521e5abf0f51d3008a5c5dedc306fbe5b134d8046dae8bfa95737a4f117a04064d557649820b9cbf0bc44217d3f0a889855ab8327e26e5a2ba02d5b6957298ee4779ae5b544e8adcf09669405e77092ec9e1124ec9f8e5d0e0b04f21df1f20802622da562e89d1c5c805045d637d528cbb2de020bd4c0f4c1d9cce32819c4fdfd2ae11fec04cbdd5876eb8c008f054c1706a3dd5bcaf5733e7713d80d52c8a1150f443266addaff0c6"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"timestamp_hash"</span><span class="p">:</span><span class="w"> </span><span class="s2">"679db11c126e730175257e61fb40fddd91bbfdae0166fc6d41bd1011d709bf60"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p><br></p> <p><br></p> <h2 id="public-blockchain-embedding-example">Public Blockchain embedding example</h2> <p>Embedding data into Bitcoin and Ethereum blockchains typically involves different approaches due to the differing nature of these platforms. For Bitcoin, data can be embedded using <code class="language-plaintext highlighter-rouge">OP_RETURN</code> in a transaction, which allows a small amount of data to be stored. For Ethereum, we can use a smart contract to store more extensive data.</p> <h4 id="bitcoin-embedding-example">Bitcoin Embedding Example</h4> <p>For Bitcoin, we would use an <code class="language-plaintext highlighter-rouge">OP_RETURN</code> transaction. Following is a simplified Python example using the <code class="language-plaintext highlighter-rouge">bit</code> library to embed the hash of the <code class="language-plaintext highlighter-rouge">json_ld_consent_proof</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">bit</span> <span class="kn">import</span> <span class="n">Key</span>

<span class="k">def</span> <span class="nf">embed_data_in_bitcoin</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">wif</span><span class="p">):</span>
    <span class="n">key</span> <span class="o">=</span> <span class="nc">Key</span><span class="p">(</span><span class="n">wif</span><span class="p">)</span>  <span class="c1"># Load your wallet from WIF
</span>    <span class="n">tx_hash</span> <span class="o">=</span> <span class="n">key</span><span class="p">.</span><span class="nf">send_op_return</span><span class="p">(</span><span class="n">data</span><span class="p">.</span><span class="nf">encode</span><span class="p">(</span><span class="sh">'</span><span class="s">utf-8</span><span class="sh">'</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">tx_hash</span>

<span class="c1"># Example usage
</span><span class="n">wif</span> <span class="o">=</span> <span class="sh">'</span><span class="s">your_wallet_import_format_key_here</span><span class="sh">'</span>  <span class="c1"># You need to replace this with your actual WIF
</span><span class="n">data</span> <span class="o">=</span> <span class="sh">'</span><span class="s">hash_of_json_ld_consent_proof</span><span class="sh">'</span>  <span class="c1"># Replace with the actual hash of your JSON data
</span><span class="n">transaction_hash</span> <span class="o">=</span> <span class="nf">embed_data_in_bitcoin</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">wif</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Transaction Hash: </span><span class="si">{</span><span class="n">transaction_hash</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <p><strong>Note</strong>: The <code class="language-plaintext highlighter-rouge">'your_wallet_import_format_key_here'</code> is your actual wallet import format key. Also, the <code class="language-plaintext highlighter-rouge">bit</code> library must be installed (<code class="language-plaintext highlighter-rouge">pip install bit</code>). This program sends a real transaction and would require actual Bitcoin to execute.</p> <p><br> <br></p> <h3 id="ethereum-embedding-example">Ethereum Embedding Example</h3> <p>For Ethereum, a smart contract can be used to store strings. Following is an example using <code class="language-plaintext highlighter-rouge">web3.py</code> to interact with a smart contract:</p> <pre><code class="language-solidity">// Solidity Contract Example
pragma solidity ^0.8.0;

contract DataStorage {
    string public data;

    function storeData(string memory _data) public {
        data = _data;
    }

    function getData() public view returns (string memory) {
        return data;
    }
}
</code></pre> <p>And the corresponding Python script to interact with this contract:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="n">web3</span> <span class="kn">import</span> <span class="n">Web3</span>

<span class="k">def</span> <span class="nf">store_data_in_ethereum</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">contract_address</span><span class="p">,</span> <span class="n">account_address</span><span class="p">,</span> <span class="n">private_key</span><span class="p">):</span>
    <span class="n">web3</span> <span class="o">=</span> <span class="nc">Web3</span><span class="p">(</span><span class="n">Web3</span><span class="p">.</span><span class="nc">HTTPProvider</span><span class="p">(</span><span class="sh">'</span><span class="s">https://your_ethereum_node_url</span><span class="sh">'</span><span class="p">))</span>  <span class="c1"># Connect to an Ethereum node
</span>    <span class="n">web3</span><span class="p">.</span><span class="n">eth</span><span class="p">.</span><span class="n">defaultAccount</span> <span class="o">=</span> <span class="n">account_address</span>  <span class="c1"># Set the default account
</span>
    <span class="c1"># Load the contract
</span>    <span class="n">abi</span> <span class="o">=</span> <span class="p">[{</span><span class="sh">"</span><span class="s">inputs</span><span class="sh">"</span><span class="p">:[{</span><span class="sh">"</span><span class="s">internalType</span><span class="sh">"</span><span class="p">:</span><span class="sh">"</span><span class="s">string</span><span class="sh">"</span><span class="p">,</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span><span class="sh">"</span><span class="s">_data</span><span class="sh">"</span><span class="p">,</span><span class="sh">"</span><span class="s">type</span><span class="sh">"</span><span class="p">:</span><span class="sh">"</span><span class="s">string</span><span class="sh">"</span><span class="p">}],</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span><span class="sh">"</span><span class="s">storeData</span><span class="sh">"</span><span class="p">,</span><span class="sh">"</span><span class="s">outputs</span><span class="sh">"</span><span class="p">:[],</span><span class="sh">"</span><span class="s">stateMutability</span><span class="sh">"</span><span class="p">:</span><span class="sh">"</span><span class="s">nonpayable</span><span class="sh">"</span><span class="p">,</span><span class="sh">"</span><span class="s">type</span><span class="sh">"</span><span class="p">:</span><span class="sh">"</span><span class="s">function</span><span class="sh">"</span><span class="p">},{</span><span class="sh">"</span><span class="s">inputs</span><span class="sh">"</span><span class="p">:[],</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span><span class="sh">"</span><span class="s">getData</span><span class="sh">"</span><span class="p">,</span><span class="sh">"</span><span class="s">outputs</span><span class="sh">"</span><span class="p">:[{</span><span class="sh">"</span><span class="s">internalType</span><span class="sh">"</span><span class="p">:</span><span class="sh">"</span><span class="s">string</span><span class="sh">"</span><span class="p">,</span><span class="sh">"</span><span class="s">name</span><span class="sh">"</span><span class="p">:</span><span class="sh">""</span><span class="p">,</span><span class="sh">"</span><span class="s">type</span><span class="sh">"</span><span class="p">:</span><span class="sh">"</span><span class="s">string</span><span class="sh">"</span><span class="p">}],</span><span class="sh">"</span><span class="s">stateMutability</span><span class="sh">"</span><span class="p">:</span><span class="sh">"</span><span class="s">view</span><span class="sh">"</span><span class="p">,</span><span class="sh">"</span><span class="s">type</span><span class="sh">"</span><span class="p">:</span><span class="sh">"</span><span class="s">function</span><span class="sh">"</span><span class="p">}]</span>
    <span class="n">contract</span> <span class="o">=</span> <span class="n">web3</span><span class="p">.</span><span class="n">eth</span><span class="p">.</span><span class="nf">contract</span><span class="p">(</span><span class="n">address</span><span class="o">=</span><span class="n">contract_address</span><span class="p">,</span> <span class="n">abi</span><span class="o">=</span><span class="n">abi</span><span class="p">)</span>

    <span class="c1"># Store data
</span>    <span class="n">txn</span> <span class="o">=</span> <span class="n">contract</span><span class="p">.</span><span class="n">functions</span><span class="p">.</span><span class="nf">storeData</span><span class="p">(</span><span class="n">data</span><span class="p">).</span><span class="nf">buildTransaction</span><span class="p">({</span>
        <span class="sh">'</span><span class="s">chainId</span><span class="sh">'</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">gas</span><span class="sh">'</span><span class="p">:</span> <span class="mi">2000000</span><span class="p">,</span>
        <span class="sh">'</span><span class="s">gasPrice</span><span class="sh">'</span><span class="p">:</span> <span class="n">web3</span><span class="p">.</span><span class="nf">toWei</span><span class="p">(</span><span class="sh">'</span><span class="s">10</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">gwei</span><span class="sh">'</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">nonce</span><span class="sh">'</span><span class="p">:</span> <span class="n">web3</span><span class="p">.</span><span class="n">eth</span><span class="p">.</span><span class="nf">getTransactionCount</span><span class="p">(</span><span class="n">web3</span><span class="p">.</span><span class="n">eth</span><span class="p">.</span><span class="n">defaultAccount</span><span class="p">),</span>
    <span class="p">})</span>

    <span class="c1"># Sign and send the transaction
</span>    <span class="n">signed_txn</span> <span class="o">=</span> <span class="n">web3</span><span class="p">.</span><span class="n">eth</span><span class="p">.</span><span class="n">account</span><span class="p">.</span><span class="nf">sign_transaction</span><span class="p">(</span><span class="n">txn</span><span class="p">,</span> <span class="n">private_key</span><span class="p">)</span>
    <span class="n">tx_token</span> <span class="o">=</span> <span class="n">web3</span><span class="p">.</span><span class="n">eth</span><span class="p">.</span><span class="nf">sendRawTransaction</span><span class="p">(</span><span class="n">signed_txn</span><span class="p">.</span><span class="n">rawTransaction</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">web3</span><span class="p">.</span><span class="nf">toHex</span><span class="p">(</span><span class="n">tx_token</span><span class="p">)</span>

<span class="c1"># Example usage
</span><span class="n">contract_address</span> <span class="o">=</span> <span class="sh">'</span><span class="s">your_contract_address_here</span><span class="sh">'</span>
<span class="n">account_address</span> <span class="o">=</span> <span class="sh">'</span><span class="s">your_account_address_here</span><span class="sh">'</span>
<span class="n">private_key</span> <span class="o">=</span> <span class="sh">'</span><span class="s">your_private_key_here</span><span class="sh">'</span>
<span class="n">data</span> <span class="o">=</span> <span class="sh">'</span><span class="s">hash_or_string_of_json_ld_consent_proof</span><span class="sh">'</span>
<span class="n">transaction_token</span> <span class="o">=</span> <span class="nf">store_data_in_ethereum</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">contract_address</span><span class="p">,</span> <span class="n">account_address</span><span class="p">,</span> <span class="n">private_key</span><span class="p">)</span>
<span class="nf">print</span><span class="p">(</span><span class="sa">f</span><span class="sh">"</span><span class="s">Transaction Token: </span><span class="si">{</span><span class="n">transaction_token</span><span class="si">}</span><span class="sh">"</span><span class="p">)</span>
</code></pre></div></div> <p><strong>Note</strong>: Placeholders like <code class="language-plaintext highlighter-rouge">'your_ethereum_node_url'</code>, <code class="language-plaintext highlighter-rouge">'your_contract_address_here'</code>, <code class="language-plaintext highlighter-rouge">'your_account_address_here'</code>, and <code class="language-plaintext highlighter-rouge">'your_private_key_here'</code> should be replaced with your actual values. Also, the <code class="language-plaintext highlighter-rouge">web3.py</code> library must be installed (<code class="language-plaintext highlighter-rouge">pip install web3</code>).</p> <hr> <h2 id="generating-users-data">Generating User’s Data</h2> <p>Below describes at a high level how a user who is keen to share (and / or monetize) their data may install a Google Chrome browser extension, and allow anonymized tracking. The file data is anaonymized, and uploaded to AWS S3. The hash of the data is returned - uniquely identifying the dataset, alongwith the S3 URI.</p> <p><strong>1. Manifest.json (Extension Configuration):</strong></p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"manifest_version"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Privacy-Aware Website Tracking"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Tracks anonymized website behavior with user consent."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"permissions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"activeTab"</span><span class="p">,</span><span class="w"> </span><span class="s2">"webNavigation"</span><span class="p">,</span><span class="w"> </span><span class="s2">"storage"</span><span class="p">,</span><span class="w"> </span><span class="s2">"identity"</span><span class="p">],</span><span class="w">
  </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"service_worker"</span><span class="p">:</span><span class="w"> </span><span class="s2">"background.js"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"content_scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="p">{</span><span class="w">
      </span><span class="nl">"matches"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"&lt;all_urls&gt;"</span><span class="p">],</span><span class="w">
      </span><span class="nl">"js"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"content.js"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div> <p><strong>2. background.js (Service Worker):</strong></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Handle user login (e.g., using Chrome Identity API)</span>
<span class="nx">chrome</span><span class="p">.</span><span class="nx">identity</span><span class="p">.</span><span class="nf">getAuthToken</span><span class="p">({</span> <span class="na">interactive</span><span class="p">:</span> <span class="kc">true</span> <span class="p">},</span> <span class="nf">function </span><span class="p">(</span><span class="nx">token</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// ... store token securely ...</span>
<span class="p">});</span>

<span class="c1">// Listen for web navigation events</span>
<span class="nx">chrome</span><span class="p">.</span><span class="nx">webNavigation</span><span class="p">.</span><span class="nx">onCompleted</span><span class="p">.</span><span class="nf">addListener</span><span class="p">((</span><span class="nx">details</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// Send a message to the content script to start tracking</span>
  <span class="nx">chrome</span><span class="p">.</span><span class="nx">tabs</span><span class="p">.</span><span class="nf">sendMessage</span><span class="p">(</span><span class="nx">details</span><span class="p">.</span><span class="nx">tabId</span><span class="p">,</span> <span class="p">{</span> <span class="na">action</span><span class="p">:</span> <span class="dl">"</span><span class="s2">startTracking</span><span class="dl">"</span> <span class="p">});</span>
<span class="p">});</span>

<span class="c1">// Receive anonymized data from content script</span>
<span class="nx">chrome</span><span class="p">.</span><span class="nx">runtime</span><span class="p">.</span><span class="nx">onMessage</span><span class="p">.</span><span class="nf">addListener</span><span class="p">(</span><span class="k">async </span><span class="p">(</span><span class="nx">message</span><span class="p">,</span> <span class="nx">sender</span><span class="p">,</span> <span class="nx">sendResponse</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if </span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">action</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Sign data with user's private key (retrieved securely)</span>
    <span class="kd">const</span> <span class="nx">signedData</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">signData</span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">data</span><span class="p">);</span>

    <span class="c1">// Upload signed data to S3</span>
    <span class="kd">const</span> <span class="p">{</span> <span class="nx">hash</span><span class="p">,</span> <span class="nx">s3Uri</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nf">uploadToS3</span><span class="p">(</span><span class="nx">signedData</span><span class="p">);</span>

    <span class="c1">// Send response back to content script</span>
    <span class="nf">sendResponse</span><span class="p">({</span> <span class="nx">hash</span><span class="p">,</span> <span class="nx">s3Uri</span> <span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div> <p><strong>3. content.js (Content Script):</strong></p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">let</span> <span class="nx">trackingData</span> <span class="o">=</span> <span class="p">[];</span>
<span class="kd">let</span> <span class="nx">isTracking</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

<span class="nx">chrome</span><span class="p">.</span><span class="nx">runtime</span><span class="p">.</span><span class="nx">onMessage</span><span class="p">.</span><span class="nf">addListener</span><span class="p">((</span><span class="nx">message</span><span class="p">,</span> <span class="nx">sender</span><span class="p">,</span> <span class="nx">sendResponse</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="k">if </span><span class="p">(</span><span class="nx">message</span><span class="p">.</span><span class="nx">action</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">startTracking</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">isTracking</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="nf">startTracking</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nf">startTracking</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// ... Capture anonymized website interaction data ...</span>

  <span class="c1">// Periodically send data to background script</span>
  <span class="nf">setInterval</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="k">if </span><span class="p">(</span><span class="nx">isTracking</span> <span class="o">&amp;&amp;</span> <span class="nx">trackingData</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">chrome</span><span class="p">.</span><span class="nx">runtime</span><span class="p">.</span><span class="nf">sendMessage</span><span class="p">({</span> <span class="na">action</span><span class="p">:</span> <span class="dl">"</span><span class="s2">data</span><span class="dl">"</span><span class="p">,</span> <span class="na">data</span><span class="p">:</span> <span class="nx">trackingData</span> <span class="p">},</span> <span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
        <span class="c1">// Handle response from background script (e.g., display hash and S3 URI)</span>
      <span class="p">});</span>
      <span class="nx">trackingData</span> <span class="o">=</span> <span class="p">[];</span> <span class="c1">// Clear data after sending</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="mi">5000</span><span class="p">);</span> <span class="c1">// Adjust interval as needed</span>
<span class="p">}</span>
</code></pre></div></div> <p><br></p> <hr> <h2 id="time-leased-sharing-of-the-users-data">Time-leased sharing of the User’s Data</h2> <p>Time-leased data sharing empowers users with greater control over their personal information while enabling organizations to derive valuable insights. This innovative model introduces a concept where users explicitly grant access to their anonymized data for a predetermined duration.</p> <p>Time-leased data sharing leverages blockchain technology and smart contracts to create a transparent, secure, and tamper-proof framework for data exchange. It allows users to define the terms of data usage, including the specific data points shared, the intended purpose, and the duration of access. By doing so, users retain ownership and control over their data, ensuring that it’s not exploited beyond their consent.</p> <p>Below is a sample approach that leverages smart contracts to enforce the temporal control.</p> <p><br></p> <p><strong>Smart Contract Structure and Logic</strong></p> <p>The core components of a smart contract for this purpose would typically include:</p> <ul> <li> <strong>Data Hash Storage:</strong> A variable (e.g., <code class="language-plaintext highlighter-rouge">bytes32 dataHash</code>) to securely store the hash of the anonymized data file. This hash serves as a unique identifier for the data without revealing its content.</li> <li> <strong>Expiration Timestamp:</strong> A variable (e.g., <code class="language-plaintext highlighter-rouge">uint256 expirationTime</code>) to store the Unix timestamp representing the date and time when the data sharing agreement expires.</li> <li> <strong>Data Validity Function:</strong> A function (e.g., <code class="language-plaintext highlighter-rouge">isDataValid()</code>) that compares the current block timestamp (accessible within the smart contract) with the stored <code class="language-plaintext highlighter-rouge">expirationTime</code>. It returns <code class="language-plaintext highlighter-rouge">true</code> if the data is still valid (current time is before expiration) and <code class="language-plaintext highlighter-rouge">false</code> if it has expired.</li> <li> <strong>Optional Revocation Mechanism:</strong> Additional functions or events can be included to explicitly revoke access to the data before the expiration time, either by the data owner or through some other agreed-upon condition.</li> </ul> <p><br></p> <p><strong>Interaction with S3 and the Chrome Extension</strong></p> <ol> <li> <p><strong>Data Upload and Hashing:</strong> The Chrome extension anonymizes the user’s data, calculates its hash (e.g., SHA-256), and uploads the data to the S3 bucket.</p> </li> <li> <p><strong>Smart Contract Deployment:</strong></p> <ul> <li>The extension sends a transaction to the blockchain to deploy the smart contract.</li> <li>The transaction includes the data hash and the chosen expiration timestamp as arguments to the contract’s constructor.</li> </ul> </li> <li> <p><strong>Data Access:</strong></p> <ul> <li>When someone (e.g., a data analyst or a third-party application) wants to access the data from S3, they first interact with the smart contract.</li> <li>They provide the data hash and call the <code class="language-plaintext highlighter-rouge">isDataValid()</code> function.</li> <li>The smart contract returns <code class="language-plaintext highlighter-rouge">true</code> if the data is still valid, allowing the user to proceed and download it from S3.</li> <li>If the smart contract returns <code class="language-plaintext highlighter-rouge">false</code>, the data is considered expired, and access is denied.</li> </ul> </li> </ol> <p><br></p> <p><strong>Code Example (Solidity):</strong></p> <pre><code class="language-solidity">pragma solidity ^0.8.0;

contract DataLease {
    // ... (same as previous example) ...

    event DataExpired(bytes32 dataHash);

    function revokeAccess() public {
        require(msg.sender == owner, "Only the owner can revoke access");
        expirationTime = block.timestamp;
        emit DataExpired(dataHash);
    }
}
</code></pre> <h2 id="whats-next">What’s next</h2> <p>OConsent is still a work in progress. The core protocol is defined, but there’s a lot of work ahead: better tooling, more blockchain integrations, real-world pilots with companies willing to experiment.</p> <p>The big open question is adoption. A consent protocol only works if both sides use it. Getting users on board is relatively easy - who doesn’t want more control over their data? Getting companies to adopt it is harder, especially when current approaches let them operate with minimal accountability.</p> <p>But regulations are tightening, and the companies that figure out transparent consent early will have an advantage when stricter enforcement arrives.</p> <p><strong>Resources:</strong></p> <ul> <li>OConsent website: https://oconsent.io</li> <li>Original paper: https://arxiv.org/abs/2201.01326</li> <li>Twitter: <a href="https://twitter.com/theoconsent" rel="external nofollow noopener" target="_blank">@theoconsent</a> </li> <li>GitHub: <a href="https://github.com/oconsent" rel="external nofollow noopener" target="_blank">github.com/oconsent</a> </li> </ul> <p>If you’re interested in contributing or piloting this with real data, reach out at hi@oconsent.io.</p> </div> </article> <div class="citation-section"> <div class="citation-header"> <h3>Citation</h3> <p class="citation-intro">If you found this article useful, please cite it using one of the formats below:</p> </div> <div class="citation-content"> <div class="citation-format"> <h4>APA Format</h4> <div class="citation-text"> <p> Mitra, Subhadip. (2020, December). <em>Introducing OConsent - Open Consent Protocol</em>. Retrieved from https://subhadipmitra.com/blog/2020/introducing-oconsent-open-consent-protocol/ </p> </div> </div> <div class="citation-format"> <h4>BibTeX Entry</h4> <div class="language-bibtex highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">@article</span><span class="p">{</span><span class="nl">mitra2020introducing-oconsent-open-consent-protocol</span><span class="p">,</span>
  <span class="na">title</span>   <span class="p">=</span> <span class="s">{Introducing OConsent - Open Consent Protocol}</span><span class="p">,</span>
  <span class="na">author</span>  <span class="p">=</span> <span class="s">{Mitra, Subhadip}</span><span class="p">,</span>
  <span class="na">year</span>    <span class="p">=</span> <span class="s">{2020}</span><span class="p">,</span>
  <span class="na">month</span>   <span class="p">=</span> <span class="s">{Dec}</span><span class="p">,</span>
  <span class="na">url</span>     <span class="p">=</span> <span class="s">{https://subhadipmitra.com/blog/2020/introducing-oconsent-open-consent-protocol/}</span>
<span class="p">}</span>
</code></pre></div></div> </div> </div> </div> <style>.post-footer-featured{margin-top:6rem;padding-top:0}.newsletter-featured{background:var(--global-card-bg-color,#fff);border:2px solid var(--global-theme-color,#b509ac);border-radius:24px;padding:3rem;margin-bottom:3rem}.showcase-label-newsletter{display:inline-flex;align-items:center;gap:.5rem;font-size:.875rem;letter-spacing:.15em;text-transform:uppercase;color:var(--global-theme-color,#b509ac);font-weight:700;margin-bottom:1rem}.newsletter-featured h2{font-size:2rem;font-weight:900;margin:0 0 1rem 0;letter-spacing:-0.02em;line-height:1.1;color:var(--global-text-color,#000)}.newsletter-featured p{font-size:1.125rem;color:var(--global-text-color-light,#666);margin-bottom:1.5rem;line-height:1.6}.newsletter-form-featured{display:flex;gap:.75rem;margin-bottom:1rem}.newsletter-form-featured input{flex:1;padding:.875rem 1.25rem;background:var(--global-bg-color,#fff);color:var(--global-text-color,#000);border:1px solid var(--global-divider-color,#e5e5e5);border-radius:12px;font-size:1rem;transition:all .3s}.newsletter-form-featured input:focus{outline:0;border-color:var(--global-theme-color,#b509ac);box-shadow:0 0 0 3px rgba(181,9,172,0.1)}.newsletter-form-featured button{padding:.875rem 2rem;background:var(--global-theme-color,#b509ac);color:white;border:0;border-radius:12px;font-weight:700;font-size:1rem;cursor:pointer;transition:all .3s;white-space:nowrap}.newsletter-form-featured button:hover{transform:translateY(-4px);box-shadow:0 12px 40px rgba(181,9,172,0.3)}.newsletter-links{display:flex;gap:1rem;flex-wrap:wrap;align-items:center;font-size:.875rem;color:var(--global-text-color-light,#666)}.newsletter-links a{color:var(--global-theme-color,#b509ac);text-decoration:none;font-weight:600;transition:opacity .3s}.newsletter-links a:hover{opacity:.7}.share-section-featured{text-align:center;padding:2rem 0 3rem 0;border-bottom:1px solid var(--global-divider-color,#e5e5e5)}.share-section-featured .share-label{font-size:.875rem;text-transform:uppercase;letter-spacing:.1em;color:var(--global-text-color-light,#666);font-weight:600;margin-bottom:1.25rem}.share-buttons-featured{display:flex;gap:1rem;justify-content:center;align-items:center}.share-link-featured{display:inline-flex;align-items:center;gap:.5rem;font-weight:600;color:var(--global-text-color,#000);text-decoration:none;font-size:.875rem;padding:.5rem 1rem;background:var(--global-code-bg-color,#f8f9fa);border:1px solid var(--global-divider-color,#e5e5e5);border-radius:8px;transition:all .2s ease;white-space:nowrap;cursor:pointer}.share-link-featured:hover{background:var(--global-theme-color,#b509ac);border-color:var(--global-theme-color,#b509ac);color:white;transform:translateY(-2px)}.share-link-featured:hover svg{fill:white}.share-link-featured svg{width:16px;height:16px;flex-shrink:0;transition:fill .2s ease}.related-posts-section{margin-top:3rem;padding-top:0}.related-posts-section h3{font-size:1.75rem;font-weight:800;margin-bottom:2rem;color:var(--global-text-color,#000);text-align:center}@media(max-width:768px){.newsletter-featured{padding:2rem}.newsletter-featured h2{font-size:1.5rem}.newsletter-form-featured{flex-direction:column}.share-buttons-featured{flex-wrap:wrap;gap:.5rem}}</style> <div class="post-footer-featured"> <div class="newsletter-featured"> <div class="showcase-label-newsletter"> <svg width="16" height="16" viewbox="0 0 24 24" fill="currentColor"> <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"></path> </svg> Strategic Insights </div> <h2>Get More Like This</h2> <p> Join technical leaders from Google, Amazon, and Fortune 500s. Get strategic insights on Data, AI, and Cloud transformation delivered to your inbox. </p> <form class="newsletter-form-featured" action="https://app.loops.so/api/newsletter-form/cm614n2d604nlfy1lfo7vgmo5" method="POST"> <input type="email" name="email" placeholder="your@email.com" required> <button type="submit">Subscribe</button> </form> <div class="newsletter-links"> <span>Free insights • No spam • Unsubscribe anytime</span> <span>•</span> <a href="/archive/">Browse the archive →</a> </div> </div> <div class="share-section-featured"> <div class="share-label">Share This Article</div> <div class="share-buttons-featured"> <a href="https://twitter.com/intent/tweet?text=Introducing%20OConsent%20-%20Open%20Consent%20Protocol&amp;url=https://subhadipmitra.com/blog/2020/introducing-oconsent-open-consent-protocol/&amp;via=bassrehab" class="share-link-featured" target="_blank" rel="noopener noreferrer" title="Share on X"> <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M13.6823 10.6218L20.2391 3H18.6854L12.9921 9.61788L8.44486 3H3.2002L10.0765 13.0074L3.2002 21H4.75404L10.7663 14.0113L15.5685 21H20.8131L13.6819 10.6218H13.6823ZM11.5541 13.0956L10.8574 12.0991L5.31391 4.16971H7.70053L12.1742 10.5689L12.8709 11.5655L18.6861 19.8835H16.2995L11.5541 13.096V13.0956Z"></path> </svg> <span>X</span> </a> <a href="https://www.linkedin.com/sharing/share-offsite/?url=https://subhadipmitra.com/blog/2020/introducing-oconsent-open-consent-protocol/" class="share-link-featured" target="_blank" rel="noopener noreferrer" title="Share on LinkedIn"> <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path> </svg> <span>LinkedIn</span> </a> <a href="https://www.reddit.com/submit?url=https://subhadipmitra.com/blog/2020/introducing-oconsent-open-consent-protocol/&amp;title=Introducing%20OConsent%20-%20Open%20Consent%20Protocol" class="share-link-featured" target="_blank" rel="noopener noreferrer" title="Share on Reddit"> <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"></path> </svg> <span>Reddit</span> </a> <a href="https://news.ycombinator.com/submitlink?u=https://subhadipmitra.com/blog/2020/introducing-oconsent-open-consent-protocol/&amp;t=Introducing%20OConsent%20-%20Open%20Consent%20Protocol" class="share-link-featured" target="_blank" rel="noopener noreferrer" title="Share on Hacker News"> <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M0 0v24h24V0H0zm12.3 12.6l-3.6-7.2H10l2.4 5.1 2.4-5.1h1.3l-3.6 7.2v4.8h-1.2v-4.8z"></path> </svg> <span>HN</span> </a> <a href="mailto:?subject=Introducing%20OConsent%20-%20Open%20Consent%20Protocol&amp;body=Check%20out%20this%20article:%20https://subhadipmitra.com/blog/2020/introducing-oconsent-open-consent-protocol/" class="share-link-featured" title="Share via Email"> <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"></path> </svg> <span>Email</span> </a> <button onclick="copyLinkFeatured('https://subhadipmitra.com/blog/2020/introducing-oconsent-open-consent-protocol/')" class="share-link-featured" title="Copy link to clipboard"> <svg class="copy-icon" viewbox="0 0 24 24" fill="currentColor"> <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"></path> </svg> <svg class="check-icon" style="display: none" viewbox="0 0 24 24" fill="currentColor"> <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"></path> </svg> <span class="copy-text">Copy</span> <span class="copied-text" style="display: none">Copied!</span> </button> </div> </div> <div class="related-posts-section"> <h3>Continue Reading</h3> </div> </div> <script>
  function copyLinkFeatured(url) {
    navigator.clipboard
      .writeText(url)
      .then(() => {
        const btn = event.target.closest("button");
        const copyText = btn.querySelector(".copy-text");
        const copiedText = btn.querySelector(".copied-text");
        const copyIcon = btn.querySelector(".copy-icon");
        const checkIcon = btn.querySelector(".check-icon");

        copyText.style.display = "none";
        copiedText.style.display = "inline";
        copyIcon.style.display = "none";
        checkIcon.style.display = "inline";

        setTimeout(() => {
          copyText.style.display = "inline";
          copiedText.style.display = "none";
          copyIcon.style.display = "inline";
          checkIcon.style.display = "none";
        }, 2000);
      })
      .catch((err) => {
        console.error("Failed to copy:", err);
        alert("Could not copy link. Please copy manually: " + url);
      });
  }

  // Newsletter form handler
  (function () {
    const form = document.querySelector(".newsletter-form-featured");
    if (!form) return;

    form.addEventListener("submit", function (event) {
      event.preventDefault();

      const emailInput = form.querySelector('input[name="email"]');
      const submitBtn = form.querySelector('button[type="submit"]');
      const email = emailInput.value;

      // Disable submit button and show loading state
      submitBtn.disabled = true;
      const originalText = submitBtn.textContent;
      submitBtn.textContent = "Subscribing...";

      // Submit to Loops.so
      const formBody = "userGroup=&email=" + encodeURIComponent(email);
      fetch(form.action, {
        method: "POST",
        body: formBody,
        headers: {
          "Content-Type": "application/x-www-form-urlencoded",
        },
      })
        .then((res) => res.json().then((data) => ({ ok: res.ok, data })))
        .then(({ ok, data }) => {
          if (ok) {
            // Success - show confirmation message
            submitBtn.textContent = "✓ Subscribed!";
            submitBtn.style.background = "#22c55e";
            emailInput.value = "";

            // Reset after 3 seconds
            setTimeout(() => {
              submitBtn.textContent = originalText;
              submitBtn.style.background = "";
              submitBtn.disabled = false;
            }, 3000);
          } else {
            // Error from API
            throw new Error(data.message || "Subscription failed");
          }
        })
        .catch((error) => {
          // Show error
          submitBtn.textContent = "✗ Failed";
          submitBtn.style.background = "#ef4444";
          console.error("Newsletter subscription error:", error);

          // Reset after 3 seconds
          setTimeout(() => {
            submitBtn.textContent = originalText;
            submitBtn.style.background = "";
            submitBtn.disabled = false;
          }, 3000);
        });
    });
  })();
</script> <style>.related-posts-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:1.5rem}.related-post-card{background:var(--global-card-bg-color,#fff);border:1px solid var(--global-divider-color,#e5e5e5);border-radius:16px;padding:2rem;transition:all .3s cubic-bezier(0.4,0,0.2,1);position:relative;display:flex;flex-direction:column}.related-post-card:hover{transform:translateY(-4px);box-shadow:0 12px 32px rgba(0,0,0,0.1);border-color:var(--global-theme-color,#b509ac)}.related-post-title{font-size:1.25rem;font-weight:700;line-height:1.3;margin:0 0 .75rem 0;color:var(--global-text-color,#000)}.related-post-title a{color:inherit;text-decoration:none;transition:color .3s}.related-post-title a:hover{color:var(--global-theme-color,#b509ac)}.related-post-meta{font-size:.875rem;color:var(--global-text-color-light,#666);margin-bottom:.75rem}.related-post-excerpt{font-size:.95rem;line-height:1.6;color:var(--global-text-color-light,#666);margin-bottom:1rem;flex-grow:1}.related-post-link{display:inline-flex;align-items:center;gap:.5rem;font-weight:700;color:var(--global-theme-color,#b509ac);text-decoration:none;font-size:.95rem;transition:gap .3s;margin-top:auto}.related-post-link:hover{gap:1rem}.related-post-link svg{width:16px;height:16px;transition:transform .3s}.related-post-link:hover svg{transform:translateX(4px)}.external-link-icon{width:14px;height:14px;opacity:.6;margin-left:.25rem}.no-related-posts{text-align:center;padding:3rem;color:var(--global-text-color-light,#666);font-style:italic}@media(max-width:768px){.related-posts-grid{grid-template-columns:1fr;gap:1rem}.related-post-card{padding:1.5rem}.related-post-title{font-size:1.125rem}}</style> <div class="related-posts-container"> <div class="related-posts-grid"> <article class="related-post-card"> <h4 class="related-post-title"> <a href="/blog/2026/moltbook-mcp-stress-test/">Moltbook as MCP Stress Test: What 770K Agents Reveal About Protocol Design</a> </h4> <div class="related-post-meta"> February 02, 2026 • moltbook </div> <p class="related-post-excerpt">A follow-up to my MCP Maturity Model post. Moltbook shows what happens when you run 770K agents at Level 0 maturity with zero governance. The...</p> <a href="/blog/2026/moltbook-mcp-stress-test/" class="related-post-link"> Read More <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M13.025 1l-2.847 2.828 6.176 6.176h-16.354v3.992h16.354l-6.176 6.176 2.847 2.828 10.975-11z"></path> </svg> </a> </article> <article class="related-post-card"> <h4 class="related-post-title"> <a href="/blog/2026/deepseek-mhc-manifold-constrained-hyper-connections/">The Manifold Dial: Visualizing Why DeepSeek's mHC Stabilizes Deep Networks</a> </h4> <div class="related-post-meta"> January 03, 2026 • deep-learning </div> <p class="related-post-excerpt">Interactive exploration of Manifold-Constrained Hyper-Connections - how DeepSeek fixed the signal explosion problem in deep residual networks using 1967 mathematics</p> <a href="/blog/2026/deepseek-mhc-manifold-constrained-hyper-connections/" class="related-post-link"> Read More <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M13.025 1l-2.847 2.828 6.176 6.176h-16.354v3.992h16.354l-6.176 6.176 2.847 2.828 10.975-11z"></path> </svg> </a> </article> <article class="related-post-card"> <h4 class="related-post-title"> <a href="/blog/2025/detecting-ai-sandbagging/">I Trained Probes to Catch AI Models Sandbagging</a> </h4> <div class="related-post-meta"> December 20, 2025 • sandbagging </div> <p class="related-post-excerpt">First empirical demonstration of activation-level sandbagging detection. Linear probes achieve 90-96% accuracy across Mistral, Gemma, and Qwen models. Key finding - sandbagging representations are model-specific,...</p> <a href="/blog/2025/detecting-ai-sandbagging/" class="related-post-link"> Read More <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M13.025 1l-2.847 2.828 6.176 6.176h-16.354v3.992h16.354l-6.176 6.176 2.847 2.828 10.975-11z"></path> </svg> </a> </article> <article class="related-post-card"> <h4 class="related-post-title"> <a href="/blog/2025/steering-vectors-agents/">Why Steering Vectors Beat Prompting (And When They Don't)</a> </h4> <div class="related-post-meta"> December 18, 2025 • machine-learning </div> <p class="related-post-excerpt">I tested activation steering on 4 agent behaviors across 3 models. The results surprised me.</p> <a href="/blog/2025/steering-vectors-agents/" class="related-post-link"> Read More <svg viewbox="0 0 24 24" fill="currentColor"> <path d="M13.025 1l-2.847 2.828 6.176 6.176h-16.354v3.992h16.354l-6.176 6.176 2.847 2.828 10.975-11z"></path> </svg> </a> </article> </div> </div> <br> <br> <div class="hyvor-talk-container"> <style>.hyvor-talk-container{margin-top:4rem;padding-top:3rem;border-top:2px solid var(--global-divider-color,#e5e5e5)}.hyvor-talk-header{margin-bottom:2rem;text-align:center}.hyvor-talk-header h3{font-size:1.75rem;font-weight:800;margin-bottom:.5rem;color:var(--global-text-color,#000)}.hyvor-talk-header p{font-size:1rem;color:var(--global-text-color-light,#666);margin:0}</style> <div class="hyvor-talk-header"> <h3>Join the Discussion</h3> <p>Share your thoughts, ask questions, or provide feedback on this article</p> </div> <div id="hyvor-talk-view"></div> <script type="application/javascript">
    var HYVOR_TALK_WEBSITE = 14339;
    var HYVOR_TALK_CONFIG = {
      url: 'https://subhadipmitra.com/blog/2020/introducing-oconsent-open-consent-protocol/',
      id: '/blog/2020/introducing-oconsent-open-consent-protocol/',
      
      title: 'Introducing OConsent - Open Consent Protocol',
      
      
      palette: {
        accent: '#b509ac',
        accentText: '#ffffff',
        footerHeader: 'var(--global-text-color)',
        footerHeaderText: 'var(--global-text-color-light)',
        box: 'var(--global-card-bg-color)',
        boxText: 'var(--global-text-color)',
        boxLightText: 'var(--global-text-color-light)',
        backgroundText: 'var(--global-text-color)'
      }
      
    };
  </script> <script async type="application/javascript" src="//talk.hyvor.com/web-api/embed.js"></script> </div> </div> </div> </div> </div> <footer class="modern-footer" role="contentinfo"> <div class="footer-container"> <div class="footer-grid"> <div class="footer-brand"> <h3>Subhadip Mitra</h3> <p> Technical Leader, Inventor, and Researcher building the future of Data &amp; Applied AI. <br>Leading Google Cloud's D&amp;A practice across Southeast Asia. </p> <br> <p><a href="mailto:contact@subhadipmitra.com">contact@subhadipmitra.com</a></p> </div> <div class="footer-section"> <h4>Explore</h4> <ul class="footer-links"> <li><a href="/">About</a></li> <li><a href="/now/">What I'm Doing Now</a></li> <li><a href="/blog/">Blog</a></li> <li><a href="/publications/">Publications</a></li> <li><a href="/repositories/">Repositories</a></li> </ul> </div> <div class="footer-section"> <h4>Connect</h4> <ul class="footer-links"> <li><a href="/contact/">Contact</a></li> <li><a href="mailto:contact@subhadipmitra.com">Email</a></li> <li><a href="https://calendly.com/contact-x9nm/30min" target="_blank" rel="external nofollow noopener">Schedule a Call</a></li> <li><a href="https://linkedin.com/in/subhadip-mitra" target="_blank" rel="external nofollow noopener">LinkedIn</a></li> <li><a href="https://github.com/bassrehab" target="_blank" rel="external nofollow noopener">GitHub</a></li> </ul> </div> </div> <div class="footer-bottom"> <div class="footer-copyright"> © 2026 Subhadip Mitra. Some Rights Reserved. Last updated: February 03, 2026. <span class="footer-utility-links"> <a href="/privacy/" title="Privacy Policy">Privacy</a> · <a href="/license/" title="Licenses">Licenses</a> · <a href="/sitemap.xml" title="Sitemap">Sitemap</a> · <a href="/feed.xml" title="RSS Feed">RSS</a> · <a href="/llms.txt" title="AI Agent Information">LLMs</a> </span> </div> <div class="footer-social"> <a href="https://linkedin.com/in/subhadip-mitra" target="_blank" aria-label="LinkedIn" rel="external nofollow noopener"> <i class="fab fa-linkedin-in"></i> </a> <a href="https://github.com/bassrehab" target="_blank" aria-label="GitHub" rel="external nofollow noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/bassrehab" target="_blank" aria-label="Twitter" rel="external nofollow noopener"> <i class="fab fa-twitter"></i> </a> <a href="mailto:contact@subhadipmitra.com" aria-label="Email"> <i class="fas fa-envelope"></i> </a> </div> </div> </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js?a0db7e5d5c70cc3252b3138b0c91dcaf" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script defer src="/assets/js/toc-toggle.js?9c8277d11f423c45ff70df63cbe75108"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?8e03581f97e30ec91fff7c9869d3c6cb"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script src="/assets/js/mathjax-setup.js?a5bb4e6a542c546dd929b24b8b236dfd"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-TW7YQ5XPC6"></script> <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'G-TW7YQ5XPC6');
  </script> <script defer src="/assets/js/google-analytics-setup.js?12374742c4b1801ba82226e617af7e2d"></script> <script defer src="/assets/js/progress-bar.js?2f30e0e6801ea8f5036fa66e1ab0a71a" type="text/javascript"></script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>
    addBackToTop();
  </script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script src="/assets/js/search-setup.js?6c304f7b1992d4b60f7a07956e52f04a"></script> <script src="/assets/js/search-data.js"></script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> <script defer src="/assets/js/newsletter.js?c3d0931971ee96e9df74ba70526c3130"></script> </body> </html>